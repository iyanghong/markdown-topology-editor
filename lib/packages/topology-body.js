/* eslint-disable */
module.exports=function(r){var n={};function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=r,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=234)}([function(t,r,e){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(e(198)),n(e(197)),n(e(117))},function(t,e,r){"use strict";var i,n,d=r(0);(Xe=i=i||{})[Xe.Any=-1]="Any",Xe[Xe.CtrlOrAlt=0]="CtrlOrAlt",Xe[Xe.Ctrl=1]="Ctrl",Xe[Xe.Shift=2]="Shift",Xe[Xe.Alt=3]="Alt",Xe[Xe.Right=4]="Right",(ir=n=n||{})[ir.None=-1]="None",ir[ir.Document=0]="Document",ir[ir.Canvas=1]="Canvas";var o=["fontColor","fontFamily","fontSize","lineHeight","textAlign","textBaseline"],s={cacheLen:30,refresh:30,fontColor:"#222222",fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:12,lineHeight:1.5,textAlign:"center",textBaseline:"middle",color:"#222222",activeColor:"#1890ff",hoverColor:"#fa541c",anchorRadius:4,anchorFillStyle:"#fff",dockStrokeStyle:"#fa541c",dockFillStyle:"#fa541c",dragColor:"#1890ff",rotateCursor:"/assets/img/rotate.cur",hoverCursor:"pointer",minScale:.3,maxScale:5,anchorSize:5,keydown:n.Document,viewPadding:0,gridSize:10,gridColor:"#f3f3f3",ruleColor:"#888888"};function h(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}var u=(a.prototype.floor=function(){this.x|=0,this.y|=0},a.prototype.round=function(){this.x=Math.round(this.x),this.y=Math.round(this.y)},a.prototype.clone=function(){var t=new a(this.x,this.y,this.direction,this.anchorIndex,this.id,this.hidden,this.autoAnchor);return this.data&&(t.data=this.data),this.mode&&(t.mode=this.mode),t},a.prototype.hit=function(t,e){return t.x>this.x-(e=void 0===e?5:e)&&t.x<this.x+e&&t.y>this.y-e&&t.y<this.y+e},a.prototype.rotate=function(t,e){if(!t||360===t)return this;t*=Math.PI/180;var r=(this.x-e.x)*Math.cos(t)-(this.y-e.y)*Math.sin(t)+e.x,e=(this.x-e.x)*Math.sin(t)+(this.y-e.y)*Math.cos(t)+e.y;return this.x=r,this.y=e,this},a.prototype.isSameAs=function(t){return this.anchorIndex===t.anchorIndex&&this.direction===t.direction&&this.id===t.id},a);function a(t,e,r,n,i,o,s){this.x=t,this.y=e,this.direction=r,this.anchorIndex=n,this.id=i,this.hidden=o,this.autoAnchor=s}function p(t){for(var e={nodes:[],lines:[]},r=0,n=t;r<n.length;r++){var i=n[r];i.type?e.lines.push(i):(e.nodes.push(i),i.children&&(e.nodes.push.apply(e.nodes,p(i.children).nodes),e.lines.push.apply(e.lines,p(i.children).lines)))}return e}function y(e,t){var r=[];return t.forEach(function(t){(t.id===e||-1<t.tags.indexOf(e))&&r.push(t),t.children&&r.push.apply(r,y(e,t.children))}),r}function c(t,e){for(var r=[],n=0;n<e.length;n++)e[n].id===t||-1<e[n].tags.indexOf(t)?(r.push(e[n]),e.splice(n,1),--n):e[n].children&&r.push.apply(r,c(t,e[n].children));return r}function l(t,e){for(var r,n=0,i=t;n<i.length;n++){var o=i[n];if(!o.type&&o.children)for(var s=0,a=o.children;s<a.length;s++){var c=a[s];if(c.id===e.id)return o;if(!c.type&&(c.children&&(r=l(c.children,e))))return r}}return r}function f(t,e){if(e.length<3)return!1;for(var r=!1,n=e[e.length-1],i=0,o=e;i<o.length;i++){var s=o[i];n.y>t.y!=s.y>t.y&&s.x+(t.y-s.y)*(n.x-s.x)/(n.y-s.y)>t.x&&(r=!r),n=s}return r}function g(t,e,r,n){void 0===n&&(n=1);var i=Math.atan2(e.y-r.y,r.x-e.x);n=5<n?n:5;var o=Math.sin(i)*n,n=Math.cos(i)*n;return f(t,[new u(e.x-o,e.y-n),new u(r.x-o,r.y-n),new u(r.x+o,r.y+n),new u(e.x+o,e.y+n)])}function m(t,e){return 0|Math.sqrt(Math.pow(Math.abs(t.x-e.x),2)+Math.pow(Math.abs(t.y-e.y),2))}function v(t,e,r,n){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d","M"+t.x+" "+t.y+" C"+e.x+" "+e.y+" "+r.x+" "+r.y+" "+n.x+" "+n.y),0|i.getTotalLength()}window.topologyPoint=u,window.Le5leTopologyPoint=u;var w,b,x=(S.prototype.init=function(){this.ex=this.x+this.width,this.ey=this.y+this.height,this.calcCenter()},S.prototype.floor=function(){this.x|=0,this.y|=0,this.width|=0,this.height|=0,this.init()},S.prototype.round=function(){this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this.init()},S.prototype.clone=function(){return new S(this.x,this.y,this.width,this.height)},S.prototype.hit=function(t,e){return void 0===e&&(e=0),t&&t.x>this.x-e&&t.x<this.ex+e&&t.y>this.y-e&&t.y<this.ey+e},S.prototype.hitByRect=function(t){return t.x>this.x&&t.x<this.ex&&t.y>this.y&&t.y<this.ey||t.ex>this.x&&t.ex<this.ex&&t.y>this.y&&t.y<this.ey||t.ex>this.x&&t.ex<this.ex&&t.ey>this.y&&t.ey<this.ey||t.x>this.x&&t.x<this.ex&&t.ey>this.y&&t.ey<this.ey},S.prototype.hitRotate=function(t,e,r){for(var n=this.toPoints(),i=0,o=n;i<o.length;i++)o[i].rotate(e,r);return f(t,n)},S.prototype.calcCenter=function(){this.center.x=this.x+this.width/2,this.center.y=this.y+this.height/2},S.prototype.toPoints=function(){return[new u(this.x,this.y),new u(this.ex,this.y),new u(this.ex,this.ey),new u(this.x,this.ey)]},S.prototype.translate=function(t,e){this.x+=t,this.y+=e,this.ex+=t,this.ey+=e,this.calcCenter()},S.prototype.scale=function(t,e,r){e=e||this.center,void 0===r&&(r=t),this.x=e.x-(e.x-this.x)*t,this.y=e.y-(e.y-this.y)*r,this.width*=t,this.height*=r,this.init()},S);function S(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n,this.center=new u(0,0),r<0&&(r=0),n<0&&(n=0),this.init()}window.topologyRect=x,(Xe=w=w||{})[Xe.Click=0]="Click",Xe[Xe.DblClick=1]="DblClick",Xe[Xe.WebSocket=2]="WebSocket",Xe[Xe.Mqtt=3]="Mqtt",Xe[Xe.MoveIn=4]="MoveIn",Xe[Xe.MoveOut=5]="MoveOut",(ir={})[ir.Link=0]="Link",ir[ir.StartAnimate=1]="StartAnimate",ir[ir.Function=2]="Function",ir[ir.WindowFn=3]="WindowFn",ir[ir.SetProps=4]="SetProps",ir[ir.PauseAnimate=5]="PauseAnimate",ir[ir.StopAnimate=6]="StopAnimate",ir[ir.Emit=7]="Emit",(Xe=b=b||{})[Xe.Node=0]="Node",Xe[Xe.Line=1]="Line";var _,k=["link","doStartAnimate","doFn","doWindowFn","","doPauseAnimate","doStopAnimate","doEmit"],T={name:"",tags:[],visible:!0,rect:new x(0,0,0,0),fontColor:"",fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:12,lineHeight:1.5,fontStyle:"normal",fontWeight:"normal",textAlign:"center",textBaseline:"middle",textBackground:"",animateCycleIndex:0,events:[],dash:0,lineDashOffset:0,lineWidth:1,strokeStyle:"",fillStyle:"",globalAlpha:1,rotate:0,offsetRotate:0,textMaxLine:0,textOffsetX:0,textOffsetY:0,animatePos:0},I={},L=(A.prototype.fromData=function(t,e){for(var r in e?"string"==typeof e&&(e=JSON.parse(e)):e={},T.id=h(),t=Object.assign({},T,t))this[r]=t[r];for(var r in e)this[r]=e[r];Array.isArray(this.tags)&&(this.tags=Object.assign([],this.tags)),this.rect&&(this.rect=new x(this.rect.x,this.rect.y,this.rect.width,this.rect.height)),this.lineWidth=this.lineWidth||1,!this.fontColor&&e.font&&(this.fontColor=e.font.color||this.fontColor,this.fontFamily=e.font.fontFamily||this.fontFamily,this.fontSize=e.font.fontSize||this.fontSize,this.lineHeight=e.font.lineHeight||this.lineHeight,this.fontStyle=e.font.fontStyle||this.fontStyle,this.fontWeight=e.font.fontWeight||this.fontWeight,this.textAlign=e.font.textAlign||this.textAlign,this.textBaseline=e.font.textBaseline||this.textBaseline,this.textBackground=e.font.background||this.textBackground,delete this.font),this.events&&(this.events=JSON.parse(JSON.stringify(this.events))),this.wheres&&(this.wheres=JSON.parse(JSON.stringify(this.wheres))),"object"==typeof this.data&&(this.data=JSON.parse(JSON.stringify(this.data))),delete this.img,delete this.animateStart,delete this.animateReady},A.prototype.render=function(t){if(this.visible)if(!this.from||this.to){if(t.save(),t.setAttrs&&t.setAttrs(this),(this.rotate||this.offsetRotate)&&(t.translate(this.rect.center.x,this.rect.center.y),t.rotate((this.rotate+this.offsetRotate)*Math.PI/180),t.translate(-this.rect.center.x,-this.rect.center.y)),1<this.lineWidth&&(t.lineWidth=this.lineWidth),this.strokeImage?this.strokeImage===this.lastStrokeImage&&this.strokeImg?t.strokeStyle=t.createPattern(this.strokeImg,"repeat"):this.loadStrokeImg():t.strokeStyle=this.strokeStyle||d.Store.get(this.generateStoreKey("LT:color")),this.fillImage?this.fillImage===this.lastFillImage&&this.fillImg?t.fillStyle=t.createPattern(this.fillImg,"repeat"):this.loadFillImg():this.fillStyle&&(t.fillStyle=this.fillStyle),this.lineCap?t.lineCap=this.lineCap:this.type===b.Line&&(t.lineCap="round"),this.globalAlpha<1&&(t.globalAlpha=this.globalAlpha),this.lineDash)t.setLineDash(this.lineDash);else switch(this.dash){case 1:t.setLineDash([5,5]);break;case 2:t.setLineDash([10,10]);break;case 3:t.setLineDash([10,10,2,10])}if(this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur),this.draw(t),t.restore(),this.children)for(var e=0,r=this.children;e<r.length;e++)r[e].render(t)}else if(this.children)for(var n=0,i=this.children;n<i.length;n++)i[n].render(t)},A.prototype.loadFillImg=function(){var t,e=this;this.fillImage&&((t=new Image).crossOrigin="anonymous",t.src=this.fillImage,t.onload=function(){e.lastFillImage=e.fillImage,e.fillImg=t,I[e.fillImage]={img:t},d.Store.set(e.generateStoreKey("LT:imageLoaded"),!0)})},A.prototype.loadStrokeImg=function(){var t,e=this;this.strokeImage&&((t=new Image).crossOrigin="anonymous",t.src=this.strokeImage,t.onload=function(){e.lastStrokeImage=e.strokeImage,e.strokeImg=t,I[e.strokeImage]={img:t},d.Store.set(e.generateStoreKey("LT:imageLoaded"),!0)})},A.prototype.click=function(){if(this.events)for(var t=0,e=this.events;t<e.length;t++){var r=e[t];r.type===w.Click&&this[k[r.action]]&&this[k[r.action]](r.value,r.params)}},A.prototype.dblclick=function(){if(this.events)for(var t=0,e=this.events;t<e.length;t++){var r=e[t];r.type===w.DblClick&&this[k[r.action]]&&this[k[r.action]](r.value,r.params)}},A.prototype.moveIn=function(){if(this.events)for(var t=0,e=this.events;t<e.length;t++){var r=e[t];r.type===w.MoveIn&&this[k[r.action]]&&this[k[r.action]](r.value,r.params)}},A.prototype.moveOut=function(){if(this.events)for(var t=0,e=this.events;t<e.length;t++){var r=e[t];r.type===w.MoveOut&&this[k[r.action]]&&this[k[r.action]](r.value,r.params)}},A.prototype.doWheres=function(){var e=this;this.wheres&&this.wheres.forEach(function(t){t.fn.trim()?new Function("pen",t.fn)(e)&&t.actions&&t.actions.forEach(function(t){e.doAction(t)}):new Function("attr","return attr "+t.comparison+" "+t.value)(e[t.key])&&t.actions&&t.actions.forEach(function(t){e.doAction(t)})})},A.prototype.doAction=function(t){switch(t.do||t.action){case 0:case"Link":this.link(t.url||t.value,t._blank||t.params);break;case 1:case"StartAnimate":this.doStartAnimate(t.tag||t.value);break;case 5:case"PauseAnimate":this.doPauseAnimate(t.tag||t.value);break;case 6:case"StopAnimate":this.doStopAnimate(t.tag||t.value);break;case 2:case"Function":this.doFn(t.fn||t.value,t.params);break;case 3:case"WindowFn":this.doWindowFn(t.fn||t.value,t.params);break;case 7:case"Emit":this.doEmit(t.fn||t.value,t.params)}},A.prototype.show=function(){return this.visible=!0,this},A.prototype.hide=function(){return this.visible=!1,this},A.prototype.isVisible=function(){return this.visible},A.prototype.getTID=function(){return this.TID},A.prototype.setTID=function(t){if(this.TID=t,this.children)for(var e=0,r=this.children;e<r.length;e++)r[e].setTID(t);return this},A.prototype.startAnimate=function(){this.animateStart=Date.now(),this.type!==b.Node||this.animateReady||this.initAnimate(),d.Store.set(this.generateStoreKey("LT:AnimatePlay"),{pen:this}),2===this.playType&&this.play()},A.prototype.play=function(t){d.Store.set(this.generateStoreKey("LT:play"),{pen:this,pause:t})},A.prototype.link=function(t,e){window.open(t,void 0===e?"_blank":e)},A.prototype.doStartAnimate=function(t,e){t?d.Store.set(this.generateStoreKey("LT:AnimatePlay"),{tag:t}):this.startAnimate()},A.prototype.doPauseAnimate=function(t,e){t?d.Store.set(this.generateStoreKey("LT:AnimatePlay"),{tag:t,stop:!0}):this.pauseAnimate()},A.prototype.doStopAnimate=function(t,e){t?d.Store.set(this.generateStoreKey("LT:AnimatePlay"),{tag:t,stop:!0}):this.stopAnimate()},A.prototype.doFn=function(t,e){new Function("pen","params",t)(this,e)},A.prototype.doWindowFn=function(t,e){window[t](this,e)},A.prototype.doEmit=function(t,e){d.Store.set(this.generateStoreKey("LT:emit"),{event:t,params:e,pen:this})},A.prototype.generateStoreKey=function(t){return this.TID+"-"+t},A);function A(){}function R(t,e){var r=e.borderRadius,n=e.borderRadius;e.borderRadius<1&&(r=e.rect.width*e.borderRadius,n=e.rect.height*e.borderRadius);n=r<n?r:n;e.rect.width<2*n&&(n=e.rect.width/2),e.rect.height<2*n&&(n=e.rect.height/2),t.beginPath(),t.moveTo(e.rect.x+n,e.rect.y),t.arcTo(e.rect.x+e.rect.width,e.rect.y,e.rect.x+e.rect.width,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height,e.rect.x,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x,e.rect.y+e.rect.height,e.rect.x,e.rect.y,n),t.arcTo(e.rect.x,e.rect.y,e.rect.x+e.rect.width,e.rect.y,n),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function P(t,e){t.beginPath(),t.ellipse(e.rect.x+e.rect.width/2,e.rect.y+e.rect.height/2,e.rect.width/2,e.rect.height/2,0,0,2*Math.PI),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function E(t,e){t.beginPath(),t.moveTo(e.rect.x+e.rect.width/2,e.rect.y),t.lineTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height),t.lineTo(e.rect.x,e.rect.y+e.rect.height),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function C(t,e){t.beginPath(),t.moveTo(e.rect.x+e.rect.width/2,e.rect.y),t.lineTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height/2),t.lineTo(e.rect.x+e.rect.width/2,e.rect.y+e.rect.height),t.lineTo(e.rect.x,e.rect.y+e.rect.height/2),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function O(t,e){t.beginPath(),t.moveTo(e.rect.x,e.rect.y+e.rect.height/2),t.lineTo(e.rect.x+e.rect.height/2,e.rect.y),t.lineTo(e.rect.x+e.rect.height/2,e.rect.y+e.rect.height/3),t.lineTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height/3),t.lineTo(e.rect.x+e.rect.width,e.rect.y+2*e.rect.height/3),t.lineTo(e.rect.x+e.rect.height/2,e.rect.y+2*e.rect.height/3),t.lineTo(e.rect.x+e.rect.height/2,e.rect.y+2*e.rect.height/3),t.lineTo(e.rect.x+e.rect.height/2,e.rect.y+e.rect.height),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function N(t,e){t.beginPath(),t.moveTo(e.rect.x,e.rect.y+e.rect.height/3),t.lineTo(e.rect.x+(e.rect.width-e.rect.height/2),e.rect.y+e.rect.height/3),t.lineTo(e.rect.x+(e.rect.width-e.rect.height/2),e.rect.y),t.lineTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height/2),t.lineTo(e.rect.x+(e.rect.width-e.rect.height/2),e.rect.y+e.rect.height),t.lineTo(e.rect.x+(e.rect.width-e.rect.height/2),e.rect.y+2*e.rect.height/3),t.lineTo(e.rect.x,e.rect.y+2*e.rect.height/3),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function M(t,e){t.beginPath(),t.moveTo(e.rect.x,e.rect.y+e.rect.height/2),t.lineTo(e.rect.x+e.rect.height/2,e.rect.y),t.lineTo(e.rect.x+e.rect.height/2,e.rect.y+e.rect.height/3),t.lineTo(e.rect.x+(e.rect.width-e.rect.height/2),e.rect.y+e.rect.height/3),t.lineTo(e.rect.x+(e.rect.width-e.rect.height/2),e.rect.y),t.lineTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height/2),t.lineTo(e.rect.x+(e.rect.width-e.rect.height/2),e.rect.y+e.rect.height),t.lineTo(e.rect.x+(e.rect.width-e.rect.height/2),e.rect.y+2*e.rect.height/3),t.lineTo(e.rect.x+e.rect.height/2,e.rect.y+2*e.rect.height/3),t.lineTo(e.rect.x+e.rect.height/2,e.rect.y+e.rect.height),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function B(t,e){var r=[];switch(e.whiteSpace){case"nowrap":r.push(e.text);break;case"pre-line":r=e.text.split(/[\n]/g);break;default:for(var n=e.getTextRect(),i=e.text.split(/[\n]/g),o=0;o<i.length;++o){var s=function(t,e,r){for(var n=[],i=t[0]||"",o=1;o<t.length;++o){var s=t[o]||"",a=i+s,c=(a.match(/[\u4e00-\u9fa5]/g)||"").length;(a.length-c)*r*.5+c*r<e?i+=s:(n.push(i),i=s)}return n.push(i),n}(function(t){var e=[],r="";t=t||"";for(var n=0;n<t.length;++n){var i=t.charCodeAt(n);i<33||126<i?(r&&(e.push(r),r=""),e.push(t[n])):r+=t[n]}return r&&e.push(r),e}(i[o]),n.width,e.fontSize);r.push.apply(r,s)}}return r}function D(t,e){for(var r=B(0,e),n=0,i=0,o=r;i<o.length;i++){var s=o[i];t.font=(e.fontStyle||"normal")+" normal "+(e.fontWeight||"normal")+" "+e.fontSize+"px/"+e.lineHeight+" "+e.fontFamily;s=t.measureText(s).width;n<s&&(n=s)}return{width:n,height:r.length*e.fontSize*e.lineHeight}}function U(t,e,r,n,i,o){if(e&&o){var s=t.measureText(e).width;t.save(),t.fillStyle=o;var a=r-s/2,c=n-i/2;switch(t.textAlign){case"left":a=r;break;case"right":a=r-s}switch(t.textBaseline){case"top":c=n;break;case"bottom":c=n-i}t.fillRect(a,c,s,i),t.restore()}}function j(t,e){if(e.text){e.text.split||(e.text+=""),t.save(),t.beginPath(),delete t.shadowColor,delete t.shadowBlur,t.font=(e.fontStyle||"normal")+" normal "+(e.fontWeight||"normal")+" "+e.fontSize+"px/"+e.lineHeight+" "+e.fontFamily,e.fontColor?t.fillStyle=e.fontColor:t.fillStyle=d.Store.get(e.generateStoreKey("LT:fontColor")),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline);var r=e.getTextRect(),n=B(0,e),i=e.fontSize*e.lineHeight,o=0<e.textMaxLine&&e.textMaxLine<n.length?e.textMaxLine:n.length,s=r.x+r.width/2,a=r.y+(r.height-i*o)/2+4*i/7;switch(t.textAlign){case"left":s=r.x;break;case"right":s=r.x+r.width}switch(t.textBaseline){case"top":a=r.y+(i-e.fontSize)/2;break;case"bottom":a=r.ey-i*n.length+i}!function(t,e,r,n,i,o,s,a){s=!s||s>e.length?e.length:Math.ceil(s);for(var c,h=0;h<s-1;++h)a&&U(t,e[h],r,n+h*o,o,a),t.fillText(e[h],r,n+h*o);s<e.length?(c=(e[s-1]||"")+"...",e[s-1]&&t.measureText(c).width>i&&(c=e[s-1].substr(0,e[s-1].length-2)+"..."),a&&U(t,c,r,n+(s-1)*o,o,a),t.fillText(c,r,n+(s-1)*o)):(a&&U(t,e[s-1],r,n+(s-1)*o,o,a),t.fillText(e[s-1],r,n+(s-1)*o))}(t,n,s+e.textOffsetX,a+e.textOffsetY,r.width,(r.height,i),o,e.textBackground),t.restore()}}function F(t,e){t.save(),t.textAlign="center",t.textBaseline="middle";var r=e.getIconRect(),n=r.x+r.width/2,i=r.y+r.height/2;switch(e.imageAlign){case"top":i=r.y,t.textBaseline="top";break;case"bottom":i=r.ey,t.textBaseline="bottom";break;case"left":n=r.x,t.textAlign="left";break;case"right":n=r.ex,t.textAlign="right";break;case"left-top":n=r.x,i=r.y,t.textAlign="left",t.textBaseline="top";break;case"right-top":n=r.ex,i=r.y,t.textAlign="right",t.textBaseline="top";break;case"left-bottom":n=r.x,i=r.ey,t.textAlign="left",t.textBaseline="bottom";break;case"right-bottom":n=r.ex,i=r.ey,t.textAlign="right",t.textBaseline="bottom"}0<e.iconSize?t.font=e.iconSize+"px "+e.iconFamily:r.width>r.height?t.font=r.height+"px "+e.iconFamily:t.font=r.width+"px "+e.iconFamily,t.fillStyle=e.iconColor||d.Store.get(e.generateStoreKey("LT:iconColor"))||e.fontColor,e.iconRotate&&(t.translate(r.center.x,r.center.y),t.rotate(e.iconRotate*Math.PI/180),t.translate(-r.center.x,-r.center.y)),t.beginPath(),t.fillText(e.icon,n,i),t.restore()}function W(t,e){t.beginPath();var r=e.rect.y+e.rect.height/2;t.moveTo(e.rect.x,r),t.lineTo(e.rect.x+e.rect.width,r),t.stroke()}function K(t){t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y,_.Up)),t.anchors.push(new u(t.rect.x+3*t.rect.width/4,t.rect.y+t.rect.height/2,_.Right)),t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y+t.rect.height,_.Bottom)),t.anchors.push(new u(t.rect.x+t.rect.width/4,t.rect.y+t.rect.height/2,_.Left))}function q(t){t.anchors.push(new u(t.rect.x,t.rect.y+t.rect.height/2,_.Left)),t.anchors.push(new u(t.rect.x+t.rect.width,t.rect.y+t.rect.height/2,_.Right))}function z(t){var e=t.rect.y+t.rect.height/2;t.anchors.push(new u(t.rect.x,e,_.Left)),t.anchors.push(new u(t.rect.x+t.rect.width,e,_.Right));for(var r=t.rect.x+5;r<t.rect.ex;r+=5){var n=new u(r,e,_.Bottom);n.hidden=!0,t.anchors.push(n)}}function H(t){var e=t.rect.width/2,r=t.rect.height/2;r<e?e=r:r=e;var n=t.rect.height/10;t.iconRect=new x(t.rect.x+(t.rect.width-e)/2,t.rect.y+(n=n<10?10:n),e,r)}function V(t){var e=t.rect.height/20;t.textRect=new x(t.rect.x+t.rect.width/4,t.rect.y+2*t.rect.height/3-(e=e<5?0:e),t.rect.width/2,t.rect.height/3-5);var r=5*t.rect.width/7,e=5*t.rect.height/7;t.fullTextRect=new x(t.rect.x+(t.rect.width-r)/2,t.rect.y+(t.rect.height-e)/2,r,e)}function Y(t){var e=2*t.rect.width/7,r=2*t.rect.height/7;r<e?e=r:r=e;var n=e;t.iconRect=new x(t.rect.x+(t.rect.width-e)/2,t.rect.y+(n=n<10?10:n),e,r)}function X(t){t.textRect=new x(t.rect.x+t.rect.width/4,t.rect.y+2*t.rect.height/3,t.rect.width/2,t.rect.height/3-5);var e=t.rect.width/2,r=3*t.rect.height/7;t.fullTextRect=new x(t.rect.x+(t.rect.width-e)/2,t.rect.y+t.rect.height/2-5,e,r)}function $(t){var e=t.rect.width/3,r=t.rect.height/3;r<e?e=r:r=e;var n=t.rect.width/5;t.iconRect=new x(t.rect.x+(t.rect.width-e)/2,t.rect.y+(n=n<10?10:n),e,r)}function G(t){var e=t.rect.height/10;t.textRect=new x(t.rect.x+t.rect.width/3,t.rect.y+2*t.rect.height/3-(e=e<5?0:e),t.rect.width/3,t.rect.height/3-5);var r=t.rect.width/2,e=+t.rect.height/2;t.fullTextRect=new x(t.rect.x+(t.rect.width-r)/2,t.rect.y+t.rect.height/4,r,e)}function J(t){t.iconRect=new x(0,0,0,0)}function Q(t){t.textRect=new x(t.rect.x+t.rect.height/2,t.rect.y+t.rect.height/3,t.rect.width-t.rect.height/2,t.rect.height/3),t.fullTextRect=t.textRect}function Z(t){t.iconRect=new x(0,0,0,0)}function tt(t){t.textRect=new x(t.rect.x,t.rect.y+t.rect.height/3,t.rect.width-t.rect.height/2,t.rect.height/3),t.fullTextRect=t.textRect}function et(t){t.iconRect=new x(0,0,0,0)}function rt(t){t.textRect=new x(t.rect.x+t.rect.height/2,t.rect.y+t.rect.height/3,t.rect.width-t.rect.height,t.rect.height/3),t.fullTextRect=t.textRect}function nt(t){t.iconRect=new x(0,0,0,0)}function it(t){t.fullTextRect=new x(t.rect.x+10,t.rect.y+t.rect.height/2-20,t.rect.width-20,20),t.textRect=t.fullTextRect}function ot(t,e){t.beginPath(),t.moveTo(e.from.x,e.from.y),t.lineTo(e.to.x,e.to.y),t.stroke()}function st(t,e){}function at(t){t.controlPoints=[]}(ir=_=_||{})[ir.None=0]="None",ir[ir.Up=1]="Up",ir[ir.Right=2]="Right",ir[ir.Bottom=3]="Bottom",ir[ir.Left=4]="Left";var ct=50;function ht(t,e){t.beginPath(),t.moveTo(e.from.x,e.from.y);for(var r=0,n=e.controlPoints;r<n.length;r++){var i=n[r];t.lineTo(i.x,i.y)}t.lineTo(e.to.x,e.to.y),t.stroke()}function lt(t,e){t.save(),t.fillStyle="#fff",t.lineWidth=2;for(var r=0,n=e.controlPoints;r<n.length;r++){var i=n[r];t.beginPath(),t.arc(i.x,i.y,4,0,2*Math.PI),t.stroke(),t.fill()}t.restore()}function ut(t){t.controlPoints=[];var e=pt(t.from,t.to);t.from.direction&&t.controlPoints.push(e);var r,n=pt(t.to,t.from);switch(e.direction){case _.Up:r=function(t,e){if(t.x===e.x||t.y===e.y)return[];{if(t.y>e.y)return e.direction===_.Up&&t.y-e.y>3*ct?t.x<e.x?e.x-t.x<ct?[new u(t.x-2*ct,t.y),new u(t.x-2*ct,e.y)]:[new u(t.x,e.y)]:t.x-e.x<ct?[new u(t.x+2*ct,t.y),new u(t.x+2*ct,e.y)]:[new u(t.x,e.y)]:e.direction===_.Left&&t.x>e.x||e.direction===_.Right&&t.x<e.x?[new u(e.x,t.y)]:[new u(t.x,e.y)];if(e.direction!==_.Bottom)return[new u(e.x,t.y)];if(t.x<e.x)return yt(t,e);t=yt(e,t);return[t[1],t[0]]}}(e,n);break;case _.Right:r=function(t,e){if(t.x===e.x||t.y===e.y)return[];{if(t.x<e.x)return e.direction===_.Right&&e.x-t.x>3*ct?t.y<e.y?e.y-t.y<ct?[new u(t.x,t.y-2*ct),new u(e.x,t.y-2*ct)]:[new u(e.x,t.y)]:t.y-e.y<ct?[new u(t.x,t.y+2*ct),new u(e.x,t.y+2*ct)]:[new u(e.x,t.y)]:e.direction===_.Right||e.direction===_.Up&&t.y<e.y||e.direction===_.Bottom&&t.y>e.y?[new u(e.x,t.y)]:[new u(t.x,e.y)];if(e.direction!==_.Left)return[new u(t.x,e.y)];if(t.y<e.y)return gt(t,e);t=gt(e,t);return[t[1],t[0]]}}(e,n);break;case _.Bottom:r=function(t,e){if(t.x===e.x||t.y===e.y)return[];{if(t.y<e.y)return e.direction===_.Bottom&&e.y-t.y>3*ct?t.x<e.x?e.x-t.x<ct?[new u(t.x-2*ct,t.y),new u(t.x-2*ct,e.y)]:[new u(t.x,e.y)]:t.x-e.x<ct?[new u(t.x+2*ct,t.y),new u(t.x+2*ct,e.y)]:[new u(t.x,e.y)]:e.direction===_.Left&&t.x>e.x||e.direction===_.Right&&t.x<e.x?[new u(e.x,t.y)]:[new u(t.x,e.y)];if(e.direction!==_.Up)return[new u(e.x,t.y)];if(t.x<e.x)return yt(t,e);t=yt(e,t);return[t[1],t[0]]}}(e,n);break;case _.Left:r=function(t,e){if(t.x===e.x||t.y===e.y)return[];{if(t.x>e.x)return e.direction===_.Left&&t.x-e.x>3*ct?t.y<e.y?e.y-t.y<ct?[new u(t.x,t.y+2*ct),new u(e.x,t.y+2*ct)]:[new u(e.x,t.y)]:t.y-e.y<ct?[new u(t.x,t.y-2*ct),new u(e.x,t.y-2*ct)]:[new u(e.x,t.y)]:e.direction===_.Left||e.direction===_.Up&&t.y<e.y||e.direction===_.Bottom&&t.y>e.y?[new u(e.x,t.y)]:[new u(t.x,e.y)];if(e.direction!==_.Right)return[new u(t.x,e.y)];if(t.y<e.y)return gt(t,e);t=gt(e,t);return[t[1],t[0]]}}(e,n)}t.controlPoints.push.apply(t.controlPoints,r),t.to.direction&&t.controlPoints.push(n)}function ft(t,e){if(!e.controlPoints||!e.controlPoints.length)return g(t,e.from,e.to,e.lineWidth/2);if(g(t,e.from,e.controlPoints[0]))return!0;if(g(t,e.to,e.controlPoints[e.controlPoints.length-1]))return!0;for(var r=0;r<e.controlPoints.length-1;++r)if(g(t,e.controlPoints[r],e.controlPoints[r+1]))return!0;return!1}function dt(t,e){var r=[e.from];r.push.apply(r,e.controlPoints),r.push(e.to);for(var n=0,i=r;n<i.length;n++){var o=i[n];Math.abs(t.x-o.x)<7&&(t.x=o.x),Math.abs(t.y-o.y)<7&&(t.y=o.y)}}function pt(t,e){var r=t.clone();switch(t.direction){case _.Up:e.y<t.y?r.y-=Math.round((t.y-e.y)/2):r.y-=ct;break;case _.Right:e.x>t.x?r.x+=Math.round((e.x-t.x)/2):r.x+=ct;break;case _.Bottom:e.y>t.y?r.y+=Math.round((e.y-t.y)/2):r.y+=ct;break;case _.Left:e.x<t.x?r.x-=Math.round((t.x-e.x)/2):r.x-=ct}return r}function yt(t,e){var r=t.x+(e.x-t.x)/2;return[new u(r,t.y),new u(r,e.y)]}function gt(t,e){var r=t.y+(e.y-t.y)/2;return[new u(t.x,r),new u(e.x,r)]}function mt(t){var e=parseInt,r=Math.round,n={};if(9<(i=t.length)){var i,o=t=t.split(","),s=o[0],a=o[1],c=o[2],o=o[3];if((i=t.length)<3||4<i)return null;n.r=e("a"==s[3]?s.slice(5):s.slice(4)),n.g=e(a),n.b=e(c),n.a=o?parseFloat(o):-1}else{if(8==i||6==i||i<4)return null;t=e((t=i<6?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(4<i?t[4]+t[4]:""):t).slice(1),16),9==i||5==i?(n.r=t>>24&255,n.g=t>>16&255,n.b=t>>8&255,n.a=r((255&t)/.255)/1e3):(n.r=t>>16,n.g=t>>8&255,n.b=255&t,n.a=-1)}return n}function vt(t,e,r,n){var i,o,s,a,c=Math.round,h="string"==typeof r;return"number"!=typeof t||t<-1||1<t||"string"!=typeof e||"r"!=e[0]&&"#"!=e[0]||r&&!h?null:(a=9<e.length,a=h?9<r.length||"c"==r&&!a:a,s=mt(e),e=t<0,r=r&&"c"!=r?mt(r):e?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},e=1-(t=e?-1*t:t),s&&r?(n=n?(i=c(e*s.r+t*r.r),o=c(e*s.g+t*r.g),c(e*s.b+t*r.b)):(i=c(Math.pow(e*Math.pow(s.r,2)+t*Math.pow(r.r,2),.5)),o=c(Math.pow(e*Math.pow(s.g,2)+t*Math.pow(r.g,2),.5)),c(Math.pow(e*Math.pow(s.b,2)+t*Math.pow(r.b,2),.5))),h=s.a,r=r.a,h=(s=0<=h||0<=r)?h<0?r:r<0?h:h*e+r*t:0,a?"rgb"+(s?"a(":"(")+i+","+o+","+n+(s?","+c(1e3*h)/1e3:"")+")":"#"+(4294967296+16777216*i+65536*o+256*n+(s?c(255*h):0)).toString(16).slice(1,s?void 0:-2)):null)}function wt(t,e){e=mt(e)||{r:0,g:0,b:0};return e.a<0?"rgba("+e.r+","+e.g+","+e.b+","+t+")":"rgba("+e.r+","+e.g+","+e.b+","+(t+e.a)+")"}function bt(t,e){return+e||(e&&"%"===e[e.length-1]?t*+(e=e.substr(0,e.length-1))/100:0)}function xt(t,e){var r=t.x-e.x,e=t.y-e.y;return Math.sqrt(r*r+e*e)}var St=80;function _t(t,e){t.beginPath(),t.moveTo(e.from.x,e.from.y),t.bezierCurveTo(e.controlPoints[0].x,e.controlPoints[0].y,e.controlPoints[1].x,e.controlPoints[1].y,e.to.x,e.to.y),t.stroke()}function kt(t,e){t.save(),t.fillStyle=wt(.5,t.strokeStyle+""),t.lineWidth=1,t.beginPath(),t.moveTo(e.from.x,e.from.y),t.lineTo(e.controlPoints[0].x,e.controlPoints[0].y),t.stroke(),t.beginPath(),t.moveTo(e.to.x,e.to.y),t.lineTo(e.controlPoints[1].x,e.controlPoints[1].y),t.stroke(),t.fillStyle="#fff",t.lineWidth=2;for(var r=0,n=e.controlPoints;r<n.length;r++){var i=n[r];t.beginPath(),t.arc(i.x,i.y,4,0,2*Math.PI),t.stroke(),t.fill()}t.restore()}function Tt(t){t.from.direction||(t.from.direction=_.Bottom),t.to.direction||(t.to.direction=(t.from.direction+2)%4,t.to.direction||(t.to.direction=_.Left)),t.controlPoints=[At(t.from,t.to),At(t.to,t.from)],d.Store.set(Rt(t,"pts-")+t.id,void 0)}function It(t,e){var r=d.Store.get(Rt(e,"pts-")+e.id);if(!r){if(r=[e.from],e.controlPoints)for(var n=.01;n<1;n+=.01)r.push(Lt(n,e.from,e.controlPoints[0],e.controlPoints[1],e.to));r.push(e.to),d.Store.set(Rt(e,"pts-")+e.id,r)}for(var i=r.length-1,n=0;n<i;++n)if(g(t,r[n],r[n+1]))return!0;return!1}function Lt(t,e,r,n,i){var o=e.x,s=e.y,a=i.x,c=i.y,e=r.x,i=r.y,r=n.x,n=n.y;return new u(o*(1-t)*(1-t)*(1-t)+3*e*t*(1-t)*(1-t)+3*r*t*t*(1-t)+a*t*t*t,s*(1-t)*(1-t)*(1-t)+3*i*t*(1-t)*(1-t)+3*n*t*t*(1-t)+c*t*t*t)}function At(t,e){var r=new u(t.x,t.y,t.direction,t.anchorIndex,t.id),n=window.topologyControlPtDistance||St;if((t.direction===_.Up||t.direction===_.Bottom)&&Math.abs(t.x-e.x)<3)return e.y>t.y?(n=Math.round((e.y-t.y)/3),r.y+=n):(n=Math.round((t.y-e.y)/3),r.y-=n),r;if((t.direction===_.Left||t.direction===_.Right)&&Math.abs(t.y-e.y)<3)return e.x>t.x?(n=Math.round((e.x-t.x)/3),r.x+=n):(n=Math.round((t.x-e.x)/3),r.x-=n),r;switch(t.direction){case _.Up:r.y-=n;break;case _.Right:r.x+=n;break;case _.Bottom:r.y+=n;break;case _.Left:r.x-=n}return r}function Rt(t,e){return t.getTID()+"-"+e}var Pt=20;function Et(t){switch(t.from.direction||(t.from.direction=_.Bottom),t.to.direction||(t.to.direction=(t.from.direction+2)%4,t.to.direction||(t.to.direction=_.Left)),t.from.direction){case _.Up:t.controlPoints=[new u(t.from.x,t.from.y-Pt),new u(t.from.x,t.to.y)];break;case _.Right:t.controlPoints=[new u(t.from.x+Pt,t.from.y),new u(t.from.x,t.to.y)];break;case _.Bottom:t.controlPoints=[new u(t.from.x,t.from.y+Pt),new u(t.from.x,t.to.y)];break;case _.Left:t.controlPoints=[new u(t.from.x-Pt,t.from.y),new u(t.from.x,t.to.y)]}d.Store.set(Rt(t,"pts-")+t.id,void 0)}function Ct(t,e,r,n,i){n+=3*t.lineWidth;var o=t.lineWidth/10;t.lineWidth<2&&(t.lineWidth=2,o=0),t.translate(r.x,r.y),t.rotate(Math.atan2(r.y-e.y,r.x-e.x)),t.translate(-r.x-t.lineWidth+5*o,-r.y),t.moveTo(r.x,r.y+o),t.lineTo(r.x,r.y-o),t.lineTo(r.x-n,r.y-n/3),t.lineTo(r.x-n,r.y+n/3),t.closePath(),t.stroke(),t.fillStyle=i||t.strokeStyle,t.fill()}function Ot(t,e,r,n){Ct(t,e,r,n,d.Store.get("LT:bkColor")||"#fff")}function Nt(t,e,r,n,i){var o=(n+=3*t.lineWidth)/2,s=t.lineWidth/10;t.lineWidth<2&&(t.lineWidth=2,s=0),t.translate(r.x,r.y),t.rotate(Math.atan2(r.y-e.y,r.x-e.x)),t.translate(-r.x-t.lineWidth+5*s,-r.y),t.moveTo(r.x,r.y+s),t.lineTo(r.x,r.y-s),t.lineTo(r.x-o,r.y-o/2),t.lineTo(r.x-n,r.y-s),t.lineTo(r.x-n,r.y+s),t.lineTo(r.x-o,r.y+o/2),t.closePath(),t.stroke(),t.fillStyle=i||t.strokeStyle,t.fill()}function Mt(t,e,r,n){Nt(t,e,r,n,d.Store.get("LT:bkColor")||"#fff")}function Bt(t,e,r,n,i){n=(n+=3*t.lineWidth)/2;t.lineWidth<2&&(t.lineWidth=2),t.translate(r.x,r.y),t.rotate(Math.atan2(r.y-e.y,r.x-e.x)),t.translate(-r.x,-r.y-t.lineWidth/10),t.arc(r.x-n-t.lineWidth/2,r.y,n,0,2*Math.PI),t.stroke(),t.fillStyle=i||t.strokeStyle,t.fill()}function Dt(t,e,r,n){Bt(t,e,r,n,d.Store.get("LT:bkColor")||"#fff")}function Ut(t){t.anchors.push(new u(t.rect.x,t.rect.y+t.rect.height/2,_.Left)),t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y,_.Up)),t.anchors.push(new u(t.rect.x+t.rect.width,t.rect.y+t.rect.height/2,_.Right)),t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y+t.rect.height,_.Bottom));for(var e,r=5;r<360;r+=5)r%90!=0&&(e=Math.round(r/90),(e=new u(t.rect.center.x+Math.sin(r/180*Math.PI)*t.rect.width/2,t.rect.center.y+Math.cos(r/180*Math.PI)*t.rect.height/2,e)).hidden=!0,t.anchors.push(e))}function jt(t,e,r,n){n+=3*t.lineWidth,t.translate(r.x,r.y),t.rotate(Math.atan2(r.y-e.y,r.x-e.x)),t.translate(-r.x-t.lineWidth/5,-r.y-t.lineWidth/5),t.moveTo(r.x,r.y),t.lineTo(r.x-n,r.y-n/3),t.moveTo(r.x,r.y),t.lineTo(r.x-n,r.y+n/3),t.stroke()}function Ft(t,e,r,n){n+=3*t.lineWidth,t.translate(r.x,r.y),t.rotate(Math.atan2(r.y-e.y,r.x-e.x)),t.translate(-r.x-t.lineWidth/5,-r.y-t.lineWidth/5),r.x>e.x?(t.moveTo(r.x,r.y),t.lineTo(r.x-n,r.y-n/3)):(t.moveTo(r.x,r.y),t.lineTo(r.x-n,r.y+n/3)),t.stroke()}function Wt(t,e,r,n){n+=3*t.lineWidth,t.translate(r.x,r.y),t.rotate(Math.atan2(r.y-e.y,r.x-e.x)),t.translate(-r.x-t.lineWidth/5,-r.y-t.lineWidth/5),r.x<e.x?(t.moveTo(r.x,r.y),t.lineTo(r.x-n,r.y-n/3)):(t.moveTo(r.x,r.y),t.lineTo(r.x-n,r.y+n/3)),t.stroke()}function Kt(t,e){t.beginPath(),t.moveTo(e.rect.x+e.rect.width/2,e.rect.y),t.lineTo(e.rect.x+e.rect.width,e.rect.y+2*e.rect.height/5),t.lineTo(e.rect.x+4*e.rect.width/5,e.rect.y+e.rect.height),t.lineTo(e.rect.x+e.rect.width/5,e.rect.y+e.rect.height),t.lineTo(e.rect.x,e.rect.y+2*e.rect.height/5),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function qt(t){var e=t.rect.width/2,r=t.rect.height/2;r<e?e=r:r=e;var n=t.rect.height/7;t.iconRect=new x(t.rect.x+(t.rect.width-e)/2,t.rect.y+(n=n<10?10:n),e,r)}function zt(t){t.textRect=new x(t.rect.x+t.rect.width/5,t.rect.y+5*t.rect.height/7,3*t.rect.width/5,t.rect.height/4);var e=3*t.rect.width/5,r=3*t.rect.height/5;t.fullTextRect=new x(t.rect.x+(t.rect.width-e)/2,t.rect.y+t.rect.height/4,e,r)}function Ht(t){t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y,_.Up)),t.anchors.push(new u(t.rect.x+t.rect.width,t.rect.y+2*t.rect.height/5,_.Right)),t.anchors.push(new u(t.rect.x+4*t.rect.width/5,t.rect.y+t.rect.height,_.Bottom)),t.anchors.push(new u(t.rect.x+t.rect.width/5,t.rect.y+t.rect.height,_.Bottom)),t.anchors.push(new u(t.rect.x,t.rect.y+2*t.rect.height/5,_.Left))}function Vt(t,e){t.beginPath();var r=e.rect.width/5;t.moveTo(e.rect.x+r,e.rect.y),t.lineTo(e.rect.x+e.rect.width-r,e.rect.y),t.lineTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height/2),t.lineTo(e.rect.x+e.rect.width-r,e.rect.y+e.rect.height),t.lineTo(e.rect.x+r,e.rect.y+e.rect.height),t.lineTo(e.rect.x,e.rect.y+e.rect.height/2),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function Yt(t){t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y,_.Up)),t.anchors.push(new u(t.rect.x+t.rect.width,t.rect.y+t.rect.height/2,_.Right)),t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y+t.rect.height,_.Bottom)),t.anchors.push(new u(t.rect.x,t.rect.y+t.rect.height/2,_.Left));var e=new u(t.rect.x+t.rect.width/10,t.rect.y+t.rect.height/4,_.Left);e.hidden=!0,t.anchors.push(e);e=new u(t.rect.x+t.rect.width/10,t.rect.y+3*t.rect.height/4,_.Left);e.hidden=!0,t.anchors.push(e);e=new u(t.rect.x+9*t.rect.width/10,t.rect.y+t.rect.height/4,_.Right);e.hidden=!0,t.anchors.push(e);e=new u(t.rect.x+9*t.rect.width/10,t.rect.y+3*t.rect.height/4,_.Right);e.hidden=!0,t.anchors.push(e)}function Xt(t){var e=3*t.rect.width/5,r=3*t.rect.height/4;t.iconRect=new x(t.rect.x+t.rect.width/5+t.paddingLeftNum,t.rect.y+t.paddingTopNum,e-t.paddingLeftNum-t.paddingRightNum,r-t.paddingTopNum-t.paddingBottomNum),t.fullIconRect=new x(t.rect.x+t.rect.width/5+t.paddingLeftNum,t.rect.y+t.paddingTopNum,e-t.paddingLeftNum-t.paddingRightNum,t.rect.height-t.paddingTopNum-t.paddingBottomNum)}function $t(t){var e=3*t.rect.width/5,r=t.rect.height/4;t.textRect=new x(t.rect.x+t.rect.width/5+t.paddingLeftNum,t.rect.y+t.rect.height-r+t.paddingTopNum,e-t.paddingLeftNum-t.paddingRightNum,r),t.fullTextRect=new x(t.rect.x+t.rect.width/5+t.paddingLeftNum,t.rect.y+t.paddingTopNum,e-t.paddingLeftNum-t.paddingRightNum,t.rect.height-t.paddingTopNum-t.paddingBottomNum)}function Gt(t,e){t.beginPath();for(var r=0;r<5;++r)t.lineTo(Math.cos((18+72*r)/180*Math.PI)*e.rect.width/2+e.rect.x+e.rect.width/2,-Math.sin((18+72*r)/180*Math.PI)*e.rect.width/2+e.rect.y+e.rect.height/2),t.lineTo(Math.cos((54+72*r)/180*Math.PI)*e.rect.width/4+e.rect.x+e.rect.width/2,-Math.sin((54+72*r)/180*Math.PI)*e.rect.width/4+e.rect.y+e.rect.height/2);t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function Jt(t){t.anchors.push(new u(Math.cos(.1*Math.PI)*t.rect.width/2+t.rect.x+t.rect.width/2,-Math.sin(.1*Math.PI)*t.rect.width/2+t.rect.y+t.rect.height/2,_.Right)),t.anchors.push(new u(Math.cos(.5*Math.PI)*t.rect.width/2+t.rect.x+t.rect.width/2,-Math.sin(.5*Math.PI)*t.rect.width/2+t.rect.y+t.rect.height/2,_.Up)),t.anchors.push(new u(Math.cos(.9*Math.PI)*t.rect.width/2+t.rect.x+t.rect.width/2,-Math.sin(.9*Math.PI)*t.rect.width/2+t.rect.y+t.rect.height/2,_.Left)),t.anchors.push(new u(Math.cos(1.3*Math.PI)*t.rect.width/2+t.rect.x+t.rect.width/2,-Math.sin(1.3*Math.PI)*t.rect.width/2+t.rect.y+t.rect.height/2,_.Bottom)),t.anchors.push(new u(Math.cos(1.7*Math.PI)*t.rect.width/2+t.rect.x+t.rect.width/2,-Math.sin(1.7*Math.PI)*t.rect.width/2+t.rect.y+t.rect.height/2,_.Bottom))}function Qt(t){t.iconRect=new x(0,0,0,0)}function Zt(t){var e=2*t.rect.width/5,r=2*t.rect.height/5;t.fullTextRect=new x(t.rect.x+(t.rect.width-e)/2,t.rect.y+(t.rect.height-r)/2,e,r),t.textRect=t.fullTextRect}function te(t,e){t.beginPath(),t.moveTo(e.rect.x+e.rect.width/5,e.rect.y+13*e.rect.height/16),t.bezierCurveTo(e.rect.x-e.rect.width/15,e.rect.y+13*e.rect.height/16,e.rect.x-e.rect.width/15,e.rect.y+7*e.rect.height/16,e.rect.x+e.rect.width/5,e.rect.y+7*e.rect.height/16),t.bezierCurveTo(e.rect.x+e.rect.width/5,e.rect.y,e.rect.x+4*e.rect.width/5,e.rect.y,e.rect.x+4*e.rect.width/5,e.rect.y+7*e.rect.height/16),t.bezierCurveTo(e.rect.x+16*e.rect.width/15,e.rect.y+7*e.rect.height/16,e.rect.x+16*e.rect.width/15,e.rect.y+13*e.rect.height/16,e.rect.x+4*e.rect.width/5,e.rect.y+13*e.rect.height/16),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function ee(t){t.anchors.push(new u(t.rect.x,t.rect.y+3*t.rect.height/5,_.Left)),t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y+t.rect.height/9,_.Up)),t.anchors.push(new u(t.rect.x+t.rect.width,t.rect.y+3*t.rect.height/5,_.Right)),t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y+4*t.rect.height/5,_.Bottom))}function re(t){t.iconRect=new x(0,0,0,0)}function ne(t){t.textRect=new x(t.rect.x+t.rect.width/4,t.rect.y+t.rect.height/4,t.rect.width/2,6*t.rect.height/11),t.fullTextRect=t.textRect}function ie(t,e){t.beginPath(),t.moveTo(e.rect.x,e.rect.y),t.lineTo(e.rect.x+e.rect.width,e.rect.y),t.lineTo(e.rect.x+e.rect.width,e.rect.y+3*e.rect.height/4),t.lineTo(e.rect.x+8*e.rect.width/16,e.rect.y+3*e.rect.height/4),t.lineTo(e.rect.x+e.rect.width/4,e.rect.ey),t.lineTo(e.rect.x+5*e.rect.width/16,e.rect.y+3*e.rect.height/4),t.lineTo(e.rect.x,e.rect.y+3*e.rect.height/4),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function oe(t){t.iconRect=new x(0,0,0,0),t.fullIconRect=t.iconRect}function se(t){t.textRect=new x(t.rect.x+t.paddingLeftNum,t.rect.y+t.paddingTopNum,t.rect.width-t.paddingLeftNum-t.paddingRightNum,3*t.rect.height/4-t.paddingTopNum-t.paddingBottomNum),t.fullTextRect=t.textRect}function ae(t){t.anchors.push(new u(t.rect.x,t.rect.y+3*t.rect.height/8,_.Left)),t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y,_.Up)),t.anchors.push(new u(t.rect.x+t.rect.width,t.rect.y+3*t.rect.height/8,_.Right)),t.anchors.push(new u(t.rect.x+t.rect.width/4,t.rect.ey,_.Bottom))}function ce(t,e){t.beginPath();var r=e.rect.width/6;t.moveTo(e.rect.x,e.rect.y),t.lineTo(e.rect.ex-r,e.rect.y),t.lineTo(e.rect.ex,e.rect.y+r),t.lineTo(e.rect.ex,e.rect.ey),t.lineTo(e.rect.x,e.rect.ey),t.closePath(),t.moveTo(e.rect.ex-r,e.rect.y),t.lineTo(e.rect.ex-r,e.rect.y+r),t.lineTo(e.rect.ex,e.rect.y+r),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function he(t){var e=0,r=0;t.text&&(t.paddingRightNum?e=t.paddingRightNum:r=t.paddingBottomNum||t.lineHeight*t.fontSize*(t.textMaxLine||1)),t.iconRect=new x(t.rect.x,t.rect.y,t.rect.width-e,t.rect.height-r),t.fullIconRect=t.rect}function le(t){var e;t.paddingRightNum?(e=t.paddingRightNum-5,t.textRect=new x(t.rect.x+t.rect.width-e,t.rect.y,e,t.rect.height-2*t.textOffsetY)):(e=t.paddingBottomNum||t.lineHeight*t.fontSize*(t.textMaxLine||1),t.textRect=new x(t.rect.x,t.rect.y+t.rect.height-e,t.rect.width-2*t.textOffsetX,e)),t.fullTextRect=t.rect}function ue(t){var e=0,r=0;t.text&&(t.paddingRightNum?e=t.paddingRightNum:r=t.paddingBottomNum||t.lineHeight*t.fontSize*(t.textMaxLine||1)),t.anchors.push(new u(t.rect.x,t.rect.y+(t.rect.height-r)/2,_.Left)),t.anchors.push(new u(t.rect.x+(t.rect.width-e)/2,t.rect.y,_.Up)),t.anchors.push(new u(t.rect.x+t.rect.width-e,t.rect.y+(t.rect.height-r)/2,_.Right)),t.anchors.push(new u(t.rect.x+(t.rect.width-e)/2,t.rect.y+t.rect.height-r,_.Bottom))}var fe=(de.prototype.render=function(t){t.save(),t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.beginPath();for(var e=0;e<this.points.length;++e)e?t.lineTo(this.points[e].x,this.points[e].y):t.moveTo(this.points[e].x,this.points[e].y);t.closePath(),this.fillStyle&&t.fill(),t.stroke(),t.restore()},de);function de(t,e,r,n,i,o){void 0===i&&(i=""),void 0===o&&(o=""),this.points=[],this.fillStyle="",this.strokeStyle="",this.points.push(t),this.points.push(e),this.points.push(r),this.points.push(n),this.fillStyle=i,this.strokeStyle=o||i}var pe=(ye.prototype.render=function(t){for(var e=0,r=this.surfaces;e<r.length;e++)r[e].render(t)},ye);function ye(t,e,r,n,i){void 0===n&&(n="#ddd"),void 0===i&&(i="#ccc"),this.surfaces=[];var o=e*Math.sin(45*Math.PI/180),s=new u(t.x,t.y+o),a=new u(t.ex-o,t.y+o),c=new u(t.ex-o,t.ey),e=new u(t.x,t.ey);this.surfaces.push(new fe(s,a,c,e,n,i)),this.surfaces.push(new fe(s,new u(t.x+o,t.y),new u(t.ex,t.y),a,vt(.5,n),i)),this.surfaces.push(new fe(a,new u(t.ex,t.y),new u(t.ex,t.ey-o),c,vt(.6,n),i))}function ge(t,e){new pe(e.rect,e.z,e.zRotate,e.fillStyle,e.strokeStyle).render(t)}function me(t){var e=t.z*Math.sin(45*Math.PI/180);t.anchors.push(new u(t.rect.x,t.rect.ey-(t.rect.height-e)/2,_.Left)),t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y+e/2,_.Up)),t.anchors.push(new u(t.rect.ex-e/2,t.rect.y+t.rect.height/2,_.Right)),t.anchors.push(new u(t.rect.x+(t.rect.width-e)/2,t.rect.y+t.rect.height,_.Bottom))}function ve(t){t.fullIconRect=t.fullTextRect,t.iconRect=new x(t.fullIconRect.x,t.fullIconRect.y,t.fullIconRect.width,2*t.fullIconRect.height/3)}function we(t){var e=t.z*Math.sin(45*Math.PI/180);t.fullTextRect=new x(t.rect.x,t.rect.y+e,t.rect.width-e,t.rect.height-e),t.textRect=new x(t.fullTextRect.x+10,t.fullTextRect.y+2*t.fullTextRect.height/3,t.fullTextRect.width-20,t.fullTextRect.height/3-5)}function be(t,e){t.beginPath();var r=e.rect.width/4,n=e.rect.x+e.rect.width/2;t.arc(n,e.rect.y+r,r,0,2*Math.PI),t.moveTo(e.rect.x,e.rect.y+3*r),t.lineTo(e.rect.ex,e.rect.y+3*r),t.moveTo(n,e.rect.y+2*r),t.lineTo(n,e.rect.y+4*r),t.moveTo(n,e.rect.y+4*r),t.lineTo(e.rect.x,e.rect.ey),t.moveTo(n,e.rect.y+4*r),t.lineTo(e.rect.ex,e.rect.ey),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function xe(t){t.iconRect=new x(0,0,0,0)}function Se(t){t.textRect=new x(0,0,0,0),t.fullTextRect=t.textRect}function _e(t){t.iconRect=new x(t.rect.x+t.paddingLeftNum,t.rect.y+t.paddingTopNum,t.rect.height-t.paddingTopNum-t.paddingBottomNum,t.rect.height-t.paddingTopNum-t.paddingBottomNum),t.fullIconRect=new x(t.rect.x+t.paddingLeftNum,t.rect.y+t.paddingTopNum,t.rect.width-t.paddingLeftNum-t.paddingRightNum,t.rect.height-t.paddingTopNum-t.paddingBottomNum)}function ke(t){var e=t.rect.height-t.paddingTopNum-t.paddingBottomNum;t.textRect=new x(t.rect.x+t.paddingLeftNum+e,t.rect.y+t.paddingTopNum,t.rect.width-t.paddingLeftNum-t.paddingRightNum-e,e),t.fullTextRect=new x(t.rect.x+t.paddingLeftNum,t.rect.y+t.paddingTopNum,t.rect.width-t.paddingLeftNum-t.paddingRightNum,e)}function Te(e,t){t.points&&t.points[0]&&(e.beginPath(),e.moveTo(t.points[0].x,t.points[0].y),t.points.forEach(function(t){e.lineTo(t.x,t.y)}),t.closePath&&!t.doing&&e.closePath(),(t.fillStyle||t.bkType)&&e.fill(),e.stroke())}function Ie(t){var e,r;t.points&&t.points.length&&(e=t.points[0],r=t.points[t.points.length-1],e.x<r.x?(t.anchors.push(new u(e.x,e.y,_.Left)),t.anchors.push(new u(r.x,r.y,_.Right))):(t.anchors.push(new u(e.x,e.y,_.Right)),t.anchors.push(new u(r.x,r.y,_.Left))))}function Le(t){for(var e=function(t){var e=t.borderRadius,r=t.borderRadius;t.borderRadius<1&&(e=t.rect.width*t.borderRadius,r=t.rect.height*t.borderRadius);r=e<r?e:r;t.rect.width<2*r&&(r=t.rect.width/2);t.rect.height<2*r&&(r=t.rect.height/2);return r}(t),r=0;r<5;r++)2!==r&&(i=t.rect.x+t.rect.width*(r+1)/6,n=t.rect.y,i<t.rect.x+e?n=Re(t.rect.x+e,n+e,i,e,-1):i>t.rect.x+t.rect.width-e&&(n=Re(t.rect.x+t.rect.width-e,n+e,i,e,-1)),t.anchors.push(new u(i,n,_.Up)));for(r=0;r<3;r++){var n=t.rect.y+t.rect.height*(r+1)/4,i=t.rect.x+t.rect.width;n<t.rect.y+e?i=Ae(i-e,t.rect.y+e,n,e):n>t.rect.y+t.rect.height-e&&(i=Ae(i-e,t.rect.y+t.rect.height-e,n,e)),t.anchors.push(new u(i,n,_.Right))}for(r=0;r<5;r++)2!==r&&(i=t.rect.x+t.rect.width*(r+1)/6,n=t.rect.y+t.rect.height,i<t.rect.x+e?n=Re(t.rect.x+e,n-e,i,e):i>t.rect.x+t.rect.width-e&&(n=Re(t.rect.x+t.rect.width-e,n-e,i,e)),t.anchors.push(new u(i,n,_.Bottom)));for(r=0;r<3;r++){n=t.rect.y+t.rect.height*(r+1)/4,i=t.rect.x;n<t.rect.y+e?i=Ae(i+e,t.rect.y+e,n,e,-1):n>t.rect.y+t.rect.height-e&&(i=Ae(i+e,t.rect.y+t.rect.height-e,n,e,-1)),t.anchors.push(new u(i,n,_.Left))}}function Ae(t,e,r,n,i){return(i=void 0===i?1:i)*Math.sqrt(Math.pow(n,2)-Math.pow(r-e,2))+t}function Re(t,e,r,n,i){return(i=void 0===i?1:i)*Math.sqrt(Math.pow(n,2)-Math.pow(r-t,2))+e}function Pe(t,e){t.beginPath(),t.moveTo(e.rect.x,e.rect.y+e.rect.height),t.lineTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height),t.closePath(),t.stroke()}function Ee(t){t.anchors.push(new u(t.rect.x,t.rect.y+t.rect.height,4)),t.anchors.push(new u(t.rect.x+t.rect.width,t.rect.y+t.rect.height,2))}function Ce(t,e){if(e.points&&e.points[1]){t.beginPath(),t.moveTo(e.points[0].x,e.points[0].y);for(var r=1;r<e.points.length;)if(e.points[r].data){if(!e.points[r+2])break;t.bezierCurveTo(e.points[r].x,e.points[r].y,e.points[r+1].x,e.points[r+1].y,e.points[r+2].x,e.points[r+2].y),r+=2}else t.lineTo(e.points[r].x,e.points[r].y),++r;e.closePath&&!e.doing&&t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}}var Oe={},Ne={},Me={},Be={},De={},Ue={};function je(t,e,r,n,i,o){return(!Oe[t]||!o)&&(Oe[t]=e,Be[t]=r,Ne[t]=n,Me[t]=i,!0)}Oe.combine=R,Oe.div=R,Oe.graffiti=Te,Be.graffiti=Ie,Oe.lines=Ce,Oe.square=R,Oe.rectangle=R,Ne.rectangle=_e,Me.rectangle=ke,Oe.circle=P,Ne.circle=H,Me.circle=V,Be.circle=Ut,Oe.triangle=E,Be.triangle=K,Ne.triangle=Y,Me.triangle=X,Oe.diamond=C,Ne.diamond=$,Me.diamond=G,Oe.hexagon=Vt,Ne.hexagon=Xt,Me.hexagon=$t,Be.hexagon=Yt,Oe.pentagon=Kt,Ne.pentagon=qt,Me.pentagon=zt,Be.pentagon=Ht,Oe.pentagram=Gt,Ne.pentagram=Qt,Me.pentagram=Zt,Be.pentagram=Jt,Oe.leftArrow=O,Be.leftArrow=q,Ne.leftArrow=J,Me.leftArrow=Q,Oe.rightArrow=N,Be.rightArrow=q,Ne.rightArrow=Z,Me.rightArrow=tt,Oe.twowayArrow=M,Be.twowayArrow=q,Ne.twowayArrow=et,Me.twowayArrow=rt,Oe.cloud=te,Be.cloud=ee,Ne.cloud=re,Me.cloud=ne,Oe.message=ie,Be.message=ae,Ne.message=oe,Me.message=se,Oe.file=ce,Oe.text=j,Ne.text=nt,Oe.line=W,Be.line=z,Ne.line=nt,Me.line=it,Oe.image=function(t,e){},Ne.image=he,Me.image=le,Be.image=ue,Oe.cube=ge,Be.cube=me,Ne.cube=ve,Me.cube=we,Oe.people=be,Ne.people=xe,Me.people=Se,Oe.mindNode=R,Be.mindNode=Le,Ne.mindNode=_e,Me.mindNode=ke,Oe.mindLine=Pe,Be.mindLine=Ee,De.line={drawFn:ot,drawControlPointsFn:st,controlPointsFn:at,pointIn:ft},De.polyline={drawFn:ht,drawControlPointsFn:lt,controlPointsFn:ut,dockControlPointFn:dt,pointIn:ft},De.curve={drawFn:_t,drawControlPointsFn:kt,controlPointsFn:Tt,pointIn:It},De.mind={drawFn:_t,drawControlPointsFn:kt,controlPointsFn:Et,pointIn:It},Ue.triangleSolid=Ct,Ue.triangle=Ot,Ue.diamondSolid=Nt,Ue.diamond=Mt,Ue.circleSolid=Bt,Ue.circle=Dt,Ue.line=jt,Ue.lineUp=Ft,Ue.lineDown=Wt,window.registerTopologyNode=je,window.registerTopologyLine=function(t,e,r,n,i,o,s,a,c,h){return void 0===h&&(h=!0),!(De[t]&&!h)&&(De[t]={drawFn:e,drawControlPointsFn:r,controlPointsFn:n,dockControlPointFn:i,pointIn:o,getLength:s,getCenter:a,getPointByPos:c},!0)};var Fe,We,Ke=((Fe=function(t,e){return(Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Fe(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)})(qe,We=L),qe.prototype.setFrom=function(t,e){void 0===e&&(e=""),this.from=t,this.fromArrow=e,this.textRect=void 0},qe.prototype.setTo=function(t,e){void 0===e&&(e="triangleSolid"),this.to=t,this.toArrow=e,this.textRect=void 0},qe.prototype.calcControlPoints=function(t){"line"!==this.name&&this.manualCps&&!t||(this.textRect=void 0,this.from&&this.to&&De[this.name]&&De[this.name].controlPointsFn(this))},qe.prototype.draw=function(t){if(this.animateDot){if(t.fillStyle=t.strokeStyle,"dot"===this.animateType)return t.beginPath(),t.arc(this.animateDot.x,this.animateDot.y,this.animateDotSize,0,2*Math.PI,!1),void t.fill();if("comet"===this.animateType){var e=this.getBubbles();t.save();for(var r=0,n=e;r<n.length;r++){var i=n[r];t.globalAlpha=i.a,t.beginPath(),t.arc(i.pos.x,i.pos.y,i.r,0,2*Math.PI,!1),t.fill()}t.restore()}}!this.isAnimate&&0<this.borderWidth&&this.borderColor&&(t.save(),this.lineJoin&&(t.lineJoin=this.lineJoin),t.lineWidth=this.lineWidth+this.borderWidth,t.strokeStyle=this.borderColor,De[this.name]&&De[this.name].drawFn(t,this),t.restore()),this.isAnimate&&"comet"===this.animateType||!De[this.name]||(this.lineJoin&&(t.lineJoin=this.lineJoin),De[this.name].drawFn(t,this));var o,e=d.Store.get(this.generateStoreKey("LT:scale"))||1;this.fromArrow&&Ue[this.fromArrow]&&(t.save(),t.beginPath(),t.lineDashOffset=0,t.setLineDash([]),t.fillStyle=this.fromArrowColor||t.strokeStyle,t.strokeStyle=t.fillStyle,o=this.to,"curve"===this.name?o=Lt(.95-this.lineWidth/100,this.to,this.controlPoints[1],this.controlPoints[0],this.from):"line"!==this.name&&this.controlPoints.length&&(o=this.controlPoints[0]),Ue[this.fromArrow](t,o,this.from,this.fromArrowSize*e),t.restore()),this.toArrow&&Ue[this.toArrow]&&(t.save(),t.beginPath(),t.lineDashOffset=0,t.setLineDash([]),t.fillStyle=this.toArrowColor||t.strokeStyle,t.strokeStyle=t.fillStyle,o=this.from,"curve"===this.name?o=Lt(.95-this.lineWidth/100,this.from,this.controlPoints[0],this.controlPoints[1],this.to):"mind"===this.name?o=Lt(.96-this.lineWidth/100,this.from,this.controlPoints[0],this.controlPoints[1],this.to):"line"!==this.name&&this.controlPoints.length&&(o=this.controlPoints[this.controlPoints.length-1]),Ue[this.toArrow](t,o,this.to,this.toArrowSize*e),t.restore()),this.text&&!this.isAnimate&&(this.textRect||this.calcTextRect(),j(t,this))},qe.prototype.pointIn=function(t){return De[this.name].pointIn(t,this)},qe.prototype.getLen=function(){switch(this.name){case"line":return m(this.from,this.to);case"polyline":if(!this.controlPoints||!this.controlPoints.length)return m(this.from,this.to);for(var t=0,e=this.from,r=0,n=this.controlPoints;r<n.length;r++){var i=n[r];t+=m(e,i),e=i}return 0|(t+=m(e,this.to));case"curve":case"mind":return v(this.from,this.controlPoints[0],this.controlPoints[1],this.to);default:if(De[this.name].getLength)return De[this.name].getLength(this)}return 0},qe.prototype.calcTextRect=function(){var t=this.getCenter(),e=Math.abs(this.from.x-this.to.x);e<100&&(e=100);var r=this.lineHeight*this.fontSize*(this.textMaxLine||this.text&&this.text.split("\n").length||1);this.textRect=new x(t.x-e/2,t.y-r/2,e,r)},qe.prototype.getTextRect=function(){return this.calcTextRect(),this.textRect},qe.prototype.getCenter=function(){var t=new u(this.from.x,this.from.y);switch(this.name){case"line":t=this.getLineCenter(this.from,this.to);break;case"polyline":var e=Math.round(this.controlPoints.length/2),t=this.getLineCenter(this.controlPoints[e-1]||this.from,this.controlPoints[e]||this.to);break;case"curve":t=Lt(.5,this.to,this.controlPoints[1],this.controlPoints[0],this.from);break;default:De[this.name].getCenter&&(t=De[this.name].getCenter(this))}return t},qe.prototype.getLineCenter=function(t,e){return new u((t.x+e.x)/2,(t.y+e.y)/2)},qe.prototype.getPointByPos=function(t){if(t<=0)return this.from;switch(this.name){case"line":return this.getLinePtByPos(this.from,this.to,t);case"polyline":if(this.controlPoints&&this.controlPoints.length){for(var e=[].concat(this.controlPoints,this.to),r=this.from,n=0,i=e;n<i.length;n++){var o=i[n],s=m(r,o);if(!(s<t))return this.getLinePtByPos(r,o,t);t-=s,r=o}return this.to}return this.getLinePtByPos(this.from,this.to,t);case"curve":return Lt(t/this.getLen(),this.from,this.controlPoints[0],this.controlPoints[1],this.to);default:if(De[this.name].getPointByPos)return De[this.name].getPointByPos(t,this)}return null},qe.prototype.getPointByReversePos=function(t){if(t<=0)return this.to;switch(this.name){case"line":return this.getLinePtByPos(this.to,this.from,t);case"polyline":if(this.controlPoints&&this.controlPoints.length){var e=[];this.controlPoints.forEach(function(t){e.unshift(t)}),e.unshift(this.to);for(var r=this.to,n=0,i=e;n<i.length;n++){var o=i[n],s=m(r,o);if(!(s<t))return this.getLinePtByPos(r,o,t);t-=s,r=o}return this.from}return this.getLinePtByPos(this.to,this.from,t);case"curve":return Lt(t/this.getLen(),this.to,this.controlPoints[1],this.controlPoints[0],this.from);default:if(De[this.name].getPointByReversePos)return De[this.name].getPointByReversePos(t,this)}return null},qe.prototype.getLinePtByPos=function(t,e,r){var n,i=m(t,e);return r<=0?t:i<=r?e:(n=t.x+(e.x-t.x)*(r/i),i=t.y+(e.y-t.y)*(r/i),new u(n,i))},qe.prototype.calcRectInParent=function(t){var e=t.rect.width-t.paddingLeftNum-t.paddingRightNum,r=t.rect.height-t.paddingTopNum-t.paddingBottomNum;this.rectInParent={x:100*(this.from.x-t.rect.x-t.paddingLeftNum)/e+"%",y:100*(this.from.y-t.rect.y-t.paddingTopNum)/r+"%",width:0,height:0,rotate:0}},qe.prototype.calcRectByParent=function(t){var e,r,n;this.rectInParent&&(e=t.rect.width-t.paddingLeftNum-t.paddingRightNum,n=t.rect.height-t.paddingTopNum-t.paddingBottomNum,r=t.rect.x+t.paddingLeftNum+bt(e,this.rectInParent.x)+bt(e,this.rectInParent.marginLeft),n=t.rect.y+t.paddingTopNum+bt(n,this.rectInParent.y)+bt(e,this.rectInParent.marginTop),void 0===this.rectInParent.marginLeft&&this.rectInParent.marginRight&&(r-=bt(e,this.rectInParent.marginRight)),void 0===this.rectInParent.marginTop&&this.rectInParent.marginBottom&&(n-=bt(e,this.rectInParent.marginBottom)),this.translate(r-this.from.x,n-this.from.y))},qe.prototype.initAnimate=function(){this.animateStart=0,this.animateDot=void 0,this.animatePos=0},qe.prototype.pauseAnimate=function(){d.Store.set(this.generateStoreKey("LT:AnimatePlay"),{pen:this,stop:!0})},qe.prototype.stopAnimate=function(){var t=this;this.pauseAnimate(),this.initAnimate(),setTimeout(function(){d.Store.set(t.generateStoreKey("LT:render"),{pen:t,stop:!0})},50)},qe.prototype.animate=function(t){switch(this.animatePos+=this.animateSpan,this.animateType){case"beads":this.animateReverse?this.lineDashOffset=this.animatePos:this.lineDashOffset=-this.animatePos;var e=this.lineWidth;e<5&&(e=5),this.animateLineDash?this.lineDash=this.animateLineDash:this.lineDash=[e,2*e];break;case"dot":case"comet":e=this.lineDash=void 0,e=this.animateReverse?this.getPointByReversePos(this.animatePos+this.animateToSize):this.getPointByPos(this.animatePos+this.animateFromSize);this.animateDot=e;break;default:this.animateReverse?this.lineDash=[0,this.length-this.animatePos+1,this.animatePos]:this.lineDash=[this.animatePos,this.length-this.animatePos+1]}if(this.animatePos>this.length+this.animateSpan-this.animateFromSize-this.animateToSize){if(++this.animateCycleIndex>=this.animateCycle&&0<this.animateCycle)return this.animateStart=0,this.initAnimate(),void d.Store.set(this.generateStoreKey("animateEnd"),this);this.animatePos=this.animateSpan}},qe.prototype.getBubbles=function(){for(var t=[],e=0;e<30&&0<this.animatePos-e;++e)this.animateReverse?t.push({pos:this.getPointByReversePos(this.animatePos-2*e+this.animateToSize),a:1-.03*e,r:this.lineWidth-.01*e}):t.push({pos:this.getPointByPos(this.animatePos-2*e+this.animateFromSize),a:1-.03*e,r:this.lineWidth-.01*e});return t},qe.prototype.round=function(){this.from.round(),this.to.round()},qe.prototype.translate=function(t,e){if(this.from){this.from.x+=t,this.from.y+=e,this.to.x+=t,this.to.y+=e,this.text&&(this.textRect=void 0);for(var r=0,n=this.controlPoints;r<n.length;r++){var i=n[r];i.x+=t,i.y+=e}}if(this.children)for(var o=0,s=this.children;o<s.length;o++)s[o].translate(t,e);d.Store.set(this.generateStoreKey("pts-")+this.id,void 0)},qe.prototype.scale=function(t,e){if(this.from){this.from.x=e.x-(e.x-this.from.x)*t,this.from.y=e.y-(e.y-this.from.y)*t,this.to.x=e.x-(e.x-this.to.x)*t,this.to.y=e.y-(e.y-this.to.y)*t,this.lineWidth*=t,this.borderWidth*=t,this.fontSize*=t,this.text&&(this.textRect=void 0),this.textOffsetX*=t,this.textOffsetY*=t;for(var r=0,n=this.controlPoints;r<n.length;r++){var i=n[r];i.x=e.x-(e.x-i.x)*t,i.y=e.y-(e.y-i.y)*t}}if(this.children)for(var o=0,s=this.children;o<s.length;o++)s[o].scale(t,e);d.Store.set(this.generateStoreKey("pts-")+this.id,void 0)},qe.prototype.hit=function(t,e){if(this.from.hit(t,e=void 0===e?0:e)||this.to.hit(t,e))return this},qe.prototype.clone=function(){return new qe(this)},qe);function qe(t){var e=We.call(this)||this;if(e.fromData({name:"curve",fromArrow:"",toArrow:"",controlPoints:[],fromArrowSize:5,toArrowSize:5,borderWidth:0,borderColor:"#000000",animateColor:"",animateSpan:1,animateFromSize:0,animateToSize:0,animateDotSize:3,textBackground:"#ffffff"},t),e.type=b.Line,t.from&&(e.from=new u(t.from.x,t.from.y,t.from.direction,t.from.anchorIndex,t.from.id,t.autoAnchor)),t.to&&(e.to=new u(t.to.x,t.to.y,t.to.direction,t.to.anchorIndex,t.to.id,t.autoAnchor)),"mind"===t.name&&(!t.controlPoints||2<t.controlPoints.length))t.controlPoints=void 0,e.calcControlPoints(!0);else if(t.controlPoints){e.controlPoints=[];for(var r=0,n=t.controlPoints;r<n.length;r++){var i=n[r];e.controlPoints.push(new u(i.x,i.y,i.direction,i.anchorIndex,i.id))}}return t.children&&(e.children=[],t.children.forEach(function(t){e.children.push(new qe(t))})),e}var ze,He,Ve,Ye,Xe=(ze=function(t,e){return(ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ze(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),$e=["TID","events","wheres","text","fontColor","fontFamily","fontSize","lineHeight","fontStyle","fontWeight","textAlign","textBaseline","textBackground","iconFamily","icon","iconSize","iconColor"],Ge=(Xe(Je,He=L),Je.cloneState=function(t){var e=new Je(t,!0);return $e.forEach(function(t){delete e[t]}),e},Je.prototype.restore=function(t){if(t=!t&&this.animateReady?Je.cloneState(this.animateReady):t){for(var e in this)void 0!==t[e]&&e.indexOf("animate")<0&&e.indexOf("Animate")<0&&($e.includes(e)||(this[e]=t[e],"rect"===e&&(this.rect=new x(this.rect.x,this.rect.y,this.rect.width,this.rect.height))));this.init(!0)}},Je.prototype.checkData=function(){this.rect.width=this.rect.width<0?0:this.rect.width,this.rect.height=this.rect.height<0?0:this.rect.height,this.rect.calcCenter||(this.rect=new x(this.rect.x,this.rect.y,this.rect.width,this.rect.height))},Je.prototype.init=function(t){var e,r;this.checkData(),this.calcAbsPadding(),Me[this.name]?Me[this.name](this):(r=(e=this).rect.height-e.paddingTopNum-e.paddingBottomNum,e.textRect=new x(e.rect.x+e.paddingLeftNum,e.rect.y+e.paddingTopNum+3*r/4,e.rect.width-e.paddingLeftNum-e.paddingRightNum,r/4),e.fullTextRect=new x(e.rect.x+e.paddingLeftNum,e.rect.y+e.paddingTopNum,e.rect.width-e.paddingLeftNum-e.paddingRightNum,r)),Ne[this.name]?Ne[this.name](this):((r=this).image&&r.imageWidth?r.iconRect=new x(r.rect.x+r.paddingLeftNum,r.rect.y+r.paddingTopNum,r.imageWidth,r.imageHeight):r.icon&&r.iconSize?r.iconRect=new x(r.rect.x+r.paddingLeftNum,r.rect.y+r.paddingTopNum,r.iconSize,r.iconSize):r.iconRect=new x(r.rect.x+r.paddingLeftNum,r.rect.y+r.paddingTopNum,r.rect.width-r.paddingLeftNum-r.paddingRightNum,3*r.rect.height/4-r.paddingTopNum-r.paddingBottomNum),r.fullIconRect=new x(r.rect.x+r.paddingLeftNum,r.rect.y+r.paddingTopNum,r.rect.width-r.paddingLeftNum-r.paddingRightNum,r.rect.height-r.paddingTopNum-r.paddingBottomNum)),this.calcAnchors(),this.elementRendered=!1,t||this.addToDiv()},Je.prototype.addToDiv=function(){(this.audio||this.video||this.iframe||this.elementId||this.gif)&&d.Store.set(this.generateStoreKey("LT:addDiv"),this)},Je.prototype.removeFromDiv=function(){d.Store.set(this.generateStoreKey("LT:removeDiv"),this)},Je.prototype.hasGif=function(){if(this.gif)return!0;if(this.children)for(var t=0,e=this.children;t<e.length;t++){var r=e[t];if(r.type===b.Node&&r.hasGif&&r.hasGif())return!0}return!1},Je.prototype.calcAbsPadding=function(){this.paddingLeftNum=bt(this.rect.width,this.paddingLeft),this.paddingRightNum=bt(this.rect.width,this.paddingRight),this.paddingTopNum=bt(this.rect.height,this.paddingTop),this.paddingBottomNum=bt(this.rect.height,this.paddingBottom)},Je.prototype.setChildrenIds=function(){if(this.children)for(var t=0,e=this.children;t<e.length;t++){var r=e[t];r.id=h(),r.type===b.Node&&r.setChildrenIds()}},Je.prototype.draw=function(t){if(Oe[this.name]){switch(this.bkType){case 1:this.drawBkLinearGradient(t);break;case 2:this.drawBkRadialGradient(t)}Oe[this.name](t,this),"text"!==this.name&&this.text&&j(t,this),this.image||this.img&&""===this.elementId?this.drawImg(t):this.icon&&(t.save(),t.shadowColor="",t.shadowBlur=0,F(t,this),t.restore())}},Je.prototype.drawBkLinearGradient=function(t){var e,r;this.gradientFromColor&&this.gradientToColor&&(e=new u(this.rect.x,this.rect.center.y),r=new u(this.rect.ex,this.rect.center.y),this.gradientAngle%90==0&&this.gradientAngle%180?this.gradientAngle%270?(e.x=this.rect.center.x,e.y=this.rect.y,r.x=this.rect.center.x,r.y=this.rect.ey):(e.x=this.rect.center.x,e.y=this.rect.ey,r.x=this.rect.center.x,r.y=this.rect.y):this.gradientAngle&&(e.rotate(this.gradientAngle,this.rect.center),r.rotate(this.gradientAngle,this.rect.center)),(r=t.createLinearGradient(e.x,e.y,r.x,r.y)).addColorStop(0,this.gradientFromColor),r.addColorStop(1,this.gradientToColor),t.fillStyle=r)},Je.prototype.drawBkRadialGradient=function(t){var e;this.gradientFromColor&&this.gradientToColor&&((e=this.rect.width)<this.rect.height&&(e=this.rect.height),(e=t.createRadialGradient(this.rect.center.x,this.rect.center.y,(e*=.5)*this.gradientRadius,this.rect.center.x,this.rect.center.y,e)).addColorStop(0,this.gradientFromColor),e.addColorStop(1,this.gradientToColor),t.fillStyle=e)},Je.prototype.drawImg=function(t){var e=this;this.lastImage!==this.image&&(this.img=void 0,this.lastImage&&0<this.lastImage.indexOf(".gif")&&d.Store.set(this.generateStoreKey("LT:addDiv"),this));var r,n=this.image&&0<this.image.indexOf(".gif");if(n){if(this.img)return void(this.TID&&!this.elementLoaded&&(this.elementLoaded=!0,d.Store.set(this.generateStoreKey("LT:addDiv"),this)))}else{if(this.img){t.save(),t.shadowColor="",t.shadowBlur=0;var i=this.getIconRect(),o=i.x,s=i.y,a=i.width,c=i.height;switch(this.imageWidth&&(a=this.imageWidth),this.imageHeight&&(c=this.imageHeight),this.imgNaturalWidth&&this.imgNaturalHeight&&this.imageRatio&&(this.imageWidth?c=this.imgNaturalHeight/this.imgNaturalWidth*a:a=this.imgNaturalWidth/this.imgNaturalHeight*c),o+=(i.width-a)/2,s+=(i.height-c)/2,this.imageAlign){case"top":s=i.y;break;case"bottom":s=i.ey-c;break;case"left":o=i.x;break;case"right":o=i.ex-a;break;case"left-top":o=i.x,s=i.y;break;case"right-top":o=i.ex-a,s=i.y;break;case"left-bottom":o=i.x,s=i.ey-c;break;case"right-bottom":o=i.ex-a,s=i.ey-c}return this.iconRotate&&(t.translate(i.center.x,i.center.y),t.rotate(this.iconRotate*Math.PI/180),t.translate(-i.center.x,-i.center.y)),t.drawImage(this.img,o,s,a,c),void t.restore()}if(I[this.image])return this.img=I[this.image].img,this.lastImage=this.image,this.imgNaturalWidth=this.img.naturalWidth,this.imgNaturalHeight=this.img.naturalHeight,void this.drawImg(t)}this.image&&((r=new Image).crossOrigin="anonymous",r.src=this.image,r.onload=function(){e.lastImage=e.image,e.imgNaturalWidth=r.naturalWidth,e.imgNaturalHeight=r.naturalHeight,e.img=r,I[e.image]={img:r},d.Store.set(e.generateStoreKey("LT:imageLoaded"),!0),!e.gif&&n&&(e.gif=!0,e.TID&&(e.elementLoaded=!0,d.Store.set(e.generateStoreKey("LT:addDiv"),e)))})},Je.prototype.calcAnchors=function(){var t,r=this;this.anchors=[],Be[this.name]?Be[this.name](this):((t=this).anchors.push(new u(t.rect.x,t.rect.y+t.rect.height/2,_.Left)),t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y,_.Up)),t.anchors.push(new u(t.rect.x+t.rect.width,t.rect.y+t.rect.height/2,_.Right)),t.anchors.push(new u(t.rect.x+t.rect.width/2,t.rect.y+t.rect.height,_.Bottom))),this.manualAnchors&&this.manualAnchors.forEach(function(t){var e=Math.abs(t.x-r.rect.center.x);Math.abs(t.y-r.rect.center.y)<e?t.x<r.rect.center.x?t.direction=_.Left:t.direction=_.Right:t.y<r.rect.center.y?t.direction=_.Up:t.direction=_.Bottom,r.anchors.push(t)}),this.calcRotateAnchors()},Je.prototype.calcRotateAnchors=function(t){void 0===t&&(t=this.rotate),this.rotatedAnchors=[];for(var e=0,r=this.anchors;e<r.length;e++){var n=r[e];this.rotatedAnchors.push(n.clone().rotate(t,this.rect.center))}},Je.prototype.getTextRect=function(){var t=this.textRect;return t=!this.icon&&!this.image?this.fullTextRect:t},Je.prototype.getIconRect=function(){var t=this.iconRect;return t=!this.text?this.fullIconRect||this.fullTextRect||this.rect:t},Je.prototype.calcRectByParent=function(t){var e,r,n,i,o;this.rectInParent&&(e=t.rect.width-t.paddingLeftNum-t.paddingRightNum,o=t.rect.height-t.paddingTopNum-t.paddingBottomNum,r=t.rect.x+t.paddingLeftNum+bt(e,this.rectInParent.x)+bt(e,this.rectInParent.marginLeft),n=t.rect.y+t.paddingTopNum+bt(o,this.rectInParent.y)+bt(e,this.rectInParent.marginTop),i=bt(e,this.rectInParent.width),o=bt(o,this.rectInParent.height),void 0===this.rectInParent.marginLeft&&this.rectInParent.marginRight&&(r-=bt(e,this.rectInParent.marginRight)),void 0===this.rectInParent.marginTop&&this.rectInParent.marginBottom&&(n-=bt(e,this.rectInParent.marginBottom)),this.rect=new x(r,n,i,o),this.rectInParent.rotate||(this.rectInParent.rotate=0),t=t.rotate+t.offsetRotate,this.rotate=this.rectInParent.rotate+t,this.rectInParent.rect||(this.rectInParent.rect=this.rect.clone()))},Je.prototype.calcChildrenRect=function(){if(this.children)for(var t=0,e=this.children;t<e.length;t++){var r=e[t];r.calcRectByParent(this),r.type===b.Node&&(r.init(),r.calcChildrenRect())}},Je.prototype.calcRectInParent=function(t){var e=t.rect.width-t.paddingLeftNum-t.paddingRightNum,r=t.rect.height-t.paddingTopNum-t.paddingBottomNum;this.rectInParent={x:100*(this.rect.x-t.rect.x-t.paddingLeftNum)/e+"%",y:100*(this.rect.y-t.rect.y-t.paddingTopNum)/r+"%",width:100*this.rect.width/e+"%",height:100*this.rect.height/r+"%",rotate:this.rectInParent?this.rectInParent.rotate||0:this.rotate||0,rect:this.rect.clone()}},Je.prototype.getDockWatchers=function(){this.dockWatchers=this.rect.toPoints(),this.dockWatchers.unshift(this.rect.center)},Je.prototype.initAnimate=function(){if(this.animateFrames){for(var t=0,e=0;e<this.animateFrames.length;++e)this.animateFrames[e].start=t,t+=this.animateFrames[e].duration,this.animateFrames[e].end=t,this.animateFrames[e].initState=Je.cloneState(e?this.animateFrames[e-1].state:this),this.animateFrames[e].offsetRect=new x(this.animateFrames[e].state.rect.x-this.animateFrames[e].initState.rect.x,this.animateFrames[e].state.rect.y-this.animateFrames[e].initState.rect.y,this.animateFrames[e].state.rect.width-this.animateFrames[e].initState.rect.width,this.animateFrames[e].state.rect.height-this.animateFrames[e].initState.rect.height);this.animateDuration=t,this.animateReady=Je.cloneState(this),this.animatePos=0,this.animateFrame=0}},Je.prototype.pauseAnimate=function(){this.animateFrame=this._animateFrame,this.animatePos=this._animatePos,d.Store.set(this.generateStoreKey("LT:AnimatePlay"),{pen:this,stop:!0})},Je.prototype.stopAnimate=function(){this.animateStart=0,d.Store.set(this.generateStoreKey("LT:AnimatePlay"),{pen:this,stop:!0}),this.restore(),this.initAnimate(),d.Store.set(this.generateStoreKey("LT:render"),{pen:this,stop:!0})},Je.prototype.animate=function(t){var r=this;if(!(this.animateStart<1)){var n=t-this.animateStart;if(0<this.animateFrame&&(this.animateFrames.forEach(function(t,e){r.animateFrame<e+1&&(n+=t.duration)}),n+=this.animatePos),n>this.animateDuration){if(this.animatePos=0,this.animateFrame=0,this.restore(),0<this.animateCycle&&++this.animateCycleIndex>=this.animateCycle)return this.animateStart=0,this.animateCycleIndex=0,d.Store.set(this.generateStoreKey("animateEnd"),this),void(this.animateAlone||d.Store.set(this.generateStoreKey("LT:rectChanged"),this));this.animateStart=t,n=0}for(var e=!1,i=0;i<this.animateFrames.length;++i){var o=this.animateFrames[i];if(n>=o.start&&n<o.end){o.state.dash&&(this.dash=o.state.dash),o.state.strokeStyle&&(this.strokeStyle=o.state.strokeStyle),o.state.fillStyle&&(this.fillStyle=o.state.fillStyle),o.state.text&&(this.text=o.state.text),o.state.fontColor&&(this.fontColor=o.state.fontColor),o.state.fontFamily&&(this.fontFamily=o.state.fontFamily),o.state.fontSize&&(this.fontSize=o.state.fontSize),o.state.lineHeight&&(this.lineHeight=o.state.lineHeight),o.state.fontStyle&&(this.fontStyle=o.state.fontStyle),o.state.fontWeight&&(this.fontWeight=o.state.fontWeight),o.state.textAlign&&(this.textAlign=o.state.textAlign),o.state.textBaseline&&(this.textBaseline=o.state.textBaseline),o.state.textBackground&&(this.textBackground=o.state.textBackground),o.state.iconFamily&&(this.iconFamily=o.state.iconFamily),o.state.icon&&(this.icon=o.state.icon),o.state.iconSize&&(this.iconSize=o.state.iconSize),o.state.iconColor&&(this.iconColor=o.state.iconColor),this.visible=o.state.visible,this._animateFrame=i+1,this._animateFrame>this.animateFrame&&(this.animateFrame=0,this.animatePos=0),this._animatePos=n-o.start;var s=this._animatePos/o.duration;if(o.linear){if(o.state.rect.x!==o.initState.rect.x&&(this.rect.x=o.initState.rect.x+o.offsetRect.x*s,e=!0),o.state.rect.y!==o.initState.rect.y&&(this.rect.y=o.initState.rect.y+o.offsetRect.y*s,e=!0),o.state.rect.width!==o.initState.rect.width&&(this.rect.width=o.initState.rect.width+o.offsetRect.width*s,e=!0),o.state.rect.height!==o.initState.rect.height&&(this.rect.height=o.initState.rect.height+o.offsetRect.height*s,e=!0),this.rect.ex=this.rect.x+this.rect.width,this.rect.ey=this.rect.y+this.rect.height,this.rect.calcCenter(),void 0!==o.initState.z&&o.state.z!==o.initState.z&&(this.z=o.initState.z+(o.state.z-o.initState.z)*s,e=!0),o.state.borderRadius!==o.initState.borderRadius&&(this.borderRadius=o.initState.borderRadius+(o.state.borderRadius-o.initState.borderRadius)*s),o.state.lineWidth!==o.initState.lineWidth&&(this.lineWidth=o.initState.lineWidth+(o.state.lineWidth-o.initState.lineWidth)*s),o.state.rotate!==o.initState.rotate&&(this.rotate=o.initState.rotate+(o.state.rotate-o.initState.rotate)*s,e=!0),o.state.globalAlpha!==o.initState.globalAlpha&&(this.globalAlpha=o.initState.globalAlpha+(o.state.globalAlpha-o.initState.globalAlpha)*s),o.state.lineDashOffset&&(this.lineDashOffset?this.lineDashOffset+=o.state.lineDashOffset:this.lineDashOffset=o.state.lineDashOffset),o.state.value!==o.initState.value&&(this.value=(o.initState.value||0)+((o.state.value||0)-(o.initState.value||0))*s),o.state.num!==o.initState.num&&(this.num=(o.initState.num||0)+((o.state.num||0)-(o.initState.num||0))*s),o.state.num1!==o.initState.num1&&(this.num1=(o.initState.num1||0)+((o.state.num1||0)-(o.initState.num1||0))*s),o.state.num2!==o.initState.num2&&(this.num2=(o.initState.num2||0)+((o.state.num2||0)-(o.initState.num2||0))*s),o.state.num3!==o.initState.num3&&(this.num3=(o.initState.num3||0)+((o.state.num3||0)-(o.initState.num3||0))*s),o.state.data)for(var a in o.state.data)"number"==typeof o.state.data[a]?this.data[a]=(o.initState.data[a]||0)+((o.state.data[a]||0)-(o.initState.data[a]||0))*s:void 0!==o.state.data[a]&&void 0!==o.state.data[a]&&(this.data[a]=o.state.data[a])}else this.rect=o.state.rect,this.lineWidth=o.state.lineWidth,this.rotate=o.state.rotate,this.globalAlpha=o.state.globalAlpha,this.lineDashOffset=o.state.lineDashOffset}}e&&(this.init(!0),this.animateAlone||d.Store.set(this.generateStoreKey("LT:rectChanged"),this))}},Je.prototype.scale=function(t,e){if(e=e||this.rect.center,this.oldRect=this.rect.clone(),this.rect.x=e.x-(e.x-this.rect.x)*t,this.rect.y=e.y-(e.y-this.rect.y)*t,this.textOffsetX*=t,this.textOffsetY*=t,this.z*=t,this.rect.width*=t,this.rect.height*=t,this.rect.ex=this.rect.x+this.rect.width,this.rect.ey=this.rect.y+this.rect.height,this.lineWidth*=t,this.imageWidth&&(this.imageWidth*=t),this.imageHeight&&(this.imageHeight*=t),this.lastImage=void 0,this.fontSize*=t,this.iconSize*=t,"number"==typeof this.paddingLeft&&(this.paddingLeft*=t),"number"==typeof this.paddingTop&&(this.paddingTop*=t),"number"==typeof this.paddingRight&&(this.paddingRight*=t),"number"==typeof this.paddingBottom&&(this.paddingBottom*=t),this.rectInParent&&("number"==typeof this.rectInParent.x&&(this.rectInParent.x*=t),"number"==typeof this.rectInParent.y&&(this.rectInParent.y*=t),"number"==typeof this.rectInParent.width&&(this.rectInParent.width*=t),"number"==typeof this.rectInParent.height&&(this.rectInParent.height*=t),"number"==typeof this.rectInParent.marginLeft&&(this.rectInParent.marginLeft*=t),"number"==typeof this.rectInParent.marginTop&&(this.rectInParent.marginTop*=t),"number"==typeof this.rectInParent.marginRight&&(this.rectInParent.marginRight*=t),"number"==typeof this.rectInParent.marginBottom&&(this.rectInParent.marginBottom*=t)),this.rect.calcCenter(),this.animateFrames&&this.animateFrames.length)for(var r=0,n=this.animateFrames;r<n.length;r++)(i=n[r]).initState&&(i.initState.scale||(i.initState=new Je(i.initState)),i.initState.scale(t,e)),i.state&&(i.state.scale||(i.state=new Je(i.state)),i.state.scale(t,e)),i.initState&&i.state&&(i.state.fontSize=i.initState.fontSize);if(this.scalePoints(t,t),this.elementRendered=!1,this.init(),this.children)for(var i,o=0,s=this.children;o<s.length;o++)(i=s[o]).scale(t,e);this.animateReady&&this.animateReady.scale&&this.animateReady.scale(t,e)},Je.prototype.scalePoints=function(e,r){var n=this;(this.points||this.manualAnchors)&&this.oldRect&&(e=e||this.rect.width/this.oldRect.width,r=r||this.rect.height/this.oldRect.height,this.points&&this.points.forEach(function(t){t.x=n.rect.x+(t.x-n.oldRect.x)*e,t.y=n.rect.y+(t.y-n.oldRect.y)*r}),this.manualAnchors&&this.manualAnchors.forEach(function(t){t.x=n.rect.x+(t.x-n.oldRect.x)*e,t.y=n.rect.y+(t.y-n.oldRect.y)*r}))},Je.prototype.translate=function(e,r){if(this.rect.x+=e,this.rect.y+=r,this.rect.ex=this.rect.x+this.rect.width,this.rect.ey=this.rect.y+this.rect.height,this.rect.calcCenter(),this.animateReady&&this.animateReady.translate(e,r),this.animateFrames&&this.animateFrames.length)for(var t=0,n=this.animateFrames;t<n.length;t++){var i=n[t],o=i.initState,i=i.state;o&&o.translate&&o.translate(e,r),i&&i.translate&&i.translate(e,r)}if(this.points&&this.points.forEach(function(t){t.x+=e,t.y+=r}),this.manualAnchors&&this.manualAnchors.forEach(function(t){t.x+=e,t.y+=r}),this.init(),this.children)for(var s=0,a=this.children;s<a.length;s++)a[s].translate(e,r)},Je.prototype.initRect=function(){if(this.rect.init(),this.children){this.calcChildrenRect();for(var t=0,e=this.children;t<e.length;t++){var r=e[t];r instanceof Je&&r.initRect()}}},Je.prototype.pushPoint=function(t){var e=this;this.points.push(t),this.rect||(this.rect=new x(0,0,0,0)),this.points.forEach(function(t){(!e.rect.x||e.rect.x>t.x)&&(e.rect.x=t.x),(!e.rect.y||e.rect.y>t.y)&&(e.rect.y=t.y),e.rect.ex<t.x&&(e.rect.ex=t.x),e.rect.ey<t.y&&(e.rect.ey=t.y)}),this.rect.width=this.rect.ex-this.rect.x,this.rect.height=this.rect.ey-this.rect.y},Je.prototype.nearestAnchor=function(t){for(var e=99999,r=0,n=0;n<this.rotatedAnchors.length;++n){var i=xt(t,this.rotatedAnchors[n]);i<e&&(e=i,r=n)}return{index:r,direction:this.rotatedAnchors[r].direction}},Je.prototype.hitInSelf=function(t,e){if(void 0===e&&(e=0),this.rotate%360==0)return this.rect.hit(t,e);for(var e=this.rect.toPoints(),r=0,n=e;r<n.length;r++)n[r].rotate(this.rotate,this.rect.center);return f(t,e)},Je.prototype.hit=function(t,e){var r;if(this.hitInSelf(t,e=void 0===e?0:e)&&(r=this),this.children)for(var n=this.children.length-1;-1<n;--n){var i=this.children[n].hit(t,e);if(i){r=i;break}}return r},Je.prototype.round=function(){if(this.rect.round(),this.children)for(var t=0,e=this.children;t<e.length;t++)e[t].rect.round()},Je.prototype.clone=function(){var t=new Je(this);return t.setTID(this.TID),t.elementRendered=!1,t.elementLoaded=!1,"div"!==this.name&&(t.elementId=""),this.setChildrenIds(),t},Je);function Je(e,r){var n=He.call(this)||this;n.imageRatio=!0,n.points=[],n.anchors=[],n.manualAnchors=[],n.rotatedAnchors=[],n.animateDuration=0,n.animateFrames=[],n.animateFrame=0;if(n.fromData({zRotate:0,borderRadius:0,imageAlign:"center",gradientAngle:0,gradientRadius:.01,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,animateFrame:0,children:[]},e),n.type=b.Node,r||(delete n.elementLoaded,delete n.elementRendered),delete n.animateReady,e.children&&e.children[0]&&e.children[0].parentRect&&(n.paddingLeft=e.children[0].parentRect.offsetX,n.paddingRight=0,n.paddingTop=e.children[0].parentRect.offsetY,n.paddingBottom=0),e.parentRect&&(n.rectInParent={x:100*e.parentRect.x+"%",y:100*e.parentRect.y+"%",width:100*e.parentRect.width+"%",height:100*e.parentRect.height+"%",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,rotate:e.parentRect.rotate},n.paddingTop=e.parentRect.marginY,n.paddingBottom=e.parentRect.marginY,n.paddingLeft=e.parentRect.marginX,n.paddingRight=e.parentRect.marginX),e.points&&(n.points=[],e.points.forEach(function(t){n.points.push(new u(t.x,t.y))})),e.manualAnchors&&(n.manualAnchors=[],e.manualAnchors.forEach(function(t){t=new u(t.x,t.y);t.id=e.id,n.manualAnchors.push(t)})),r&&(n.animateFrames=void 0),!r&&e.animateFrames&&e.animateFrames.length){for(var t=0,i=e.animateFrames;t<i.length;t++){var o=i[t];o.children=void 0,o.initState&&(o.initState=Je.cloneState(o.initState)),o.state=Je.cloneState(o.state)}n.animateFrames=e.animateFrames}return n.animateType=e.animateType||(e.animateDuration?"custom":""),n.init(r),e.init&&e.img&&!e.image&&(n.img=e.img),e.children&&(n.children=[],e.children.forEach(function(t){var e;t.TID=n.TID,t.type===b.Line?(e=new Ke(t)).calcRectByParent(n):((e=new Je(t)).parentId=n.id,e.calcRectByParent(n),e.init(r)),n.children.push(e)})),n}function Qe(t){var e=document.createElement("div");return e.style.position="absolute",e.style.outline="none",e.style.left="-9999px",e.style.bottom="-9999px",e.style.width=t.rect.width+"px",e.style.height=t.rect.height+"px",t.elementId&&(e.id=t.elementId),e}function Ze(t,e,r){var n=document.createElement("script");n.type="text/javascript",n.src=t,n.addEventListener("load",function(){e&&e(),r&&d.Store.set("LT:render",!0)}),document.body.appendChild(n)}function tr(t){for(var r=[],e=0,n=t;e<n.length;e++){var i=n[e];if(i instanceof Ge){var o=i.rect.toPoints();if(i.rotate)for(var s=0,a=o;s<a.length;s++)a[s].rotate(i.rotate,i.rect.center);r.push.apply(r,o)}else if(i instanceof Ke)if(i.children)i.children.forEach(function(t){if(r.push(t.from),r.push(t.to),Array.isArray(t.controlPoints)&&r.push.apply(r,t.controlPoints),"curve"===t.name)for(var e=.01;e<1;e+=.02)r.push(Lt(e,t.from,t.controlPoints[0],t.controlPoints[1],t.to))});else if(i.from&&(r.push(i.from),r.push(i.to),Array.isArray(i.controlPoints)&&r.push.apply(r,i.controlPoints),"curve"===i.name))for(var c=.01;c<1;c+=.02)r.push(Lt(c,i.from,i.controlPoints[0],i.controlPoints[1],i.to))}var h=er(r),l=h.x1,u=h.y1,t=h.x2,h=h.y2;return new x(l,u,t-l,h-u)}function er(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,o=0,s=t;o<s.length;o++)var a=s[o],c=a.x,a=a.y,e=Math.min(e,c),r=Math.min(r,a),n=Math.max(n,c),i=Math.max(i,a);return{x1:e,y1:r,x2:n,y2:i}}function rr(){return/Android|webOS|iPad|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)}function nr(t,e){var r={pens:[],lineName:"curve",fromArrow:"",toArrow:"triangleSolid",scale:1,locked:Ve.None};if("string"==typeof t&&(t=JSON.parse(t)),(r=Object.assign(r,t)).pens=[],t){if(t.nodes){for(var n=0,i=t.nodes;n<i.length;n++)(o=i[n]).TID=e,r.pens.push(new Ge(o));for(var o,s=0,a=t.lines;s<a.length;s++)(o=a[s]).TID=e,r.pens.push(new Ke(o))}t.pens&&t.pens.forEach(function(t){e&&(t.TID=e),t.type?r.pens.push(new Ke(t)):r.pens.push(new Ge(t))}),t.bkImageRect&&(r.bkImageRect=new x(t.bkImageRect.x,t.bkImageRect.y,t.bkImageRect.width,t.bkImageRect.height))}return r.mqttOptions?(t="",t="object"==typeof r.mqttOptions?JSON.stringify(r.mqttOptions):r.mqttOptions+"",r.mqttOptions=JSON.parse(t)):r.mqttOptions={clientId:h()},e&&d.Store.set(e+"-topology-data",r),r}(ir=Ve=Ve||{})[ir.None=0]="None",ir[ir.Readonly=1]="Readonly",ir[ir.NoMove=2]="NoMove",ir[ir.NoEvent=10]="NoEvent",(Xe=Ye=Ye||{})[Xe.Default=0]="Default",Xe[Xe.In=1]="In",Xe[Xe.Out=2]="Out";var ir=(or.prototype.generateStoreKey=function(t){return this.TID+"-"+t},or.prototype.destroy=function(){this.subcribe.unsubscribe()},or);function or(t){var e=this;this.TID=t,this.subcribe=d.Store.subscribe(this.generateStoreKey("topology-data"),function(t){e.data=t})}var sr,ar,Xe=((sr=function(t,e){return(sr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}sr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)})(cr,ar=ir),cr.prototype.resize=function(t){t?(this.width=0|t.width,this.height=0|t.height):(this.options.width&&"auto"!==this.options.width?this.width=+this.options.width:this.width=this.parentElem.clientWidth,this.options.height&&"auto"!==this.options.height?this.height=+this.options.height:this.height=this.parentElem.clientHeight),this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.width=this.width*cr.dpiRatio|0,this.canvas.height=this.height*cr.dpiRatio|0,this.canvas.getContext("2d").scale(cr.dpiRatio,cr.dpiRatio),d.Store.set(this.generateStoreKey("LT:size"),{width:this.canvas.width,height:this.canvas.height})},cr.prototype.render=function(){this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height)},cr.prototype.getDpiRatio=function(){return cr.dpiRatio},cr.prototype.destroy=function(){this.subcribe.unsubscribe()},cr.dpiRatio=0,cr);function cr(t,e,r){void 0===e&&(e={});var n=ar.call(this,r)||this;return n.parentElem=t,n.options=e,n.canvas=document.createElement("canvas"),n.width=0,n.height=0,n.subcribe=d.Store.subscribe(n.generateStoreKey("topology-data"),function(t){n.data=t}),n.canvas.style.position="absolute",n.canvas.style.left="0",n.canvas.style.top="0",n.canvas.style.outline="none",cr.dpiRatio||(e.extDpiRatio||0===e.extDpiRatio||(window&&1<window.devicePixelRatio?e.extDpiRatio=.25:e.extDpiRatio=0),cr.dpiRatio=(window?window.devicePixelRatio:0)+e.extDpiRatio,cr.dpiRatio<1&&(cr.dpiRatio=1)),n}var hr,lr,ur=((hr=function(t,e){return(hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}hr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)})(fr,lr=Xe),fr.prototype.render=function(){lr.prototype.render.call(this);var t=this.canvas.getContext("2d");t.strokeStyle=this.options.color;for(var e=0,r=this.data.pens;e<r.length;e++){var n=r[e];n.getTID()||n.setTID(this.TID),n.render(t)}this.activeLayer.render(t),this.animateLayer.render(t),this.hoverLayer.render(t)},fr);function fr(t,e,r){r=lr.call(this,t,e=void 0===e?{}:e,r)||this;return r.parentElem=t,r.options=e,r.activeLayer=d.Store.get(r.generateStoreKey("LT:ActiveLayer")),r.hoverLayer=d.Store.get(r.generateStoreKey("LT:HoverLayer")),r.animateLayer=d.Store.get(r.generateStoreKey("LT:AnimateLayer")),d.Store.set(r.generateStoreKey("LT:offscreen"),r.canvas),r}var dr,pr,yr=((dr=function(t,e){return(dr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}dr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)})(gr,pr=Xe),gr.prototype.loadBkImg=function(t){var e=this;this.data.bkImage&&(this.bkImg=new Image,this.bkImg.crossOrigin="anonymous",this.bkImg.src=this.data.bkImage,this.bkImg.onload=function(){e.data.bkImageRect||(e.data.bkImageRect=new x(0,0,e.bkImg.naturalWidth,e.bkImg.naturalHeight)),t&&t()})},gr.prototype.clearBkImg=function(){this.bkImg=void 0},gr.prototype.rule=function(){var t=this.canvas.getContext("2d");t.save(),t.lineWidth=1,t.strokeStyle=wt(.7,this.data.ruleColor||this.options.ruleColor||"#888"),t.beginPath();for(var e=10;e<this.width;e+=10)t.moveTo(e,0),t.lineTo(e,5);for(e=10;e<this.height;e+=10)t.moveTo(0,e),t.lineTo(5,e);t.stroke(),t.beginPath(),t.strokeStyle=this.data.ruleColor||this.options.ruleColor||"#888",t.fillStyle=t.strokeStyle;for(e=100;e<this.width;e+=100)t.moveTo(e,0),t.lineTo(e,10),t.fillText(e.toString(),e+4,16);for(e=100;e<this.height;e+=100)t.moveTo(0,e),t.lineTo(10,e);t.stroke();for(e=100;e<this.height;e+=100)t.save(),t.beginPath(),t.translate(16,e-4),t.rotate(270*Math.PI/180),t.fillText(e.toString(),0,0),t.restore();t.restore()},gr.prototype.grid=function(){var t=this.canvas.getContext("2d");t.save(),t.lineWidth=1,t.strokeStyle=this.data.gridColor||this.options.gridColor||"#f3f3f3",t.beginPath();for(var e=this.data.gridSize||this.options.gridSize,r=e;r<this.width;r+=e)t.moveTo(r,0),t.lineTo(r,this.height);for(r=e;r<this.height;r+=e)t.moveTo(0,r),t.lineTo(this.width,r);t.stroke(),t.restore()},gr);function gr(t,e,r){var n=pr.call(this,t,e=void 0===e?{}:e,r)||this;return n.parentElem=t,n.options=e,n.render=function(){var t;n.data&&n.data.bkImage&&!n.bkImg?n.loadBkImg(n.render):n.width&&n.height&&n.offscreen&&((t=n.canvas.getContext("2d")).clearRect(0,0,n.canvas.width,n.canvas.height),(n.data.bkColor||n.options.bkColor)&&(t.fillStyle=n.data.bkColor||n.options.bkColor,t.fillRect(0,0,n.width,n.height)),n.bkImg&&n.data.bkImageRect&&t.drawImage(n.bkImg,n.data.bkImageRect.x,n.data.bkImageRect.y,n.data.bkImageRect.width,n.data.bkImageRect.height),(n.data.grid||n.options.grid)&&n.grid(),(n.data.rule||n.options.rule)&&n.rule(),t.drawImage(n.offscreen,0,0,n.width,n.height))},n.offscreen=d.Store.get(n.generateStoreKey("LT:offscreen")),n.parentElem.appendChild(n.canvas),n.data=d.Store.get(n.generateStoreKey("topology-data")),n}var mr,vr,wr=((mr=function(t,e){return(mr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}mr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)})(br,vr=ir),br.prototype.lineTo=function(t,e){void 0===e&&(e="triangleSolid"),this.line&&!this.line.locked&&(this.line.setTo(t,e),(this.line.from.id||this.line.to.id)&&this.line.calcControlPoints(),d.Store.set(this.generateStoreKey("pts-")+this.line.id,void 0),d.Store.set(this.generateStoreKey("LT:updateLines"),[this.line]))},br.prototype.lineFrom=function(t){this.line.locked||(this.line.setFrom(t,this.line.fromArrow),(this.line.from.id||this.line.to.id)&&this.line.calcControlPoints(),d.Store.set(this.generateStoreKey("pts-")+this.line.id,void 0),d.Store.set(this.generateStoreKey("LT:updateLines"),[this.line]))},br.prototype.render=function(i){var t,o=this;if(this.data.locked!==Ve.NoEvent&&"transparent"!==this.options.hoverColor){if(i.fillStyle=this.options.hoverColor,i.save(),this.options.alwaysAnchor&&this.data.pens.forEach(function(t){if(t.type!==b.Line&&!t.hideAnchor){for(var e=0,r=t.rotatedAnchors;e<r.length;e++){var n=r[e];n.hidden||(i.beginPath(),i.arc(n.x,n.y,n.radius||o.options.anchorRadius,0,2*Math.PI),i.strokeStyle=n.strokeStyle||o.options.hoverColor,i.fillStyle=n.fillStyle||o.options.anchorFillStyle,i.fill(),i.stroke())}o.options.autoAnchor&&(i.beginPath(),i.arc(t.rect.center.x,t.rect.center.y,t.rect.center.radius||o.options.anchorRadius,0,2*Math.PI),i.strokeStyle=o.options.hoverColor,i.fillStyle=o.options.anchorFillStyle,i.fill(),i.stroke())}}),i.restore(),this.node&&!this.data.locked){if(this.node.getTID()||this.node.setTID(this.TID),this.root=this.getRoot(this.node)||this.node,this.root&&(i.save(),i.strokeStyle=this.options.dragColor,i.globalAlpha=.2,this.root.rotate&&(i.translate(this.root.rect.center.x,this.root.rect.center.y),i.rotate((this.root.rotate+this.root.offsetRotate)*Math.PI/180),i.translate(-this.root.rect.center.x,-this.root.rect.center.y)),i.beginPath(),i.strokeRect(this.root.rect.x,this.root.rect.y,this.root.rect.width,this.root.rect.height),i.restore()),!this.options.hideAnchor)for(var e=0;e<this.node.rotatedAnchors.length;++e)this.node.locked||this.node.hideAnchor||this.node.rotatedAnchors[e].hidden&&this.hoverAnchorIndex!==e||(i.beginPath(),i.arc(this.node.rotatedAnchors[e].x,this.node.rotatedAnchors[e].y,this.node.rotatedAnchors[e].radius||this.options.anchorRadius,0,2*Math.PI),i.strokeStyle=this.node.rotatedAnchors[e].strokeStyle||this.options.hoverColor,i.fillStyle=this.node.rotatedAnchors[e].fillStyle||this.options.anchorFillStyle,i.fill(),i.stroke());this.options.autoAnchor&&(i.beginPath(),i.arc(this.node.rect.center.x,this.node.rect.center.y,this.node.rect.center.radius||this.options.anchorRadius,0,2*Math.PI),i.strokeStyle=this.options.hoverColor,i.fillStyle=this.options.anchorFillStyle,i.fill(),i.stroke())}this.line&&!this.data.locked&&(this.root=this.getRoot(this.line),this.root&&(i.save(),i.strokeStyle=this.options.dragColor,i.globalAlpha=.2,this.root.rotate&&(i.translate(this.root.rect.center.x,this.root.rect.center.y),i.rotate((this.root.rotate+this.root.offsetRotate)*Math.PI/180),i.translate(-this.root.rect.center.x,-this.root.rect.center.y)),i.beginPath(),i.strokeRect(this.root.rect.x,this.root.rect.y,this.root.rect.width,this.root.rect.height),i.restore())),this.dockAnchor&&(i.save(),i.beginPath(),i.arc(this.dockAnchor.x,this.dockAnchor.y,this.dockAnchor.radius||this.options.anchorRadius,0,2*Math.PI),i.strokeStyle=this.options.dockStrokeStyle,i.fillStyle=this.options.dockFillStyle,i.fill(),i.stroke(),i.restore()),this.hoverLineCP&&(i.beginPath(),i.arc(this.hoverLineCP.x,this.hoverLineCP.y,5,0,2*Math.PI),i.fill()),i.strokeStyle=wt(.5,this.options.hoverColor),i.lineWidth=1,0<this.dockLineX&&(t=d.Store.get(this.generateStoreKey("LT:size")),i.beginPath(),i.moveTo(this.dockLineX,0),i.lineTo(this.dockLineX,t.height),i.stroke()),0<this.dockLineY&&(t=d.Store.get(this.generateStoreKey("LT:size")),i.beginPath(),i.moveTo(0,this.dockLineY),i.lineTo(t.width,this.dockLineY),i.stroke()),this.dragRect&&(i.fillStyle=wt(.2,this.options.dragColor),i.strokeStyle=this.options.dragColor,i.beginPath(),i.strokeRect(this.dragRect.x,this.dragRect.y,this.dragRect.width,this.dragRect.height),i.fillRect(this.dragRect.x,this.dragRect.y,this.dragRect.width,this.dragRect.height))}},br.prototype.getRoot=function(t){if(!t.parentId)return null;for(var e=0,r=this.data.pens;e<r.length;e++){var n=r[e];if(n.id===t.parentId){var i=this.getRoot(n);return i||n}}return null},br.prototype.clear=function(){this.node=void 0,this.line=void 0},br);function br(t,e){void 0===t&&(t={});e=vr.call(this,e)||this;return e.options=t,e.hoverAnchorIndex=-1,e.dockLineX=0,e.dockLineY=0,d.Store.set(e.generateStoreKey("LT:HoverLayer"),e),e}var xr,Sr,_r=((xr=function(t,e){return(xr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}xr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)})(kr,Sr=ir),kr.prototype.calcControlPoints=function(){if(1===this.pens.length&&this.pens[0]instanceof Ge){if(this.rect=this.pens[0].rect,this.sizeCPs=this.pens[0].rect.toPoints(),this.rotateCPs=[new u(this.pens[0].rect.x+this.pens[0].rect.width/2,this.pens[0].rect.y-35),new u(this.pens[0].rect.x+this.pens[0].rect.width/2,this.pens[0].rect.y)],this.rotate||this.pens[0].rotate){for(var t=0,e=this.sizeCPs;t<e.length;t++){var r=e[t];this.pens[0].rotate&&r.rotate(this.pens[0].rotate,this.pens[0].rect.center),this.rotate&&r.rotate(this.rotate,this.rect.center)}for(var n=0,i=this.rotateCPs;n<i.length;n++){r=i[n];this.pens[0].rotate&&r.rotate(this.pens[0].rotate,this.pens[0].rect.center),this.rotate&&r.rotate(this.rotate,this.rect.center)}}(this.options.hideRotateCP||this.pens[0].hideRotateCP)&&(this.rotateCPs=[new u(-1e3,-1e3),new u(-1e3,-1e3)])}else{var o=er(this.getPoints()),s=o.x1,a=o.y1,c=o.x2,o=o.y2;this.rect=new x(s,a,c-s,o-a),this.sizeCPs=[new u(s,a),new u(c,a),new u(c,o),new u(s,o)],this.rotateCPs=[new u(s+(c-s)/2,a-35),new u(s+(c-s)/2,a)],this.options.hideRotateCP&&(this.rotateCPs=[new u(-1e3,-1e3),new u(-1e3,-1e3)])}},kr.prototype.locked=function(){for(var t=0,e=this.pens;t<e.length;t++)if(!e[t].locked)return!1;return!0},kr.prototype.getPoints=function(){for(var r=[],t=0,e=this.pens;t<e.length;t++){var n=e[t];if(n.type===b.Node){var i=n.rect.toPoints();if(n.rotate)for(var o=0,s=i;o<s.length;o++)s[o].rotate(n.rotate,n.rect.center);r.push.apply(r,i)}else if(n instanceof Ke)if(n.children)n.children.forEach(function(t){if(r.push(t.from),r.push(t.to),"curve"===t.name)for(var e=.01;e<1;e+=.02)r.push(Lt(e,t.from,t.controlPoints[0],t.controlPoints[1],t.to))});else if(n.from&&(r.push(n.from),r.push(n.to),"curve"===n.name))for(var a=.01;a<1;a+=.02)r.push(Lt(a,n.from,n.controlPoints[0],n.controlPoints[1],n.to))}return r},kr.prototype.clear=function(){this.pens=[],this.sizeCPs=[],this.rotateCPs=[],d.Store.set(this.generateStoreKey("LT:activeNode"),void 0)},kr.prototype.saveNodeRects=function(){this.nodeRects=[],this.childrenRects={};for(var t=0,e=this.pens;t<e.length;t++)(i=e[t]).type&&i.from?this.nodeRects.push(new x(i.from.x,i.from.y,i.rect.width,i.rect.height)):this.nodeRects.push(new x(i.rect.x,i.rect.y,i.rect.width,i.rect.height)),this.saveChildrenRects(i);this.initialSizeCPs=[];for(var r=0,n=this.sizeCPs;r<n.length;r++){var i=n[r];this.initialSizeCPs.push(i.clone())}this.getDockWatchers()},kr.prototype.saveChildrenRects=function(t){if(!t.type&&t.children)for(var e=0,r=t.children;e<r.length;e++){var n=r[e];this.childrenRects[n.id]=new x(n.rect.x,n.rect.y,n.rect.width,n.rect.height),this.childrenRotate[n.id]=n.rotate,this.saveChildrenRects(n)}},kr.prototype.resize=function(t,e,r){var n=new u(e.x,e.y),e=new u(r.x,r.y);1===this.pens.length&&this.pens[0].rotate%360&&(n.rotate(-this.pens[0].rotate,this.nodeRects[0].center),e.rotate(-this.pens[0].rotate,this.nodeRects[0].center));var i=e.x-n.x,o=e.y-n.y;switch(t){case 0:i=-i,o=-o;break;case 1:o=-o;break;case 3:i=-i}for(var s=0,a=0,c=this.pens;a<c.length;a++){var h=c[a];if(!h.locked){if(h.type!==b.Line){switch(h.oldRect=h.rect.clone(),this.options.disableSizeX||r.altKey||h.disableSizeX||(h.rect.width=this.nodeRects[s].width+i),this.options.disableSizeY||r.ctrlKey||h.disableSizeY||(h.rect.height=this.nodeRects[s].height+o),t){case 0:h.rect.x=h.rect.ex-h.rect.width,h.rect.y=h.rect.ey-h.rect.height;break;case 1:h.rect.ex=h.rect.x+h.rect.width,h.rect.y=h.rect.ey-h.rect.height;break;case 2:h.rect.ex=h.rect.x+h.rect.width,h.rect.ey=h.rect.y+h.rect.height;break;case 3:h.rect.x=h.rect.ex-h.rect.width,h.rect.ey=h.rect.y+h.rect.height}h.scalePoints(),h.rect.calcCenter(),h.init(),h.calcChildrenRect()}++s}}this.updateLines()},kr.prototype.move=function(l,u){if(this.nodeRects.length===this.pens.length){for(var f=0,d=this,t=0,e=this.pens;t<e.length;t++)!function(t){if(t.locked)return;if(t instanceof Ge){var e=d.nodeRects[f].x+l-t.rect.x,r=d.nodeRects[f].y+u-t.rect.y;t.translate(e,r);for(var n=0,i=d.getLinesOfNode(t);n<i.length;n++)i[n].translate(e,r);if(t.calcChildrenRect(),t.parentId&&!t.locked)for(var o=0,s=d.data.pens;o<s.length;o++){var a=s[o];if(a.id===t.parentId){t.calcRectInParent(a);break}}}var c,h;t instanceof Ke&&t.from&&(c=d.nodeRects[f].x+l-t.from.x,h=d.nodeRects[f].y+u-t.from.y,t.parentId?y(t.parentId,d.data.pens).forEach(function(t){t.translate(c,h)}):t.translate(c,h)),++f}(e[t]);this.updateLines(),this.topology.dispatch("move",this.pens)}},kr.prototype.getLinesOfNode=function(t){for(var e=[],r=p([t]),n=0,i=this.data.pens;n<i.length;n++){var o=i[n];if(o instanceof Ke){for(var s=o,a=!1,c=!1,h=0,l=r.nodes;h<l.length;h++){var u=l[h];s.from&&s.from.id===u.id&&(a=!0),s.to&&s.to.id===u.id&&(c=!0)}a&&c&&e.push(s)}}return e},kr.prototype.updateLines=function(t){for(var e=p(t=t||this.pens),t=p(this.data.pens),r=[],n=p(this.data.pens).nodes,i=0,o=t.lines;i<o.length;i++)for(var s=o[i],a=e.nodes,c=0,h=a=this.options.autoAnchor?n:a;c<h.length;c++){var l,u=h[c],f=0;s.from&&s.from.id===u.id&&(s.from.autoAnchor&&-1<(l=u.nearestAnchor(s.to)).index&&(s.from.anchorIndex=l.index,s.from.direction=l.direction),0<=s.from.anchorIndex&&(s.from.x=u.rotatedAnchors[s.from.anchorIndex].x,s.from.y=u.rotatedAnchors[s.from.anchorIndex].y,++f)),s.to&&s.to.id===u.id&&(s.to.autoAnchor&&-1<(l=u.nearestAnchor(s.from)).index&&(s.to.anchorIndex=l.index,s.to.direction=l.direction),0<=s.to.anchorIndex&&(s.to.x=u.rotatedAnchors[s.to.anchorIndex].x,s.to.y=u.rotatedAnchors[s.to.anchorIndex].y,++f)),f&&!this.data.manualCps&&s.calcControlPoints(),s.textRect=void 0,d.Store.set(this.generateStoreKey("pts-")+s.id,void 0),r.push(s)}d.Store.set(this.generateStoreKey("LT:updateLines"),r)},kr.prototype.offsetRotate=function(t){this.rotating=!0;for(var e=0,r=0,n=this.pens;r<n.length;r++){var i,o=n[r];o instanceof Ge&&(i=this.nodeRects[e].center.clone(),1<this.pens.length&&i.rotate(t,this.rect.center),o.rect.x=i.x-o.rect.width/2,o.rect.y=i.y-o.rect.height/2,o.rect.ex=o.rect.x+o.rect.width,o.rect.ey=o.rect.y+o.rect.height,o.rect.calcCenter(),o.init(),o.offsetRotate=t,o.calcRotateAnchors(o.rotate+o.offsetRotate),this.rotateChildren(o),++e)}this.rotate=t,this.topology.dispatch("rotated",this.pens)},kr.prototype.rotateChildren=function(t){if(t.type===b.Node&&t.children)for(var e=0,r=t.children;e<r.length;e++){var n,i,o,s=r[e];s.type===b.Node&&(n=this.childrenRects[s.id].center.clone(),i=this.childrenRects[s.id].center.clone().rotate(this.rotate,this.rect.center),(o=this.childrenRects[s.id].clone()).translate(i.x-n.x,i.y-n.y),s.rect=o,s.rotate=this.childrenRotate[s.id]+this.rotate,s.init(),this.rotateChildren(s))}},kr.prototype.updateRotate=function(){for(var t=0,e=this.pens;t<e.length;t++){var r=e[t];r.rotate+=r.offsetRotate,r.type===b.Node&&r.rectInParent&&(r.rectInParent.rotate+=r.offsetRotate),r.offsetRotate=0}this.rotate=0,this.rotating=!1},kr.prototype.add=function(t){this.has(t)||(this.pens.push(t),t instanceof Ge&&d.Store.set(this.generateStoreKey("LT:activeNode"),t))},kr.prototype.setPens=function(t){this.pens=t,1===this.pens.length&&this.pens[0]instanceof Ge&&d.Store.set(this.generateStoreKey("LT:activeNode"),this.pens[0])},kr.prototype.has=function(t){for(var e=0,r=this.pens;e<r.length;e++)if(r[e].id===t.id)return!0},kr.prototype.hasInAll=function(t,e){for(var r=0,n=e=e||this.pens;r<n.length;r++){var i=n[r];if(i.id===t.id)return!0;if(i.children)if(this.hasInAll(t,i.children))return!0}},kr.prototype.render=function(t){var e=this;if(!(this.data.locked>Ve.Readonly||"transparent"===this.options.activeColor)&&this.pens.length){this.pens.forEach(function(t){t.getTID()||t.setTID(e.TID)}),1!==this.pens.length&&this.rotating||this.calcControlPoints(),t.save(),t.strokeStyle=this.options.activeColor,t.fillStyle="#fff",t.lineWidth=1;for(var r=this.TID,n=d.Store.get(this.generateStoreKey("LT:scale"))||1,i=0,o=this.pens;i<o.length;i++){var s,a=o[i];this.data.locked&&a instanceof Ge&&((s=new Ge(a)).setTID(r),s.data=void 0,s.fillStyle=void 0,s.bkType=0,s.icon="",s.image="",s.text="","transparent"!==s.strokeStyle&&(s.strokeStyle="#ffffff",s.lineWidth+=2,s.render(t),s.strokeStyle=this.options.activeColor,s.lineWidth-=2),s.render(t)),a instanceof Ke&&((s=new Ke(a)).lineWidth*=2,s.toArrowSize=(s.toArrowSize*n-1.5*s.lineWidth)/n,s.fromArrowSize=(s.fromArrowSize*n-1.5*s.lineWidth)/n,s.setTID(r),s.strokeStyle=wt(.2,this.options.activeColor),s.borderWidth=4,s.borderColor=wt(.1,this.options.activeColor),s.fromArrowColor=this.options.activeColor,s.toArrowColor=this.options.activeColor,s.render(t),this.data.locked||a.locked||De[a.name]&&De[a.name].drawControlPointsFn(t,a))}if(1!==this.pens.length||this.pens[0].type!==b.Line)if(this.rotate&&1<this.pens.length&&(t.translate(this.rect.center.x,this.rect.center.y),t.rotate(this.rotate*Math.PI/180),t.translate(-this.rect.center.x,-this.rect.center.y)),this.data.locked||this.locked())t.restore();else{if(t.save(),t.globalAlpha=.3,t.translate(.5,.5),t.beginPath(),t.moveTo(this.sizeCPs[0].x,this.sizeCPs[0].y),t.lineTo(this.sizeCPs[1].x,this.sizeCPs[1].y),t.lineTo(this.sizeCPs[2].x,this.sizeCPs[2].y),t.lineTo(this.sizeCPs[3].x,this.sizeCPs[3].y),t.closePath(),t.stroke(),t.restore(),t.beginPath(),t.moveTo(this.rotateCPs[0].x,this.rotateCPs[0].y),t.lineTo(this.rotateCPs[1].x,this.rotateCPs[1].y),t.stroke(),t.beginPath(),t.arc(this.rotateCPs[0].x,this.rotateCPs[0].y,5,0,2*Math.PI),t.fill(),t.stroke(),!this.options.hideSizeCP&&(1<this.pens.length||!this.pens[0].hideSizeCP)){t.lineWidth=1;for(var c=0,h=this.sizeCPs;c<h.length;c++){a=h[c];t.save(),t.beginPath(),1===this.pens.length&&(this.pens[0].rotate||this.rotate)&&(t.translate(a.x,a.y),t.rotate((this.pens[0].rotate+this.rotate)*Math.PI/180),t.translate(-a.x,-a.y)),t.fillRect(a.x-4.5,a.y-4.5,8,8),t.strokeRect(a.x-5.5,a.y-5.5,10,10),t.restore()}}t.restore()}}},kr.prototype.getDockWatchers=function(){if(1===this.pens.length)return this.dockWatchers=this.nodeRects[0].toPoints(),void this.dockWatchers.unshift(this.nodeRects[0].center);this.rect&&(this.dockWatchers=this.rect.toPoints(),this.dockWatchers.unshift(this.rect.center))},kr);function kr(t,e){void 0===t&&(t={});e=Sr.call(this,e)||this;return e.options=t,e.rotateCPs=[],e.sizeCPs=[],e.pens=[],e.rotate=0,e.initialSizeCPs=[],e.nodeRects=[],e.childrenRects={},e.childrenRotate={},e.dockWatchers=[],e.rotating=!1,d.Store.set(e.generateStoreKey("LT:ActiveLayer"),e),e}var Tr,Ir,Lr=((Tr=function(t,e){return(Tr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Tr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)})(Ar,Ir=ir),Ar.prototype.getAnimateLine=function(t){var e=new Ke(t);return e.data=e.id,e.id=h(),e.setTID(this.TID),e.isAnimate=!0,e.toArrow="",e.fromArrow&&e.fromArrow.indexOf("line")<0&&(e.animateFromSize=e.fromArrowSize+5*e.lineWidth),e.toArrow&&e.toArrow.indexOf("line")<0&&(e.animateToSize=e.toArrowSize+5*e.lineWidth),e.animateStart=t.animateStart,e.lineCap="round",e.fillStyle="#fff",e.strokeStyle=e.animateColor||this.options.animateColor,e.length=e.getLen(),e.fromArrowColor||(e.fromArrowColor=e.strokeStyle||d.Store.get(this.generateStoreKey("LT:color"))),e.toArrowColor||(e.toArrowColor=e.strokeStyle||d.Store.get(this.generateStoreKey("LT:color"))),e},Ar.prototype.findLine=function(t){for(var e=0,r=this.data.pens;e<r.length;e++){var n=r[e];if(n.id===t.data)return n}},Ar.prototype.readyPlay=function(e,r,t){var n=this,i=new Map;(t=t||this.data.pens).forEach(function(t){t.setTID(n.TID),t.visible&&!i.get(t.id)&&((r&&t.animatePlay||e&&-1<t.tags.indexOf(e))&&(!t.animateStart||t.animateStart<1)&&(t.animateStart=Date.now()),t instanceof Ge?(0<t.animateStart&&(t.animateReady||t.initAnimate(),i.set(t.id,t)),t.children&&t.children.length&&n.readyPlay(e,r,t.children)):0<t.animateStart?i.set(t.id,n.getAnimateLine(t)):n.pens.has(t.id)&&(n.pens.get(t.id).animateStart=0))}),i.forEach(function(t){t.type?n.pens.set(t.data,t):n.pens.set(t.id,t)})},Ar.prototype.animate=function(){var i=this;this.timer&&cancelAnimationFrame(this.timer),this.timer=requestAnimationFrame(function(){var r,n=Date.now();n-i.lastNow<i.options.refresh?i.animate():(i.lastNow=n,r=!1,i.pens.forEach(function(t){var e;!t.animateStart||t.animateStart<1?t.type?(i.pens.delete(t.data),(e=i.findLine(t))&&(e.animateStart=0,e.animatePos=t.animatePos)):i.pens.delete(t.id):t.animateStart>n||(t.animateFn?"function"==typeof t.animateFn?t.animateFn():window&&window[t.animateFn]&&window[t.animateFn]():t.animate(n),t.animateStart<1&&(t.type?i.pens.delete(t.data):i.pens.delete(t.id),t.type===b.Line&&(e=i.findLine(t))&&(e.animateStart=0,e.animatePos=t.animatePos),t.nextAnimate&&i.readyPlay(t.nextAnimate,!1)),r=!0)}),r&&(d.Store.set(i.generateStoreKey("LT:render"),!0),i.animate()))})},Ar.prototype.updateLines=function(o){this.pens.forEach(function(t,e){if(t instanceof Ke)for(var r=0,n=o;r<n.length;r++){var i=n[r];t.data===i.id&&(t.from=i.from,t.to=i.to,t.controlPoints=i.controlPoints,t.length=t.getLen())}})},Ar.prototype.render=function(r){var n=this;this.pens.forEach(function(t,e){t.visible&&t instanceof Ke&&(t.getTID()||t.setTID(n.TID),t.render(r))})},Ar.prototype.stop=function(){this.pens.clear(),this.timer&&cancelAnimationFrame(this.timer)},Ar.prototype.destroy=function(){this.stop(),this.subscribeUpdate.unsubscribe(),this.subscribePlay.unsubscribe()},Ar);function Ar(t,e){void 0===t&&(t={});var r=Ir.call(this,e)||this;return r.options=t,r.pens=new Map,r.lastNow=0,d.Store.set(r.generateStoreKey("LT:AnimateLayer"),r),r.options.animateColor||(r.options.animateColor="#ff6600"),r.subscribeUpdate=d.Store.subscribe(r.generateStoreKey("LT:updateLines"),function(t){r.updateLines(t)}),r.subscribePlay=d.Store.subscribe(r.generateStoreKey("LT:AnimatePlay"),function(t){t.stop?(t.tag&&y(t.tag,r.data.pens).forEach(function(t){r.pens.has(t.id)&&(r.pens.get(t.id).animateStart=0)}),t.pen&&r.pens.has(t.pen.id)&&(r.pens.get(t.pen.id).animateStart=0)):(t.pen&&(r.pens.has(t.pen.id)?r.pens.get(t.pen.id).animateStart=Date.now():t.pen.type?r.pens.set(t.pen.id,r.getAnimateLine(t.pen)):r.pens.set(t.pen.id,t.pen)),t.tag&&r.readyPlay(t.tag,!1)),r.animate()}),r}var Rr,Pr,Xe=(Rr=function(t,e){return(Rr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Rr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Er={},Cr=(Xe(Or,Pr=ir),Or.prototype.play=function(t,e){var r=this;t&&y(t,this.data.pens).forEach(function(t){r.playOne(t,e)})},Or.prototype.playOne=function(t,e){t.audio&&this.audios[t.id]&&this.audios[t.id].media?e?this.audios[t.id].media.pause():this.audios[t.id].media.paused&&this.audios[t.id].media.play():t.video&&Er[t.id].media&&(e?Er[t.id].media.pause():Er[t.id].media.paused&&Er[t.id].media.play())},Or.prototype.addIframe=function(t){var e=document.createElement("iframe");return e.scrolling="no",e.frameBorder="0",e.src=t.iframe,this.iframes[t.id]=e,this.canvas.appendChild(e),e},Or.prototype.addGif=function(t){return this.gifs[t.id]=t.img,this.canvas.appendChild(t.img),t.img},Or.prototype.clear=function(t){if(this.canvas.innerHTML="",this.audios={},Er={},this.iframes={},this.elements={},this.gifs={},!t)for(var e in I)delete I[e];this.player.style.top="-99999px"},Or.prototype.formatSeconds=function(t){var e=Math.floor(t/3600),r=Math.floor(t/60)%60,t=Math.floor(t%60);return e?e+":"+r+":"+t:r?r+":"+t:"0:"+t},Or.prototype.resize=function(t){t?(this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px"):(this.options.width&&"auto"!==this.options.width?this.canvas.style.width=this.options.width+"px":this.canvas.style.width=this.parentElem.clientWidth+"px",this.options.height&&"auto"!==this.options.height?this.canvas.style.height=this.options.height+"px":this.canvas.style.height=this.parentElem.clientHeight-8+"px")},Or.prototype.render=function(){for(var t=0,e=this.data.pens;t<e.length;t++){var r=e[t];r.getTID()||r.setTID(this.TID),this.addDiv(r)}},Or.prototype.destroy=function(){Pr.prototype.destroy.call(this),this.clear(),this.subcribeDiv.unsubscribe(),this.subcribeNode.unsubscribe(),this.subcribePlay.unsubscribe()},Or);function Or(t,e,r){void 0===e&&(e={});var o=Pr.call(this,r)||this;return o.parentElem=t,o.options=e,o.canvas=document.createElement("div"),o.player=document.createElement("div"),o.audios={},o.iframes={},o.elements={},o.gifs={},o.addDiv=function(t){if(t.audio&&(o.audios[t.id]&&o.audios[t.id].media.src!==t.audio&&(o.audios[t.id].media.src=t.audio),setTimeout(function(){o.setElemPosition(t,o.audios[t.id]&&o.audios[t.id].player||o.addMedia(t,"audio"))})),t.video&&(Er[t.id]&&Er[t.id].media.src!==t.video&&(Er[t.id].media.src=t.video),setTimeout(function(){o.setElemPosition(t,Er[t.id]&&Er[t.id].player||o.addMedia(t,"video"))})),t.iframe&&(o.iframes[t.id]?(o.iframes[t.id].src!==t.iframe&&(o.iframes[t.id].src=t.iframe),o.setElemPosition(t,o.iframes[t.id])):(o.addIframe(t),setTimeout(function(){o.addDiv(t)}))),t.elementId&&(o.elements[t.id]||(o.elements[t.id]=document.getElementById(t.elementId),o.elements[t.id]&&o.canvas.appendChild(o.elements[t.id])),o.setElemPosition(t,o.elements[t.id])),t.gif&&(t.image.indexOf(".gif")<0?(t.gif=!1,o.canvas.removeChild(o.gifs[t.id]),o.gifs[t.id]=void 0):t.img&&(o.gifs[t.id]&&o.gifs[t.id].src!==t.image&&(o.gifs[t.id].src=t.image),o.setElemPosition(t,o.gifs[t.id]||o.addGif(t)))),t.children)for(var e=0,r=t.children;e<r.length;e++){var n=r[e];n.type!==b.Line&&o.addDiv(n)}},o.createPlayer=function(){o.player.style.position="fixed",o.player.style.outline="none",o.player.style.top="-99999px",o.player.style.height="40px",o.player.style.padding="10px 15px",o.player.style.background="rgba(200,200,200,.1)",o.player.style.display="flex",o.player.style.alignItems="center",o.player.style.userSelect="initial",o.player.style.pointerEvents="initial",o.player.style.zIndex="1",o.playBtn=document.createElement("i"),o.currentTime=document.createElement("span"),o.progress=document.createElement("div"),o.progressCurrent=document.createElement("div"),o.loop=document.createElement("i");var t=document.createElement("i");o.playBtn.className=o.options.playIcon,o.playBtn.style.fontSize="18px",o.playBtn.style.lineHeight="20px",o.playBtn.style.cursor="pointer",o.currentTime.style.padding="0 10px",o.currentTime.innerText="0 / 0",o.progress.style.position="relative",o.progress.style.flexGrow="1",o.progress.style.top="0",o.progress.style.height="4px",o.progress.style.background="#ccc",o.progress.style.borderRadius="2px",o.progress.style.overflow="hidden",o.progress.style.cursor="pointer",o.progressCurrent.style.position="absolute",o.progressCurrent.style.left="0",o.progressCurrent.style.top="0",o.progressCurrent.style.bottom="0",o.progressCurrent.style.width="0",o.progressCurrent.style.background="#52c41a",o.loop.style.margin="0 10px",o.loop.style.padding="2px 5px",o.loop.style.borderRadius="2px",o.loop.className=o.options.loopIcon,o.loop.style.fontSize="18px",o.loop.style.lineHeight="20px",o.loop.style.cursor="pointer",t.className=o.options.fullScreenIcon,t.style.fontSize="17px",t.style.lineHeight="20px",t.style.cursor="pointer",o.player.appendChild(o.playBtn),o.player.appendChild(o.currentTime),o.player.appendChild(o.progress),o.progress.appendChild(o.progressCurrent),o.player.appendChild(o.loop),o.player.appendChild(t),o.playBtn.onclick=function(){o.media.paused?(o.media.play(),o.playBtn.className=o.options.pauseIcon):(o.media.pause(),o.playBtn.className=o.options.playIcon)},o.progress.onclick=function(t){o.media.currentTime=t.offsetX/o.progress.clientWidth*o.media.duration},o.loop.onclick=function(){o.media.loop=!o.media.loop,o.curNode.playLoop=o.media.loop,o.media.loop?o.loop.style.background="#ddd":o.loop.style.background="none"},t.onclick=function(){o.media.requestFullscreen()}},o.getMediaCurrent=function(){o.media&&(o.currentTime.innerText=o.formatSeconds(o.media.currentTime)+" / "+o.formatSeconds(o.media.duration),o.progressCurrent.style.width=o.media.currentTime/o.media.duration*o.progress.clientWidth+"px")},o.addMedia=function(t,e){var r=document.createElement("div"),n=document.createElement("div"),i=document.createElement(e);return r.id=t.id,n.style.position="absolute",n.style.outline="none",n.style.left="0",n.style.bottom="0",n.style.height="2px",n.style.background="#52c41a",i.style.position="absolute",i.style.outline="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0","video"===e&&(i.style.width=t.rect.width+"px",i.style.height=t.rect.height+"px"),r.style.background="transparent",1===t.playType&&(i.autoplay=!0),i.loop=t.playLoop,i.ontimeupdate=function(){n.style.width=i.currentTime/i.duration*t.rect.width+"px",o.getMediaCurrent(),o.media===i&&(t.playLoop?(i.loop=!0,o.loop.style.background="#ddd"):(i.loop=!1,o.loop.style.background="none"))},i.onended=function(){d.Store.set(o.generateStoreKey("mediaEnd"),t),o.media===i&&(o.playBtn.className=o.options.playIcon),o.play(t.nextPlay)},i.onloadedmetadata=function(){o.getMediaCurrent()},i.src=t[e],r.appendChild(i),r.appendChild(n),"video"===e?Er[t.id]={player:r,current:n,media:i}:o.audios[t.id]={player:r,current:n,media:i},o.canvas.appendChild(r),r},o.setElemPosition=function(t,e){e&&(e.style.position="absolute",e.style.outline="none",e.style.left=t.rect.x+"px",e.style.top=t.rect.y+"px",e.style.width=t.rect.width+"px",e.style.height=t.rect.height+"px",(t.rotate||t.offsetRotate)&&(e.style.transform="rotate("+(t.rotate+t.offsetRotate)+"deg)"),t.video&&Er[t.id]&&Er[t.id].media&&(Er[t.id].media.style.width="100%",Er[t.id].media.style.height="100%"),o.data.locked>Ve.None||t.locked>Ve.None?(e.style.userSelect="initial",e.style.pointerEvents="initial"):(e.style.userSelect="none",e.style.pointerEvents="none"))},o.removeDiv=function(t){if(o.curNode&&t.id===o.curNode.id&&(o.curNode=void 0,o.media=void 0,o.player.style.top="-99999px"),t.audio&&(o.canvas.removeChild(o.audios[t.id].player),o.audios[t.id]=void 0),t.video&&(o.canvas.removeChild(Er[t.id].player),Er[t.id]=void 0),t.iframe&&(o.canvas.removeChild(o.iframes[t.id]),o.iframes[t.id]=void 0),t.elementId&&(o.canvas.removeChild(o.elements[t.id]),o.elements[t.id]=void 0,t.elementId=""),t.gif&&(o.canvas.removeChild(o.gifs[t.id]),o.gifs[t.id]=void 0),t.children)for(var e=0,r=t.children;e<r.length;e++){var n=r[e];n.type!==b.Line&&o.removeDiv(n)}},o.options.playIcon||(o.options.playIcon="t-icon t-play"),o.options.pauseIcon||(o.options.pauseIcon="t-icon t-pause"),o.options.fullScreenIcon||(o.options.fullScreenIcon="t-icon t-full-screen"),o.options.loopIcon||(o.options.loopIcon="t-icon t-loop"),o.canvas.style.position="absolute",o.canvas.style.left="0",o.canvas.style.top="0",o.canvas.style.outline="none",o.canvas.style.background="transparent",t.appendChild(o.canvas),t.appendChild(o.player),o.createPlayer(),o.subcribeDiv=d.Store.subscribe(o.generateStoreKey("LT:addDiv"),o.addDiv),o.subcribeDiv=d.Store.subscribe(o.generateStoreKey("LT:removeDiv"),o.removeDiv),o.subcribePlay=d.Store.subscribe(o.generateStoreKey("LT:play"),function(t){o.playOne(t.pen,t.pause)}),o.subcribeNode=d.Store.subscribe(o.generateStoreKey("LT:activeNode"),function(t){if(t&&(t.video||t.audio)){if(t.audio&&o.audios[t.id])o.media=o.audios[t.id].media;else{if(!t.video||!Er[t.id])return;o.media=Er[t.id].media}o.curNode=t;t=o.parentElem.getBoundingClientRect();o.player.style.top=t.top+o.parentElem.clientHeight-40+"px",o.player.style.left=t.left+"px",o.player.style.width=o.parentElem.clientWidth+"px",o.getMediaCurrent(),o.media.paused?o.playBtn.className=o.options.playIcon:o.playBtn.className=o.options.pauseIcon}else o.player.style.top="-99999px"}),document.addEventListener("fullscreenchange",function(t){o.media&&(document.fullscreen?(o.media.controls=!0,o.media.style.userSelect="initial",o.media.style.pointerEvents="initial"):(o.media.style.userSelect="none",o.media.style.pointerEvents="none",o.media.controls=!1))}),o}function Nr(t){var e=0,r=0,n=0,i=0;return"number"==typeof t?e=r=n=i=t:"string"==typeof t?e=r=n=i=parseInt(t,10):Array.isArray(t)&&(e=t[0],n=Mr(t[1])?t[0]:t[1],i=Mr(t[2])?t[0]:t[2],r=Mr(t[3])?n:t[3]),[e,n,i,r]}function Mr(t){return null==t}var Br=(Dr.prototype.init=function(){var t=this;this.socket=new WebSocket(this.url),this.socket.onmessage=this.cb,this.socket.onclose=function(){console.info("Canvas websocket closed and reconneting..."),t.init()}},Dr.prototype.close=function(){this.socket.onclose=void 0,this.socket.close()},Dr);function Dr(t,e){this.url=t,this.cb=e,this.fns={},this.init()}var Ur=r(130),jr=(Fr.prototype.init=function(){this.client=Ur.connect(this.url,this.options),this.client.on("message",this.cb),this.topics&&this.client.subscribe(this.topics.split(","))},Fr.prototype.publish=function(t,e){this.client.publish(t,e)},Fr.prototype.close=function(){this.client.end()},Fr);function Fr(t,e,r,n){this.url=t,this.options=e,this.topics=r,this.cb=n,this.fns={},this.init()}var Wr,Kr=["nw-resize","ne-resize","se-resize","sw-resize"];(ir=Wr=Wr||{})[ir.None=0]="None",ir[ir.Line=1]="Line",ir[ir.LineFrom=2]="LineFrom",ir[ir.LineTo=3]="LineTo",ir[ir.LineControlPoint=4]="LineControlPoint",ir[ir.Nodes=5]="Nodes",ir[ir.ResizeCP=6]="ResizeCP",ir[ir.HoverAnchors=7]="HoverAnchors",ir[ir.AutoAnchor=8]="AutoAnchor",ir[ir.Rotate=9]="Rotate",ir[ir.GraffitiReady=10]="GraffitiReady",ir[ir.Graffiti=11]="Graffiti",ir[ir.LinesReady=12]="LinesReady",ir[ir.Lines=13]="Lines";var qr=(zr.prototype.setupDom=function(t){this.parentElem="string"==typeof t?document.getElementById(t):t,this.parentElem.style.position="relative",this.parentElem.style.overflow="auto",this.parentElem.onresize=this.winResize,window.addEventListener("resize",this.winResize);t=this.id;this.activeLayer=new _r(this.options,t),(this.activeLayer.topology=this).hoverLayer=new wr(this.options,t),this.animateLayer=new Lr(this.options,t),this.offscreen=new ur(this.parentElem,this.options,t),this.canvas=new yr(this.parentElem,this.options,t),this.divLayer=new Cr(this.parentElem,this.options,t),this.input.style.position="absolute",this.input.style.zIndex="-1",this.input.style.left="-1000px",this.input.style.width="0",this.input.style.height="0",this.input.style.outline="none",this.input.style.border="1px solid #cdcdcd",this.input.style.resize="none",this.parentElem.appendChild(this.input),this.createMarkdownTip(),this.resize()},zr.prototype.setupSubscribe=function(){var e=this;this.subcribe=d.Store.subscribe(this.generateStoreKey("LT:render"),function(){e.render()}),this.subcribeRender=d.Store.subscribe("LT:render",function(){e.render()}),this.subcribeImage=d.Store.subscribe(this.generateStoreKey("LT:imageLoaded"),function(){e.imageTimer&&clearTimeout(e.imageTimer),e.imageTimer=setTimeout(function(){e.render()},100)}),this.subcribeAnimateMoved=d.Store.subscribe(this.generateStoreKey("LT:rectChanged"),function(t){e.activeLayer.updateLines(e.data.pens)}),this.subcribeMediaEnd=d.Store.subscribe(this.generateStoreKey("mediaEnd"),function(t){t.nextPlay&&(e.animateLayer.readyPlay(t.nextPlay),e.animateLayer.animate()),e.dispatch("mediaEnd",t)}),this.subcribeAnimateEnd=d.Store.subscribe(this.generateStoreKey("animateEnd"),function(t){t&&(t.type===b.Node&&e.offscreen.render(),e.dispatch("animateEnd",t))}),this.subcribeEmit=d.Store.subscribe(this.generateStoreKey("LT:emit"),function(t){e.emit(t.event,t)})},zr.prototype.setupMouseEvent=function(){var o=this;switch(this.canvasPos=this.divLayer.canvas.getBoundingClientRect(),this.parentElem.addEventListener("scroll",this.onScroll),window.addEventListener("scroll",this.onScroll),this.divLayer.canvas.ondragover=function(t){return t.preventDefault()},this.divLayer.canvas.ondrop=function(t){if(!o.data.locked)try{var e=t.dataTransfer.getData("Topology")||t.dataTransfer.getData("Text");if(!e)return;var r=JSON.parse(e);t.preventDefault(),o.dropNodes(Array.isArray(r)?r:[r],t.offsetX,t.offsetY)}catch(t){}},rr()?(this.options.refresh=50,document.addEventListener("gesturestart",this.preventDefault),this.divLayer.canvas.ontouchstart=function(t){o.touchStart=Date.now();var e=new u(t.changedTouches[0].pageX-window.scrollX-(o.canvasPos.left||o.canvasPos.x),t.changedTouches[0].pageY-window.scrollY-(o.canvasPos.top||o.canvasPos.y));if(1<t.touches.length)return o.touches=t.touches,o.touchScale=o.data.scale,o.lastTranlated.x=e.x,void(o.lastTranlated.y=e.y);o.getMoveIn(e),o.hoverLayer.node=o.moveIn.hoverNode,o.hoverLayer.line=o.moveIn.hoverLine,o.lastTranlated.x=e.x,o.lastTranlated.y=e.y,o.onmousedown({x:e.x,y:e.y,ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,altKey:t.altKey,button:0})},this.divLayer.canvas.ontouchmove=function(t){t.stopPropagation();var e,r,n=t.changedTouches,i=n.length;!o.touchCenter&&1<i&&(o.touchCenter={x:n[0].pageX+(n[1].pageX-n[0].pageX)/2,y:n[0].pageY+(n[1].pageY-n[0].pageY)/2}),Date.now()-o.touchStart<50||(1<i?2===i?(e=t.scale||Math.hypot(n[0].pageX-n[1].pageX,n[0].pageY-n[1].pageY)/Math.hypot(o.touches[0].pageX-o.touches[1].pageX,o.touches[0].pageY-o.touches[1].pageY),t.preventDefault(),o.scaleTo(e*o.touchScale,o.touchCenter)):3===i&&(r=new u(n[0].pageX-window.scrollX-(o.canvasPos.left||o.canvasPos.x),n[0].pageY-window.scrollY-(o.canvasPos.top||o.canvasPos.y)),o.translate(r.x,r.y,!0)):(t.preventDefault(),r=new u(t.changedTouches[0].pageX-window.scrollX-(o.canvasPos.left||o.canvasPos.x),t.changedTouches[0].pageY-window.scrollY-(o.canvasPos.top||o.canvasPos.y)),o.onMouseMove({x:r.x,y:r.y,ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,altKey:t.altKey,buttons:1})))},this.divLayer.canvas.ontouchend=function(t){o.touches=void 0,o.ontouchend(t)}):(this.divLayer.canvas.onmousedown=function(t){o.touchedNode&&("graffiti"===o.touchedNode.name?(o.touchedNode.rect=new x(0,0,0,0),o.addNode(o.touchedNode),o.touchedNode=void 0):"lines"===o.touchedNode.name&&(o.addLine(o.touchedNode),o.touchedNode=void 0));t={x:t.pageX-window.scrollX-(o.canvasPos.left||o.canvasPos.x),y:t.pageY-window.scrollY-(o.canvasPos.top||o.canvasPos.y),ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,altKey:t.altKey,button:t.button};o.lastTranlated.x=t.x,o.lastTranlated.y=t.y,o.onmousedown(t)},this.divLayer.canvas.onmousemove=function(t){o.onMouseMove({x:t.pageX-window.scrollX-(o.canvasPos.left||o.canvasPos.x),y:t.pageY-window.scrollY-(o.canvasPos.top||o.canvasPos.y),ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,altKey:t.altKey,buttons:t.buttons})},this.divLayer.canvas.onmouseup=function(t){var e={x:t.pageX-window.scrollX-(o.canvasPos.left||o.canvasPos.x),y:t.pageY-window.scrollY-(o.canvasPos.top||o.canvasPos.y),ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,altKey:t.altKey,button:t.button};o.onmouseup(e),o.touchedNode&&(o.touchedNode.rect.x=t.pageX-window.scrollX-o.canvasPos.x-o.touchedNode.rect.width/2,o.touchedNode.rect.y=t.pageY-window.scrollY-o.canvasPos.y-o.touchedNode.rect.height/2,t=new Ge(o.touchedNode),o.addNode(t,!0),o.touchedNode=void 0)}),this.divLayer.canvas.ondblclick=this.ondblclick,this.divLayer.canvas.tabIndex=0,this.divLayer.canvas.onblur=function(){o.mouseDown=void 0},this.divLayer.canvas.onwheel=function(t){if((new Date).getTime()-o.touchStart<20)return t.preventDefault(),void t.stopPropagation();if(o.touchStart=(new Date).getTime(),!o.options.disableScale){switch(o.options.scaleKey){case i.Ctrl:if(!t.ctrlKey&&!t.metaKey)return;break;case i.Shift:if(!t.shiftKey)return;break;case i.Alt:if(!t.altKey)return}t.preventDefault(),t.stopPropagation();var e=new u(t.x-window.scrollX-(o.canvasPos.left||o.canvasPos.x),t.y-window.scrollY-(o.canvasPos.top||o.canvasPos.y)),r=o.data.scale;return t.deltaY<0?r+=.1:r-=.1,o.scaleTo(r,e),o.divLayer.canvas.focus(),!1}},this.options.keydown){case n.Document:document.addEventListener("keydown",this.onkeydown),document.addEventListener("keyup",function(){o.spaceDown=!1});break;case n.Canvas:this.divLayer.canvas.addEventListener("keydown",this.onkeydown)}},zr.prototype.ontouchend=function(t){var e=new u(t.changedTouches[0].pageX-window.scrollX-(this.canvasPos.left||this.canvasPos.x),t.changedTouches[0].pageY-window.scrollY-(this.canvasPos.top||this.canvasPos.y));this.onmouseup({x:e.x,y:e.y,ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,altKey:t.altKey,button:0}),this.touchedNode&&(this.touchedNode.rect.x=t.changedTouches[0].pageX-window.scrollX-this.canvasPos.x-this.touchedNode.rect.width/2,this.touchedNode.rect.y=t.changedTouches[0].pageY-window.scrollY-this.canvasPos.y-this.touchedNode.rect.height/2,t=new Ge(this.touchedNode),this.addNode(t,!0),this.touchedNode=void 0)},zr.prototype.resize=function(t){this.canvas.resize(t),this.offscreen.resize(t),this.divLayer.resize(t),this.render(),this.dispatch("resize",t)},zr.prototype.dropNodes=function(t,n,i){var e,o,s=this,a=0,c=0;t.length&&t[0].rect&&(e=t[0].rect,a=e.x,c=e.y),t.forEach(function(t){return t.id=h(),"graffiti"===t.name?(t.rect=new x(0,0,0,0),void s.addNode(t)):"lines"===t.name?(s.addLine(t),s.mouseDown={x:n,y:i},void s.onmouseup(s.mouseDown)):(o?(e=(r=t.rect).x-a,r=r.y-c,t.rect.x=o.rect.x+e,t.rect.y=o.rect.y+r):(t.rect.x=n-t.rect.width/2<<0,t.rect.y=i-t.rect.height/2<<0,o=t),void(t.type===b.Line?s.addLine(Object.assign({name:"line",from:new u(t.rect.x,t.rect.y),fromArrow:s.data.fromArrow,to:new u(t.rect.x+t.rect.width,t.rect.y+t.rect.height),toArrow:s.data.toArrow,strokeStyle:s.options.color},t),!0):s.addNode(t,!0)));var e,r}),this.divLayer.canvas.focus()},zr.prototype.addNode=function(e,t){var r=this;return void 0===t&&(t=!1),Oe[e.name]?(e.TID=this.id,!(e=!e.init?new Ge(e):e).strokeStyle&&this.options.color&&(e.strokeStyle=this.options.color),o.forEach(function(t){e[t]||(e[t]=r.options[t])}),1!==this.data.scale&&e.scale(this.data.scale),this.data.pens.push(e),t&&("echarts"===e.name?setTimeout(function(){r.activeLayer.pens=[e],r.render()},50):this.activeLayer.pens=[e]),"graffiti"===e.name&&e.doing?(this.moveIn.type=Wr.Graffiti,this.moveIn.hoverNode=e):(this.render(),this.animate(!0),this.cache()),this.dispatch("addNode",e),e):null},zr.prototype.addLine=function(t,e){return void 0===e&&(e=!1),this.data.locked?null:(t.type===b.Node&&(t.isNode=!0),t.TID=this.id,t.clone||(t=new Ke(t)).calcControlPoints(!0),1!==this.data.scale&&(t.fontSize*=this.data.scale),this.data.pens.push(t),"lines"===t.name&&t.doing?(this.activeLayer.clear(),this.hoverLayer.line=void 0,this.moveIn.type=Wr.Lines,this.moveIn.hoverLine=t):e&&(this.activeLayer.setPens([t]),this.render(),this.animate(!0),this.cache(),this.dispatch("addLine",t)),t)},zr.prototype.render=function(t){if((t=void 0===t?!1:t)&&(this.activeLayer.pens=[],this.hoverLayer.node=void 0,this.hoverLayer.line=void 0),this.rendering)return this;this.rendering=!0,this.offscreen.render(),this.canvas.render(),this.rendering=!1},zr.prototype.open=function(t){t&&t.mqttOptions&&!t.mqttOptions.customClientId&&(t.mqttOptions.clientId=h()),this.canvas.clearBkImg(),this.data=nr(t,this.id),this.subscribeSocket(),d.Store.set(this.generateStoreKey("LT:scale"),this.data.scale),this.dispatch("scale",this.data.scale),d.Store.set("LT:bkColor",this.data.bkColor),this.lock(this.data.locked),this.caches.list=[],this.cache(),this.divLayer.clear(),this.animateLayer.stop(),this.render(!0),this.parentElem.scrollLeft=0,this.parentElem.scrollTop=0,this.animate(!0),this.openSocket(),this.openMqtt(),this.dispatch("opened")},zr.prototype.openSocket=function(t){var e=this;this.closeSocket(),(t||this.data.websocket)&&(this.socket=new Br(t||this.data.websocket,function(t){1!==e.data.socketEvent&&e.doSocket(t.data),e.data.socketEvent&&e.dispatch("websocket",t.data)}))},zr.prototype.closeSocket=function(){this.socket&&this.socket.close()},zr.prototype.openMqtt=function(t,e){var r=this;this.closeMqtt(),(t||this.data.mqttUrl)&&(this.mqtt=new jr(t||this.data.mqttUrl,e||this.data.mqttOptions,this.data.mqttTopics,function(t,e){1!==r.data.socketEvent&&r.doSocket(e.toString(),w.Mqtt),r.data.socketEvent&&r.dispatch("mqtt",{topic:t,message:e})}))},zr.prototype.closeMqtt=function(){this.mqtt&&this.mqtt.close()},zr.prototype.doSocket=function(t,n){var e=this;void 0===n&&(n=w.WebSocket);try{t=JSON.parse(t),(t=!Array.isArray(t)?[t]:t).forEach(function(t){var r=[];t.actions&&(r=t.actions,delete t.actions),y(t.id||t.tag,e.data.pens).forEach(function(e){(e.id===t.id||e.tags&&-1<e.tags.indexOf(t.tag))&&(e.fromData(e,t),e.doWheres(),e.events&&e.events.forEach(function(t){t.type===n&&r.push(t)}),r&&r.forEach(function(t){e.doAction(t)}))}),e.willRender()})}catch(t){console.warn(t)}},zr.prototype.overflow=function(t){void 0===t&&(t=50);var e=this.getRect(),r=e.width,n=e.height,n={width:r=(r=r<e.ex?e.ex+t:r)<this.canvas.width?this.canvas.width:r,height:n=(n=n<e.ey?e.ey+t:n)<this.canvas.height?this.canvas.height:n};return this.resize(n),n},zr.prototype.setNodeText=function(){this.inputObj.text=this.input.value,"image"===this.inputObj.name&&this.inputObj.init(),this.input.style.zIndex="-1",this.input.style.left="-1000px",this.input.style.width="0",this.cache(),this.offscreen.render(),this.dispatch("setText",this.inputObj),this.inputObj=void 0},zr.prototype.getMoveIn=function(t){if(!(this.moveIn.type>=Wr.Graffiti))if(this.lastHoverNode=this.moveIn.hoverNode,this.lastHoverLine=this.moveIn.hoverLine,this.moveIn.type=Wr.None,this.moveIn.hoverNode=void 0,this.moveIn.lineControlPoint=void 0,this.moveIn.hoverLine=void 0,this.hoverLayer.hoverAnchorIndex=-1,this.data.locked||1===this.activeLayer.pens.length&&this.activeLayer.pens[0].type||this.activeLayer.locked()||!this.activeLayer.rotateCPs[0]||!this.activeLayer.rotateCPs[0].hit(t,15)){if(1<this.activeLayer.pens.length&&f(t,this.activeLayer.sizeCPs)&&(this.moveIn.type=Wr.Nodes),!this.data.locked&&!this.activeLayer.locked()&&!this.options.hideSizeCP&&(1<this.activeLayer.pens.length||!this.activeLayer.pens[0].type&&!this.activeLayer.pens[0].hideSizeCP))for(var e=0;e<this.activeLayer.sizeCPs.length;++e)if(this.activeLayer.sizeCPs[e].hit(t,10))return this.moveIn.type=Wr.ResizeCP,this.moveIn.activeAnchorIndex=e,void(this.divLayer.canvas.style.cursor=Kr[e]);if(!this.data.locked)for(var r=0,n=this.activeLayer.pens;r<n.length;r++){var i=n[r];if(i instanceof Ke&&!i.locked){for(e=0;e<i.controlPoints.length;++e)if(!i.locked&&i.controlPoints[e].hit(t,10))return i.controlPoints[e].id=e,this.moveIn.type=Wr.LineControlPoint,this.moveIn.lineControlPoint=i.controlPoints[e],this.moveIn.hoverLine=i,void(this.divLayer.canvas.style.cursor="pointer");if(this.inLine(t,i))return}}this.divLayer.canvas.style.cursor="default";for(var o,e=this.data.pens.length-1;-1<e;--e){if(this.data.pens[e].type===b.Node&&this.inNode(t,this.data.pens[e]))return void(o&&this.moveIn.type!==Wr.HoverAnchors&&this.inLine(t,o));this.data.pens[e].type===b.Line&&this.inLine(t,this.data.pens[e])&&(o=this.data.pens[e])}}else{this.moveIn.type=Wr.Rotate;var s=this.options.rotateCursor;this.divLayer.canvas.style.cursor=s.includes("/")?'url("'+s+'"), auto':s}},zr.prototype.inChildNode=function(t,e){if(!e)return null;for(var r=e.length-1;-1<r;--r){var n=e[r];if(n.type!==b.Line){var i=this.inChildNode(t,n.children);if(i)return i;if(i=this.inNode(t,n,!0))return i}else if(this.inLine(t,n))return n}return null},zr.prototype.inNode=function(t,e,r){if(void 0===r&&(r=!1),this.data.locked===Ve.NoEvent||!e.visible||e.locked===Ve.NoEvent)return null;var n=this.inChildNode(t,e.children);if(n)return this.moveIn.type<Wr.HoverAnchors&&(this.moveIn.type=Wr.Nodes,n.stand?this.moveIn.activeNode=n:this.moveIn.activeNode=e),n;if(e.hitInSelf(t)){if(this.moveIn.hoverNode=e,this.moveIn.type=Wr.Nodes,this.data.locked||e.locked?this.divLayer.canvas.style.cursor=this.options.hoverCursor:this.divLayer.canvas.style.cursor="move",!this.data.locked&&!e.locked&&!(this.options.hideAnchor||e.hideAnchor||e.rect.width<20||e.rect.height<20)){for(var i=0;i<e.rotatedAnchors.length;++i)if(e.rotatedAnchors[i].hit(t,this.options.anchorSize)&&(this.mouseDown||e.rotatedAnchors[i].mode!==Ye.In)){this.moveIn.type=Wr.HoverAnchors,this.moveIn.hoverAnchorIndex=i,this.hoverLayer.hoverAnchorIndex=i,this.divLayer.canvas.style.cursor="crosshair";break}this.options.autoAnchor&&e.rect.center.hit(t,this.options.anchorSize)&&(this.moveIn.hoverNode=e,this.moveIn.type=Wr.AutoAnchor,this.divLayer.canvas.style.cursor="crosshair")}return r||(this.moveIn.activeNode=this.moveIn.hoverNode),e}if(this.options.hideAnchor||e.hideAnchor||this.data.locked||e.locked)return null;if(e.hitInSelf(t,this.options.anchorSize))for(i=0;i<e.rotatedAnchors.length;++i)if(e.rotatedAnchors[i].hit(t,this.options.anchorSize)&&(this.mouseDown||e.rotatedAnchors[i].mode!==Ye.In))return this.moveIn.hoverNode=e,this.moveIn.type=Wr.HoverAnchors,this.moveIn.hoverAnchorIndex=i,this.hoverLayer.hoverAnchorIndex=i,this.divLayer.canvas.style.cursor="crosshair",r||(this.moveIn.activeNode=e),e;return null},zr.prototype.inLine=function(t,e){if(this.data.locked===Ve.NoEvent||!e.visible||e.locked===Ve.NoEvent)return null;if(e.children)for(var r=0,n=e.children;r<n.length;r++){var i=n[r],i=this.inLine(t,i);if(i)return i}if(e.from){if(e.from.hit(t,this.options.anchorSize))return this.moveIn.type=Wr.LineFrom,this.moveIn.hoverLine=e,this.data.locked||e.locked?this.divLayer.canvas.style.cursor=this.options.hoverCursor:this.divLayer.canvas.style.cursor="move",e;if(e.to.hit(t,this.options.anchorSize))return this.moveIn.type=Wr.LineTo,this.moveIn.hoverLine=e,this.data.locked||e.locked?this.divLayer.canvas.style.cursor=this.options.hoverCursor:this.divLayer.canvas.style.cursor="move",e;if(e.pointIn(t))return this.moveIn.type=Wr.Line,this.moveIn.hoverLine=e,this.divLayer.canvas.style.cursor=this.options.hoverCursor,e}return null},zr.prototype.getLineDock=function(t,e){void 0===e&&(e=Ye.Default),this.hoverLayer.dockAnchor=void 0;for(var r=0,n=this.data.pens;r<n.length;r++){var i=n[r];if(i instanceof Ge){var o=i.hit(t,10);if(o){if(o.type===b.Line){if(o.from.hit(t,10)){t.x=o.from.x,t.y=o.from.y,this.hoverLayer.dockAnchor=o.from;break}if(o.to.hit(t,10)){t.x=o.to.x,t.y=o.to.y,this.hoverLayer.dockAnchor=o.to;break}break}this.hoverLayer.node=o,this.options.autoAnchor&&o.rect.center.hit(t,10)&&(t.id=o.id,t.autoAnchor=!0,t.x=o.rect.center.x,t.y=o.rect.center.y,this.hoverLayer.dockAnchor=o.rect.center);for(var s=0;s<o.rotatedAnchors.length;++s)if((!o.rotatedAnchors[s].mode||o.rotatedAnchors[s].mode===e)&&o.rotatedAnchors[s].hit(t,10)){t.id=o.id,t.anchorIndex=s,t.autoAnchor=!1,t.direction=o.rotatedAnchors[s].direction,t.x=o.rotatedAnchors[s].x,t.y=o.rotatedAnchors[s].y,this.hoverLayer.dockAnchor=o.rotatedAnchors[s];break}if(this.hoverLayer.dockAnchor)break}}else if(i instanceof Ke&&i.id!==this.hoverLayer.line.id)if(i.children)for(var a=0,c=i.children;a<c.length;a++){var h=c[a];if(h.from.hit(t,10)){t.x=h.from.x,t.y=h.from.y,this.hoverLayer.dockAnchor=h.from,0;break}if(h.to.hit(t,10)){t.x=h.to.x,t.y=h.to.y,this.hoverLayer.dockAnchor=h.to,0;break}if(h.controlPoints)for(var l=0,u=h.controlPoints;l<u.length;l++)if((f=u[l]).hit(t,10)){t.x=f.x,t.y=f.y,this.hoverLayer.dockAnchor=f,0;break}}else if(i.from.hit(t,10))t.x=i.from.x,t.y=i.from.y,this.hoverLayer.dockAnchor=i.from;else if(i.to.hit(t,10))t.x=i.to.x,t.y=i.to.y,this.hoverLayer.dockAnchor=i.to;else if(i.controlPoints)for(var f,d=0,p=i.controlPoints;d<p.length;d++)if((f=p[d]).hit(t,10)){t.x=f.x,t.y=f.y,this.hoverLayer.dockAnchor=f;break}}return t},zr.prototype.getPensInRect=function(e){var r=this;e.width<0&&(e.width=-e.width,e.x=e.ex,e.ex=e.x+e.width),e.height<0&&(e.height=-e.height,e.y=e.ey,e.ey=e.y+e.height),this.activeLayer.pens=[];for(var t=0,n=this.data.pens;t<n.length;t++){var i=n[t];i.locked!==Ve.NoEvent&&(i instanceof Ge&&e.hitByRect(i.rect)&&this.activeLayer.add(i),i instanceof Ke&&(i.children?i.children.forEach(function(t){e.hit(t.from)&&e.hit(t.to)&&r.activeLayer.add(t)}):e.hit(i.from)&&e.hit(i.to)&&this.activeLayer.add(i)))}},zr.prototype.getAngle=function(t){if(t.x===this.activeLayer.rect.center.x)return t.y<=this.activeLayer.rect.center.y?0:180;if(t.y===this.activeLayer.rect.center.y)return t.x<this.activeLayer.rect.center.x?270:90;var e=t.x-this.activeLayer.rect.center.x,r=t.y-this.activeLayer.rect.center.y,t=Math.atan(Math.abs(e/r))/(2*Math.PI)*360;return 0<e&&0<r?t=180-t:e<0&&0<r?t+=180:e<0&&r<0&&(t=360-t),1===this.activeLayer.pens.length?t-this.activeLayer.pens[0].rotate:t},zr.prototype.showInput=function(t){var e=(this.inputObj=t).getTextRect();this.input.value=t.text||"",this.input.style.left=e.x+"px",this.input.style.top=e.y+"px",this.input.style.width=e.width+"px",this.input.style.height=e.height+"px",this.input.style.zIndex="1000",t.rotate/360?this.input.style.transform="rotate("+t.rotate+"deg)":this.input.style.transform=void 0,this.input.focus()},zr.prototype.getRect=function(t){return tr(t=t||this.data.pens)},zr.prototype.getDockPos=function(t,e,r){this.hoverLayer.dockLineX=0;var n={x:this.hoverLayer.dockLineY=0,y:0};if(r||this.options.disableDockLine)return n;for(var i=10,o=10,s=0,a=this.activeLayer.dockWatchers;s<a.length;s++)for(var c=a[s],h=0,l=this.data.pens;h<l.length;h++){var u=l[h];if(u instanceof Ge&&!this.activeLayer.has(u)&&"text"!==u.name){u.dockWatchers||u.getDockWatchers();for(var f=0,d=u.dockWatchers;f<d.length;f++){var p=d[f];Math.abs(p.x-c.x-t)<i&&(i=-99999,n.x=p.x-c.x,this.hoverLayer.dockLineX=0|p.x),Math.abs(p.y-c.y-e)<o&&(o=-99999,n.y=p.y-c.y,this.hoverLayer.dockLineY=0|p.y)}}}return n},zr.prototype.cache=function(){this.caches.index<this.caches.list.length-1&&this.caches.list.splice(this.caches.index+1,this.caches.list.length-this.caches.index-1),this.caches.list.push(this.pureData()),this.caches.list.length>this.options.cacheLen&&this.caches.list.shift(),this.caches.index=this.caches.list.length-1},zr.prototype.cacheReplace=function(t){if(t&&t.length){for(var e={},r=0,n=t.length;r<n;r++){var i=t[r],o=i.id;i instanceof Ge?e[o]=new Ge(i):i instanceof Ke&&(e[o]=new Ke(i))}var s=this.caches.list[0];if(s)for(r=0,n=s.pens.length;r<n;r++)e[o=s.pens[r].id]&&(s.pens[r]=e[o])}},zr.prototype.undo=function(t,e){void 0===t&&(t=!1),!e&&this.data.locked||this.caches.index<1||(this.divLayer.clear(!0),this.animateLayer.stop(),this.data=nr(this.caches.list[--this.caches.index],this.id),this.render(!0),this.divLayer.render(),t&&this.caches.list.splice(this.caches.index+1,this.caches.list.length-this.caches.index-1),this.dispatch("undo",this.data))},zr.prototype.redo=function(t){!t&&this.data.locked||this.caches.index>this.caches.list.length-2||(this.divLayer.clear(!0),this.data=nr(this.caches.list[++this.caches.index],this.id),this.render(!0),this.divLayer.render(),this.dispatch("redo",this.data))},zr.prototype.toImage=function(t,e){void 0===t&&(t=0),void 0===e&&(e=void 0);var r=this.getRect(),t=Nr(t||0);r.x-=t[3],r.y-=t[0],r.width+=t[3]+t[1],r.height+=t[0]+t[2];var n=this.offscreen.getDpiRatio();r.scale(n);t=document.createElement("canvas");t.width=r.width,t.height=r.height;var i=t.getContext("2d");(this.data.bkColor||this.options.bkColor)&&(i.fillStyle=this.data.bkColor||this.options.bkColor,i.fillRect(0,0,t.width,t.height));for(var o=0,s=this.data.pens;o<s.length;o++){var a=s[o],c=void 0;a.type?c=new Ke(a):((c=new Ge(a,!0)).animateFrames=[],c.img=a.img,c.elementId="",c.elementLoaded=!0,c.elementRendered=!0),c.scale(n,r.center),c.translate(-r.x,-r.y,!0),c.render(i)}return i.scale(1/n,1/n),this.data.bkImage&&i.drawImage(this.canvas.bkImg,0,0),e&&t.toBlob(e),t.toDataURL("image/png",1)},zr.prototype.saveAsImage=function(t,e){void 0===e&&(e=0);var r=document.createElement("a");r.setAttribute("download",t||"le5le.topology.png"),r.setAttribute("href",this.toImage(e));e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),r.dispatchEvent(e)},zr.prototype.delete=function(t,e){if(!this.data.locked||e){var r=[];if("string"==typeof t)r=c(t,this.data.pens);else for(var n=t||this.activeLayer.pens,i=0;i<n.length;i++){var o,s=n[i];s.type!==b.Line||!s.parentId||(o=y(s.parentId,this.data.pens)[0])&&"lines"===o.name&&(s=o),c(s.id,this.data.pens).length&&(r.push(s),--i,s.type===b.Node&&this.divLayer.removeDiv(s),this.options.disableEmptyLine&&this.delEmptyLines(s.id),this.animateLayer.pens.delete(s.id))}r.length&&(this.render(!0),this.cache(),this.dispatch("delete",r))}},zr.prototype.deleteAnchors=function(t,e){this.data.locked&&!e||(t||this.activeLayer.pens).forEach(function(t){t.type===b.Node&&(t.manualAnchors=void 0,t.calcAnchors())})},zr.prototype.delEmptyLines=function(t){for(var e,r=0;r<this.data.pens.length;r++)this.data.pens[r].type===b.Line&&((e=this.data.pens[r]).from.id&&e.to.id&&e.from.id!==t&&e.to.id!==t||(this.data.pens.splice(r,1),this.animateLayer.pens.delete(e.id),--r))},zr.prototype.cut=function(){if(!this.data.locked){this.clipboard=nr({pens:[]});for(var t=0;t<this.activeLayer.pens.length;t++){var e=this.activeLayer.pens[t];this.clipboard.pens.push(e.clone());var r=this.findIndex(e);-1<r&&(e.type===b.Node&&this.divLayer.removeDiv(this.data.pens[r]),this.data.pens.splice(r,1))}this.cache(),this.activeLayer.clear(),this.hoverLayer.node=void 0,this.moveIn.hoverLine=void 0,this.moveIn.hoverNode=void 0,this.render(),this.dispatch("delete",this.clipboard.pens)}},zr.prototype.copy=function(){this.clipboard=nr({pens:[]});for(var t=0,e=this.activeLayer.pens;t<e.length;t++){var r=e[t];this.clipboard.pens.push(r.clone())}this.dispatch("copy",this.clipboard)},zr.prototype.paste=function(){if(this.clipboard&&!this.data.locked){this.hoverLayer.node=void 0,this.hoverLayer.line=void 0,this.activeLayer.pens=[];for(var t={},e=0,r=this.clipboard.pens;e<r.length;e++){var n=r[e];if(n.type===b.Node&&(this.newId(n,t),n.rect.x+=20,n.rect.ex+=20,n.rect.y+=20,n.rect.ey+=20,n.init()),n instanceof Ke){n.id=h(),n.from=new u(n.from.x+20,n.from.y+20,n.from.direction,n.from.anchorIndex,t[n.from.id]),n.to=new u(n.to.x+20,n.to.y+20,n.to.direction,n.to.anchorIndex,t[n.to.id]);for(var i=[],o=0,s=n.controlPoints;o<s.length;o++){var a=s[o];i.push(new u(a.x+20,a.y+20))}n.controlPoints=i}this.data.pens.push(n),this.activeLayer.add(n)}this.render(),this.animate(!0),this.cache(),this.copy(),1<this.clipboard.pens.length?this.dispatch("paste",{pens:this.clipboard.pens}):0<this.activeLayer.pens.length&&this.dispatch("paste",this.activeLayer.pens[0])}},zr.prototype.newId=function(t,e){var r=t.id;if(t.id=h(),e[r]=t.id,t.children)for(var n=0,i=t.children;n<i.length;n++){var o=i[n];this.newId(o,e)}},zr.prototype.animate=function(t){this.animateLayer.readyPlay(void 0,t=void 0===t?!1:t),this.animateLayer.animate()},zr.prototype.updateProps=function(t,e){void 0===t&&(t=!0);for(var r=0,n=e=e||this.activeLayer.pens;r<n.length;r++){var i,o=n[r];o instanceof Ge&&(o.autoRect&&(i=D(this.canvas.canvas.getContext("2d"),o),o.rect.width=i.width+2*o.lineWidth,o.rect.height=i.height),o.init(),o.initRect())}this.activeLayer.updateLines(e),this.activeLayer.calcControlPoints(),this.activeLayer.saveNodeRects(),this.render(),t&&this.cache()},zr.prototype.lock=function(t){this.data.locked=t;for(var e=0,r=this.data.pens;e<r.length;e++){var n=r[e];n.addToDiv&&n.addToDiv()}this.dispatch("locked",this.data.locked)},zr.prototype.lockPens=function(t,e){for(var r=0,n=this.data.pens;r<n.length;r++)for(var i=n[r],o=0,s=t;o<s.length;o++){var a=s[o];if(i.id===a.id){i.locked=e,i.addToDiv&&i.addToDiv();break}}this.dispatch("lockPens",{pens:t,lock:e})},zr.prototype.up=function(t,e){e=e||this.data.pens;var r=this.findIndex(t,e);-1<r&&r!==e.length-1?(e.splice(r+2,0,e[r]),e.splice(r,1)):(e=l(e,t))&&this.up(t,e.children)},zr.prototype.top=function(t,e){e=e||this.data.pens;var r=this.findIndex(t,e);-1<r?(e.push(e[r]),e.splice(r,1)):(e=l(e,t))&&this.top(t,e.children)},zr.prototype.down=function(t,e){e=e||this.data.pens;var r=this.findIndex(t,e);-1<r&&0!==r?(e.splice(r-1,0,e[r]),e.splice(r+1,1)):(e=l(e,t))&&this.down(t,e.children)},zr.prototype.bottom=function(t,e){e=e||this.data.pens;var r=this.findIndex(t,e);-1<r?(e.unshift(e[r]),e.splice(r+1,1)):(e=l(e,t))&&this.bottom(t,e.children)},zr.prototype.getParent=function(t){return l(this.data.pens,t)},zr.prototype.combine=function(t,e){void 0===e&&(e=!1),t=t||this.activeLayer.pens;for(var r=this.getRect(t),n=0,i=t;n<i.length;n++){var o=i[n];-1<(a=this.findIndex(o))&&this.data.pens.splice(a,1)}for(var s=new Ge({name:"combine",rect:new x(r.x,r.y,r.width,r.height),text:"",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,strokeStyle:"transparent",children:[]}),a=0;a<t.length;++a)if(t[a].type===b.Node&&r.width===t[a].rect.width&&r.height===t[a].rect.height){(s=t[a]).children||(s.children=[]),t.splice(a,1);break}for(var c=0,h=t;c<h.length;c++)(o=h[c]).stand=e,o.parentId=s.id,o.calcRectInParent(s),s.children.push(o);this.data.pens.push(s),this.activeLayer.setPens([s]),this.dispatch("combine",s),this.cache()},zr.prototype.uncombine=function(t){if((t=t||this.activeLayer.pens[0])instanceof Ge){for(var e=0,r=t.children;e<r.length;e++){var n=r[e];n.parentId=void 0,n.rectInParent=void 0,n.locked=Ve.None,this.data.pens.push(n)}var i=this.findIndex(t);-1<i&&"combine"===t.name?this.data.pens.splice(i,1):t.children=void 0,this.cache(),this.activeLayer.clear(),this.hoverLayer.clear(),this.dispatch("uncombine",t)}},zr.prototype.find=function(t,e,r){Array.isArray(e)?n=e:(n=this.data.pens,r=e);var n=y(t,n);return r?n:0===n.length?null:1===n.length?n[0]:n},zr.prototype.findIndex=function(e,t){return(t=t||this.data.pens).findIndex(function(t){return t.id===e.id})},zr.prototype.play=function(t,e){this.divLayer.play(t,e)},zr.prototype.translate=function(t,e,r,n){r||(this.lastTranlated.x=0,this.lastTranlated.y=0);for(var i=t-this.lastTranlated.x,o=e-this.lastTranlated.y,s=0,a=this.data.pens;s<a.length;s++)a[s].translate(i,o);this.data.bkImageRect&&!this.data.bkImageStatic&&this.data.bkImageRect.translate(i,o),d.Store.set(this.generateStoreKey("LT:updateLines"),this.data.pens),this.lastTranlated.x=t,this.lastTranlated.y=e,this.render(),this.cache(),n||this.dispatch("translate",{x:t,y:e})},zr.prototype.scale=function(t,e){this.data.scale*t<this.options.minScale?(t=this.options.minScale/this.data.scale,this.data.scale=this.options.minScale):this.data.scale*t>this.options.maxScale?(t=this.options.maxScale/this.data.scale,this.data.scale=this.options.maxScale):this.data.scale=Math.round(this.data.scale*t*100)/100,e=e||this.getRect().center;for(var r=0,n=this.data.pens;r<n.length;r++)n[r].scale(t,e);this.data.bkImageRect&&this.data.bkImageRect.scale(t,e),d.Store.set(this.generateStoreKey("LT:updateLines"),this.data.pens),d.Store.set(this.generateStoreKey("LT:scale"),this.data.scale),this.render(),this.cache(),this.dispatch("scale",this.data.scale)},zr.prototype.scaleTo=function(t,e){this.scale(t/this.data.scale,e)},zr.prototype.round=function(){for(var t=0,e=this.data.pens;t<e.length;t++){var r=e[t];r instanceof Ge&&r.round()}},zr.prototype.centerView=function(t){if(this.hasView()){var e=this.getRect(),r=this.getViewCenter(t),t=e.center;this.translate(r.x-t.x,r.y-t.y);e=this.canvas.parentElem,r=(e.scrollWidth-e.offsetWidth)/2,t=(e.scrollHeight-e.offsetHeight)/2;return e.scrollTo(r,t),!0}},zr.prototype.fitView=function(t){var e,r,n;this.hasView()&&(n=(r=this.canvas.parentElem).offsetWidth,e=r.offsetHeight,this.resize({width:n,height:e}),this.centerView(t),r=Nr(t||this.options.viewPadding),t=this.getRect(),n=(n-r[1]-r[3])/t.width,t=(e-r[0]-r[2])/t.height,this.scale(t<n?t:n))},zr.prototype.hasView=function(){var t=this.getRect();return!(99999===t.width||99999===t.height)},zr.prototype.getViewCenter=function(t){var e=Nr(t||this.options.viewPadding),r=this.canvas,t=r.width,r=r.height;return{x:(t-e[1]-e[3])/2+e[3],y:(r-e[0]-e[2])/2+e[0]}},zr.prototype.generateStoreKey=function(t){return this.id+"-"+t},zr.prototype.createMarkdownTip=function(){this.tipMarkdown=document.createElement("div"),this.tipMarkdown.className="topology-markdown",this.tipMarkdown.style.position="fixed",this.tipMarkdown.style.zIndex="-1",this.tipMarkdown.style.left="-9999px",this.tipMarkdown.style.padding="8px 0",this.tipMarkdownContent=document.createElement("div"),this.tipMarkdownContent.style.maxWidth="320px",this.tipMarkdownContent.style.outline="none",this.tipMarkdownContent.style.borderRadius="4px",this.tipMarkdownContent.style.backgroundColor="rgba(0,0,0,.6)",this.tipMarkdownContent.style.color="#fff",this.tipMarkdownContent.style.padding="8px 16px",this.tipMarkdownContent.style.lineHeight="1.8",this.tipMarkdownContent.style.overflowY="auto",this.tipMarkdownContent.style.minHeight="30px",this.tipMarkdownContent.style.maxHeight="400px",this.tipMarkdown.appendChild(this.tipMarkdownContent),this.tipMarkdownArrowUp=document.createElement("div"),this.tipMarkdownArrowUp.className="arrow",this.tipMarkdownArrowUp.style.position="absolute",this.tipMarkdownArrowUp.style.border="6px solid transparent",this.tipMarkdownArrowUp.style.backgroundColor="transparent",this.tipMarkdownArrowUp.style.left="50%",this.tipMarkdownArrowUp.style.transform="translateX(-50%)",this.tipMarkdownArrowUp.style.top="-4px",this.tipMarkdown.appendChild(this.tipMarkdownArrowUp),this.tipMarkdownArrowDown=document.createElement("div"),this.tipMarkdownArrowDown.className="arrow",this.tipMarkdownArrowDown.style.position="absolute",this.tipMarkdownArrowDown.style.border="6px solid transparent",this.tipMarkdownArrowDown.style.left="50%",this.tipMarkdownArrowDown.style.transform="translateX(-50%)",this.tipMarkdownArrowDown.style.backgroundColor="transparent",this.tipMarkdownArrowDown.style.bottom="-4px",this.tipMarkdown.appendChild(this.tipMarkdownArrowDown),document.body.appendChild(this.tipMarkdown)},zr.prototype.showTip=function(t,e){if(t&&t.id!==this.tip&&!1!==this.data.tooltip&&0!==this.data.tooltip){if(t.title)return this.divLayer.canvas.title=t.title,void(this.tip=t.id);t.tipId&&(this.tipElem=document.getElementById(t.tipId));var r,n,i,o=this.tipElem;if(t.markdown){var o=this.tipMarkdown,s=window.marked;this.tipMarkdownContent.innerHTML=s?s(t.markdown):t.markdown;for(var a=this.tipMarkdownContent.getElementsByTagName("A"),c=0;c<a.length;++c)a[c].setAttribute("target","_blank")}o&&(r=this.parentElem.getBoundingClientRect(),n=o.getBoundingClientRect(),i=(r.left||r.x)+e.x-(n.width-t.rect.width)/2,s=(r.top||r.y)+e.y-n.height-t.rect.height,t.type||(i=(r.left||r.x)+t.rect.x-(n.width-t.rect.width)/2,s=(r.top||r.y)+t.rect.ey-n.height-t.rect.height),0<s?(this.tipMarkdownArrowUp.style.borderBottomColor="transparent",this.tipMarkdownArrowDown.style.borderTopColor="rgba(0,0,0,.6)"):(s=t.type?(r.top||r.y)+e.y:(r.top||r.y)+t.rect.ey,this.tipMarkdownArrowUp.style.borderBottomColor="rgba(0,0,0,.6)",this.tipMarkdownArrowDown.style.borderTopColor="transparent"),o.style.display="block",o.style.position="fixed",o.style.left=i+"px",o.style.top=s+"px",o.style.zIndex="100",this.tip=t.id,this.dispatch("tip",o))}},zr.prototype.hideTip=function(){this.tip&&(this.tipMarkdown.style.left="-9999px",this.tipMarkdown.style.zIndex="-1",this.tipElem&&(this.tipElem.style.left="-9999px",this.tipElem.style.zIndex="-1",this.tipElem=void 0),this.divLayer.canvas.title="",this.tip="")},zr.prototype.scroll=function(t,e){var r=this;this.scrolling||(this.scrolling=!0,this.parentElem.scrollLeft+=t,this.parentElem.scrollTop+=e,setTimeout(function(){r.scrolling=!1},700))},zr.prototype.toComponent=function(t){t=t||this.data.pens;for(var e=this.getRect(t),r=new Ge({name:"combine",rect:new x(e.x,e.y,e.width,e.height),text:"",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,strokeStyle:"transparent",children:[]}),n=0,i=t;n<i.length;n++)if((o=i[n]).type===b.Node&&e.width===o.rect.width&&e.height===o.rect.height){(r=o).children||(r.children=[]);break}for(var o,s=0,a=t;s<a.length;s++)(o=a[s])!==r&&(o.parentId=r.id,o.calcRectInParent(r),r.children.push(o));return r},zr.prototype.clearBkImg=function(){this.canvas.clearBkImg()},zr.prototype.dispatch=function(t,e){return this.options.on&&this.options.on(t,e),this.emit(t,e),this},zr.prototype.on=function(t,e){return this._emitter.on(t,e),this},zr.prototype.off=function(t,e){return this._emitter.off(t,e),this},zr.prototype.emit=function(t,e){return this._emitter.emit(t,e),this},zr.prototype.getValue=function(t,e){void 0===e&&(e="text");t=this.find(t);if(t=t&&(Array.isArray(t)?t[0]:t))return t[e]},zr.prototype.setValue=function(e,r,n){void 0===n&&(n="text"),y(e="object"==typeof e?(r=e).id||e.tag:e,this.data.pens).forEach(function(t){(t.id===e||t.tags&&-1<t.tags.indexOf(e))&&("object"==typeof r?t.fromData(t,r):t[n]=r,t.doWheres(),t.type===b.Node&&(t.animateReady=Ge.cloneState(t)))}),this.willRender()},zr.prototype.willRender=function(){var t=this;this.actionTimer&&clearTimeout(this.actionTimer),this.actionTimer=setTimeout(function(){t.render(),t.actionTimer=void 0},500)},zr.prototype.setLineName=function(e,t){void 0===t&&(t=!0),this.data.pens.forEach(function(t){t.type&&(t.name=e,t.calcControlPoints())}),t&&this.render()},zr.prototype.setColor=function(t){this.options.color=t,d.Store.set(this.generateStoreKey("LT:color"),t),this.options.fontColor=t,d.Store.set(this.generateStoreKey("LT:fontColor"),t)},zr.prototype.setFontColor=function(t){this.options.fontColor=t,d.Store.set(this.generateStoreKey("LT:fontColor"),t)},zr.prototype.setIconColor=function(t){d.Store.set(this.generateStoreKey("LT:iconColor"),t)},zr.prototype.setBkColor=function(t){this.data.bkColor=t,d.Store.set("LT:bkColor",t)},zr.prototype.pureData=function(){var o=this,t=JSON.parse(JSON.stringify(this.data));return t.pens.forEach(function(t){for(var e in t)void 0!==t[e]&&void 0!==t[e]||delete t[e];if(delete t.TID,delete t.animateCycleIndex,delete t.img,delete t.lastImage,delete t.fillImg,delete t.strokeImg,delete t.lastFillImage,delete t.lastStrokeImage,delete t.imgNaturalWidth,delete t.imgNaturalHeight,delete t.anchors,delete t.rotatedAnchors,delete t.dockWatchers,delete t.elementLoaded,delete t.elementRendered,delete t.animateReady,t.animateFrames&&t.animateFrames.length)for(var r=0,n=t.animateFrames;r<n.length;r++){var i=n[r];i.initState&&(delete i.initState.TID,delete i.initState.animateCycleIndex,delete i.initState.img,delete i.initState.lastImage,delete i.initState.imgNaturalWidth,delete i.initState.imgNaturalHeight,delete i.initState.anchors,delete i.initState.rotatedAnchors,delete i.initState.dockWatchers,delete i.initState.elementLoaded,delete i.initState.elementRendered,delete i.initState.fillImg,delete i.initState.strokeImg,delete i.initState.lastFillImage,delete i.initState.lastStrokeImage),i.state&&(delete i.state.TID,delete i.state.animateCycleIndex,delete i.state.img,delete i.state.lastImage,delete i.state.imgNaturalWidth,delete i.state.imgNaturalHeight,delete i.state.anchors,delete i.state.rotatedAnchors,delete i.state.dockWatchers,delete i.state.elementLoaded,delete i.state.elementRendered,delete i.state.fillImg,delete i.state.strokeImg,delete i.state.lastFillImage,delete i.state.lastStrokeImage)}o.pureDataChildren(t)}),t},zr.prototype.pureDataChildren=function(t){var r=this;t.children&&t.children.forEach(function(t){for(var e in t)void 0!==t[e]&&void 0!==t[e]&&""!==t[e]||delete t[e];delete t.TID,delete t.animateCycleIndex,delete t.img,delete t.lastImage,delete t.imgNaturalWidth,delete t.imgNaturalHeight,delete t.anchors,delete t.rotatedAnchors,delete t.dockWatchers,delete t.elementLoaded,delete t.elementRendered,delete t.animateReady,r.pureDataChildren(t)})},zr.prototype.destroy=function(){switch(this.subcribe.unsubscribe(),this.subcribeRender.unsubscribe(),this.subcribeImage.unsubscribe(),this.subcribeAnimateEnd.unsubscribe(),this.subcribeAnimateMoved.unsubscribe(),this.subcribeMediaEnd.unsubscribe(),this.subcribeEmit.unsubscribe(),this.animateLayer.destroy(),this.divLayer.destroy(),this.canvas.destroy(),this.activeLayer.destroy(),this.hoverLayer.destroy(),this.offscreen.destroy(),document.body.removeChild(this.tipMarkdown),window.removeEventListener("resize",this.winResize),this.parentElem.removeEventListener("scroll",this.onScroll),window.removeEventListener("scroll",this.onScroll),document.removeEventListener("gesturestart",this.preventDefault),this.options.keydown){case n.Document:document.removeEventListener("keydown",this.onkeydown);break;case n.Canvas:this.divLayer.canvas.removeEventListener("keydown",this.onkeydown)}this.closeSocket(),this.closeMqtt(),this.socketFn&&(this.off("websocket",this.socketFn),this.off("mqtt",this.socketFn)),this.cache=void 0,this.data=void 0,window.topology=void 0},zr);function zr(t,e){var n,l=this;void 0===e&&(e={}),this.id=h(),this.data=nr(void 0,this.id),this.caches={index:0,list:[]},this.touchStart=0,this.input=document.createElement("textarea"),this.lastTranlated={x:0,y:0},this.moveIn={type:Wr.None,activeAnchorIndex:0,hoverAnchorIndex:0,hoverNode:void 0,hoverLine:void 0,activeNode:void 0,lineControlPoint:void 0},this.needCache=!1,this.tip="",this.scheduledAnimationFrame=!1,this.scrolling=!1,this.rendering=!1,this.onScroll=function(){l.canvasPos=l.divLayer.canvas.getBoundingClientRect()},this.preventDefault=function(t){t.preventDefault()},this.winResize=function(){var t;t&&clearTimeout(t),setTimeout(function(){l.resize()},100)},this.subscribeSocket=function(){if(!l.data.socketFn)return!1;l.data.socketEvent||(l.data.socketEvent=!0);try{var t=new Function("e",l.data.socketFn);l.socketFn&&(l.off("websocket",l.socketFn),l.off("mqtt",l.socketFn)),l.on("websocket",t),l.on("mqtt",t),l.socketFn=t}catch(t){return console.error("Create the function for socket:",t),!1}return!0},this.onMouseMove=function(h){if(!l.scheduledAnimationFrame&&l.data.locked!==Ve.NoEvent)if(!l.mouseDown||l.mouseDown.restore||1===h.buttons||2===h.buttons){if(l.mouseDown&&(l.data.locked||l.spaceDown||!l.moveIn.type)){var t=!!l.data.locked;switch(l.options.translateKey){case i.Right:2==h.buttons&&(t=!0);break;case i.Any:t=!0;break;case i.Ctrl:h.ctrlKey&&(t=!0);break;case i.Shift:h.shiftKey&&(t=!0);break;case i.Alt:h.altKey&&(t=!0);break;default:(h.ctrlKey||h.altKey||2==h.buttons)&&(t=!0)}if(l.spaceDown||!l.options.disableTranslate&&t&&l.data.locked<Ve.NoMove)return l.translate(h.x,h.y,!0),!1}l.data.locked&&l.mouseDown||(l.scheduledAnimationFrame=!0,l.raf&&cancelAnimationFrame(l.raf),l.raf=requestAnimationFrame(function(){if(l.raf=void 0,l.moveIn.type===Wr.Lines)return l.hoverLayer.line&&(l.hoverLayer.lineTo(new u(h.x,h.y),""),h.shiftKey||h.ctrlKey||h.altKey||2==h.buttons?(l.hoverLayer.line.name="curve",l.hoverLayer.line.calcControlPoints()):l.hoverLayer.line.name="line",l.render()),void(l.scheduledAnimationFrame=!1);if(!l.mouseDown)return l.getMoveIn(h),l.moveIn.hoverNode!==l.lastHoverNode&&(l.lastHoverNode&&(l.lastHoverNode.moveOut(),l.dispatch("moveOutNode",l.lastHoverNode),l.hideTip(),l.hoverLayer.node=void 0),l.moveIn.hoverNode&&(l.hoverLayer.node=l.moveIn.hoverNode,l.moveIn.hoverNode.moveIn(),l.dispatch("moveInNode",l.moveIn.hoverNode),l.showTip(l.moveIn.hoverNode,h))),l.moveIn.hoverLine===l.lastHoverLine||l.moveIn.hoverNode||(l.lastHoverLine&&(l.lastHoverLine.moveOut(),l.dispatch("moveOutLine",l.lastHoverLine),l.hideTip()),l.moveIn.hoverLine&&(l.hoverLayer.line=l.moveIn.hoverLine,l.moveIn.hoverLine.moveIn(),l.dispatch("moveInLine",l.moveIn.hoverLine),l.showTip(l.moveIn.hoverLine,h))),l.moveIn.type===Wr.LineControlPoint?l.hoverLayer.hoverLineCP=l.moveIn.lineControlPoint:l.hoverLayer.hoverLineCP&&(l.hoverLayer.hoverLineCP=void 0),l.moveIn.hoverNode===l.lastHoverNode&&l.moveIn.type!==Wr.HoverAnchors&&l.hoverLayer.lasthoverLineCP===l.hoverLayer.hoverLineCP||(l.hoverLayer.lasthoverLineCP=l.hoverLayer.hoverLineCP,l.render()),void(l.scheduledAnimationFrame=!1);var t=h.x+50>l.parentElem.clientWidth+l.parentElem.scrollLeft,e=h.y+50>l.parentElem.clientHeight+l.parentElem.scrollTop;switch(l.options.disableMoveOutParent||!t&&!e||(l.dispatch("moveOutParent",h),n=r=0,h.x+50>l.divLayer.canvas.clientWidth&&(r=-5),h.y+50>l.divLayer.canvas.clientHeight&&(n=-5),l.translate(r,n,!1)),l.hideTip(),l.moveIn.type){case Wr.None:l.hoverLayer.dragRect=new x(l.mouseDown.x,l.mouseDown.y,h.x-l.mouseDown.x,h.y-l.mouseDown.y);break;case Wr.Nodes:if(l.activeLayer.locked())break;var r=h.x-l.mouseDown.x,n=h.y-l.mouseDown.y;(r||n)&&(o=l.getDockPos(r,n,h.ctrlKey||h.shiftKey||h.altKey),l.activeLayer.move(o.x||r,o.y||n),l.needCache=!0);break;case Wr.ResizeCP:l.activeLayer.resize(l.moveIn.activeAnchorIndex,l.mouseDown,h),l.dispatch("resizePens",l.activeLayer.pens),l.needCache=!0;break;case Wr.LineTo:case Wr.HoverAnchors:case Wr.AutoAnchor:if(l.hoverLayer.dockAnchor&&l.hoverLayer.dockAnchor.hit(h,10))break;var i=l.data.toArrow;l.moveIn.hoverLine&&(i=l.moveIn.hoverLine.toArrow),l.hoverLayer.line&&(l.activeLayer.pens=[l.hoverLayer.line]);var o,s=l.hoverLayer.line.to.id;h.ctrlKey||h.shiftKey||h.altKey?l.hoverLayer.lineTo(new u(h.x,h.y),i):(s=(o=l.getLineDock(new u(h.x,h.y),Ye.In)).id,o.x===l.hoverLayer.line.from.x&&o.y===l.hoverLayer.line.from.y||l.hoverLayer.lineTo(o,i)),l.hoverLayer.line.to.id=s,l.hoverLayer.line.parentId&&(c=l.find(s))&&c.from&&(c.from.x=l.hoverLayer.line.to.x,c.from.y=l.hoverLayer.line.to.y),l.needCache=!0;break;case Wr.LineFrom:var a=l.hoverLayer.line.from.id;h.ctrlKey||h.shiftKey||h.altKey?l.hoverLayer.lineFrom(new u(h.x,h.y)):(a=(s=l.getLineDock(new u(h.x,h.y),Ye.Out)).id,l.hoverLayer.lineFrom(s)),l.hoverLayer.line.from.id=a,l.hoverLayer.line.parentId&&(c=l.find(a))&&c.to&&(c.to.x=l.hoverLayer.line.from.x,c.to.y=l.hoverLayer.line.from.y),l.needCache=!0;break;case Wr.Line:var a=h.x-l.mouseDown.x,c=h.y-l.mouseDown.y;(a||c)&&(l.activeLayer.move(a,c),l.hoverLayer.line.children?l.animateLayer.updateLines(l.hoverLayer.line.children):l.animateLayer.updateLines([l.hoverLayer.line]),l.needCache=!0);break;case Wr.LineControlPoint:l.moveIn.hoverLine.controlPoints[l.moveIn.lineControlPoint.id].x=h.x,l.moveIn.hoverLine.controlPoints[l.moveIn.lineControlPoint.id].y=h.y,l.moveIn.hoverLine.textRect=void 0,De[l.moveIn.hoverLine.name]&&De[l.moveIn.hoverLine.name].dockControlPointFn&&De[l.moveIn.hoverLine.name].dockControlPointFn(l.moveIn.hoverLine.controlPoints[l.moveIn.lineControlPoint.id],l.moveIn.hoverLine),l.needCache=!0,d.Store.set(l.generateStoreKey("LT:updateLines"),[l.moveIn.hoverLine]);break;case Wr.Rotate:l.activeLayer.pens.length&&(l.activeLayer.offsetRotate(l.getAngle(h)),l.activeLayer.updateLines()),l.needCache=!0;break;case Wr.Graffiti:l.moveIn.hoverNode.pushPoint(new u(h.x,h.y))}l.render(),l.scheduledAnimationFrame=!1}))}else l.onmouseup(h)},this.onmousedown=function(t){if(0===t.button||2===t.button){switch((l.mouseDown=t).altKey&&(l.divLayer.canvas.style.cursor="move"),l.inputObj&&l.setNodeText(),l.moveIn.type){case Wr.None:l.activeLayer.clear(),l.hoverLayer.clear(),l.dispatch("space",l.mouseDown);break;case Wr.Line:case Wr.LineControlPoint:t.ctrlKey||t.shiftKey?(l.activeLayer.add(l.moveIn.hoverLine),l.dispatch("multi",l.activeLayer.pens)):(l.activeLayer.pens=[l.moveIn.hoverLine],l.dispatch("line"+(2===t.button?"RightClick":""),l.moveIn.hoverLine)),l.hoverLayer.line=l.moveIn.hoverLine,l.hoverLayer.initLine=new Ke(l.moveIn.hoverLine),(l.data.locked||l.moveIn.hoverLine.locked)&&l.moveIn.hoverLine.click();break;case Wr.LineFrom:case Wr.LineTo:l.activeLayer.pens=[l.moveIn.hoverLine],l.dispatch("line",l.moveIn.hoverLine),l.hoverLayer.line=l.moveIn.hoverLine;break;case Wr.HoverAnchors:l.hoverLayer.line=l.addLine({name:l.data.lineName,from:new u(l.moveIn.hoverNode.rotatedAnchors[l.moveIn.hoverAnchorIndex].x,l.moveIn.hoverNode.rotatedAnchors[l.moveIn.hoverAnchorIndex].y,l.moveIn.hoverNode.rotatedAnchors[l.moveIn.hoverAnchorIndex].direction,l.moveIn.hoverAnchorIndex,l.moveIn.hoverNode.id),fromArrow:l.data.fromArrow,to:new u(l.moveIn.hoverNode.rotatedAnchors[l.moveIn.hoverAnchorIndex].x,l.moveIn.hoverNode.rotatedAnchors[l.moveIn.hoverAnchorIndex].y),toArrow:l.data.toArrow,strokeStyle:l.options.color,lineWidth:l.data.lineWidth}),l.dispatch("anchor",{anchor:l.moveIn.hoverNode.rotatedAnchors[l.moveIn.hoverAnchorIndex],anchorIndex:l.moveIn.hoverAnchorIndex,node:l.moveIn.hoverNode,line:l.hoverLayer.line});break;case Wr.AutoAnchor:l.hoverLayer.line=l.addLine({name:l.data.lineName,from:new u(l.moveIn.hoverNode.rect.center.x,l.moveIn.hoverNode.rect.center.y,_.None,0,l.moveIn.hoverNode.id),fromArrow:l.data.fromArrow,to:new u(l.moveIn.hoverNode.rect.center.x,l.moveIn.hoverNode.rect.center.y),toArrow:l.data.toArrow,strokeStyle:l.options.color,lineWidth:l.data.lineWidth}),l.hoverLayer.line.from.autoAnchor=!0,l.dispatch("nodeCenter",l.moveIn.hoverNode);break;case Wr.Nodes:if(!l.moveIn.activeNode)break;t.ctrlKey||t.shiftKey?l.moveIn.hoverNode&&l.activeLayer.hasInAll(l.moveIn.hoverNode)?(l.activeLayer.setPens([l.moveIn.hoverNode]),l.dispatch("node"+(2===t.button?"RightClick":""),l.moveIn.hoverNode)):l.activeLayer.has(l.moveIn.activeNode)||(l.activeLayer.add(l.moveIn.activeNode),1<l.activeLayer.pens.length?l.dispatch("multi",l.activeLayer.pens):l.dispatch("node"+(2===t.button?"RightClick":""),l.moveIn.activeNode)):t.altKey?l.moveIn.hoverNode?(l.activeLayer.setPens([l.moveIn.hoverNode]),l.dispatch("node"+(2===t.button?"RightClick":""),l.moveIn.hoverNode)):l.moveIn.hoverLine&&(l.activeLayer.setPens([l.moveIn.hoverLine]),l.dispatch("line",l.moveIn.hoverLine)):l.activeLayer.pens.length<2&&(l.activeLayer.setPens([l.moveIn.activeNode]),l.dispatch("node"+(2===t.button?"RightClick":""),l.moveIn.activeNode)),(l.data.locked||l.moveIn.activeNode.locked)&&l.moveIn.activeNode.click();break;case Wr.Graffiti:l.moveIn.hoverNode.pushPoint(new u(t.x,t.y))}l.activeLayer.pens.length&&l.activeLayer.saveNodeRects(),l.render()}},this.onmouseup=function(t){if(l.mouseDown){if(l.mouseDown=void 0,l.lastTranlated.x=0,l.lastTranlated.y=0,l.hoverLayer.dockAnchor=void 0,l.hoverLayer.dockLineX=0,l.hoverLayer.dockLineY=0,l.divLayer.canvas.style.cursor="default",l.hoverLayer.dragRect)l.getPensInRect(l.hoverLayer.dragRect),l.activeLayer.pens&&1<l.activeLayer.pens.length?l.dispatch("multi",l.activeLayer.pens):l.activeLayer.pens&&l.activeLayer.pens[0]&&l.activeLayer.pens[0].type===b.Line?l.dispatch("line"+(2===t.button?"RightClick":""),l.activeLayer.pens[0]):l.activeLayer.pens&&l.activeLayer.pens[0]&&l.activeLayer.pens[0].type===b.Node&&l.dispatch("node"+(2===t.button?"RightClick":""),l.activeLayer.pens[0]);else switch(l.moveIn.type){case Wr.Nodes:t.ctrlKey&&t.shiftKey&&t.altKey&&(l.moveIn.hoverNode.manualAnchors||(l.moveIn.hoverNode.manualAnchors=[]),(r=new u(t.x,t.y)).id=l.moveIn.hoverNode.id,l.moveIn.hoverNode.manualAnchors.push(r),l.moveIn.hoverNode.calcAnchors(),l.needCache=!0);break;case Wr.HoverAnchors:l.hoverLayer.line&&((l.hoverLayer.line.to.id?!l.options.disableRepeatLine||l.data.pens.filter(function(t){return t.type===b.Line&&t.from.isSameAs(l.hoverLayer.line.from)&&t.to.isSameAs(l.hoverLayer.line.to)}).length<=1:!l.options.disableEmptyLine&&!l.hoverLayer.line.disableEmptyLine)?(l.activeLayer.pens=[l.hoverLayer.line],l.dispatch("addLine",l.hoverLayer.line)):(l.data.pens.pop(),l.activeLayer.clear())),l.offscreen.render(),l.hoverLayer.line=void 0;break;case Wr.AutoAnchor:!l.hoverLayer.line.disableEmptyLine&&!l.options.disableEmptyLine||l.hoverLayer.line.from.id&&l.hoverLayer.line.to.id?(l.activeLayer.updateLines(),l.dispatch("addLine",l.hoverLayer.line)):(l.needCache=!0,l.activeLayer.clear(),l.data.pens.splice(l.findIndex(l.hoverLayer.line),1));break;case Wr.Rotate:l.activeLayer.updateRotate();break;case Wr.LineControlPoint:d.Store.set(l.generateStoreKey("pts-")+l.moveIn.hoverLine.id,void 0);break;case Wr.LineFrom:case Wr.LineTo:!l.hoverLayer.line.disableEmptyLine&&!l.options.disableEmptyLine||l.hoverLayer.line.from.id&&l.hoverLayer.line.to.id||(l.needCache=!0,l.activeLayer.clear(),l.data.pens.splice(l.findIndex(l.hoverLayer.line),1));break;case Wr.Graffiti:!l.moveIn.hoverNode.points||l.moveIn.hoverNode.points.length<2?(l.moveIn.type=Wr.None,l.data.pens.pop()):(l.moveIn.type=Wr.Nodes,l.moveIn.hoverNode.doing=void 0,l.moveIn.hoverNode.calcAnchors(),l.activeLayer.setPens([l.moveIn.hoverNode]),l.hoverLayer.node=l.moveIn.hoverNode,l.needCache=!0);break;case Wr.Lines:var e=void 0;(e=l.moveIn.hoverLine.children&&l.moveIn.hoverLine.children.length?l.moveIn.hoverLine.children[l.moveIn.hoverLine.children.length-1]:e)||(l.moveIn.hoverLine.children=[]);var r=new Ke({parentId:l.moveIn.hoverLine.id,name:"line",from:new u(t.x,t.y),fromArrow:e?"":l.data.fromArrow,to:new u(t.x,t.y),toArrow:"",strokeStyle:l.options.color,lineWidth:l.data.lineWidth});e&&(r.from.id=e.id,r.from.x=e.to.x,r.from.y=e.to.y,e.to.id=r.id),l.moveIn.hoverLine.children.push(r),l.hoverLayer.line=r}l.hoverLayer.dragRect=void 0,l.render(),l.needCache&&l.cache(),l.needCache=!1}},this.ondblclick=function(){l.moveIn.hoverNode?(l.dispatch("dblclick",l.moveIn.hoverNode),l.data.locked||l.moveIn.hoverNode.locked||l.moveIn.hoverNode.hideInput||l.options.hideInput||l.showInput(l.moveIn.hoverNode),l.moveIn.hoverNode.dblclick()):l.moveIn.hoverLine&&(l.dispatch("dblclick",l.moveIn.hoverLine),l.data.locked||l.moveIn.hoverLine.locked||l.moveIn.hoverLine.hideInput||l.options.hideInput||l.showInput(l.moveIn.hoverLine),l.moveIn.hoverLine.dblclick())},this.onkeydown=function(t){if(!l.data.locked&&"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName){var e,r,n,i,o,s=!1,a=0,c=0;switch(t.key){case" ":l.spaceDown=!0;break;case"a":case"A":l.activeLayer.setPens(l.data.pens),s=!0;break;case"Delete":case"Backspace":t.ctrlKey||t.metaKey?l.deleteAnchors():l.delete(),s=!0;break;case"ArrowLeft":a=-5,(t.ctrlKey||t.metaKey)&&(a=-1),s=!0;break;case"ArrowUp":c=-5,(t.ctrlKey||t.metaKey)&&(c=-1),s=!0;break;case"ArrowRight":a=5,(t.ctrlKey||t.metaKey)&&(a=1),s=!0;break;case"ArrowDown":c=5,(t.ctrlKey||t.metaKey)&&(c=1),s=!0;break;case"x":case"X":l.cut();break;case"c":case"C":l.copy();break;case"v":case"V":l.paste();break;case"y":case"Y":(t.ctrlKey||t.metaKey)&&l.redo();break;case"z":case"Z":t.shiftKey?l.redo():(t.ctrlKey||t.metaKey)&&l.undo();break;case"Enter":l.moveIn.type===Wr.Lines&&(l.moveIn.type=Wr.None,l.moveIn.hoverLine.doing="",l.hoverLayer.line.getLen()<10&&(l.moveIn.hoverLine.children.pop(),l.hoverLayer.line=l.moveIn.hoverLine.children[l.moveIn.hoverLine.children.length-1]),l.moveIn.hoverLine.isNode?(e=[],l.moveIn.hoverLine.children.forEach(function(t){e.push(t.from),t.controlPoints&&t.controlPoints.forEach(function(t){t.data=!0,e.push(t)}),e.push(t.to)}),r=(i=er(e)).x1,o=i.y1,n=i.x2,i=i.y2,o=new Ge({name:"lines",rect:new x(r,o,n-r,i-o),points:e,closePath:l.moveIn.hoverLine.closePath}),l.activeLayer.add(o),l.data.pens.pop(),l.data.pens.push(o)):(l.hoverLayer.line.toArrow=l.data.toArrow,l.activeLayer.add(l.moveIn.hoverLine)),l.moveIn.hoverLine=void 0),s=!0;break;case"Escape":l.moveIn.type===Wr.Lines&&(l.moveIn.type=Wr.None,l.moveIn.hoverLine.children.pop(),l.hoverLayer.line=l.moveIn.hoverLine.children[l.moveIn.hoverLine.children.length-1],l.hoverLayer.line.toArrow=l.data.toArrow,l.moveIn.hoverLine.doing="",l.moveIn.hoverLine=void 0),s=!0}s&&(t.preventDefault(),t.stopPropagation(),(a||c)&&(l.activeLayer.saveNodeRects(),l.activeLayer.move(a,c),l.animateLayer.animate()),l.render(),l.cache())}},this._emitter={all:n=n||new Map,on:function(t,e){var r=n.get(t);r&&r.push(e)||n.set(t,[e])},off:function(t,e){t=n.get(t);t&&t.splice(t.indexOf(e)>>>0,1)},emit:function(e,r){(n.get(e)||[]).slice().map(function(t){t(r)}),(n.get("*")||[]).slice().map(function(t){t(e,r)})}},this.options=Object.assign({},s,e),d.Store.set(this.generateStoreKey("LT:color"),this.options.color||"#222222"),d.Store.set(this.generateStoreKey("LT:fontColor"),this.options.fontColor||"#222222"),this.setupDom(t),this.setupSubscribe(),this.setupMouseEvent(),setTimeout(function(){l.canvasPos=l.divLayer.canvas.getBoundingClientRect()},500),setTimeout(function(){l.canvasPos=l.divLayer.canvas.getBoundingClientRect()},1e3),this.cache(),(window.topology=this).dispatch("loaded")}r.d(e,"d",function(){return qr}),r.d(e,!1,function(){return i}),r.d(e,!1,function(){return n}),r.d(e,!1,function(){return o}),r.d(e,!1,function(){return s}),r.d(e,!1,function(){return p}),r.d(e,!1,function(){return y}),r.d(e,!1,function(){return c}),r.d(e,!1,function(){return l}),r.d(e,!1,function(){return f}),r.d(e,!1,function(){return g}),r.d(e,!1,function(){return m}),r.d(e,!1,function(){return v}),r.d(e,"e",function(){return Qe}),r.d(e,"f",function(){return Ze}),r.d(e,!1,function(){}),r.d(e,!1,function(){return vt}),r.d(e,!1,function(){return wt}),r.d(e,!1,function(){return bt}),r.d(e,!1,function(){return xt}),r.d(e,!1,function(){return tr}),r.d(e,!1,function(){return er}),r.d(e,!1,function(){}),r.d(e,"i",function(){return h}),r.d(e,!1,function(){}),r.d(e,!1,function(){}),r.d(e,!1,function(){return rr}),r.d(e,!1,function(){return nr}),r.d(e,!1,function(){}),r.d(e,!1,function(){return b}),r.d(e,!1,function(){return I}),r.d(e,!1,function(){return L}),r.d(e,!1,function(){return Ge}),r.d(e,!1,function(){return Ke}),r.d(e,"a",function(){return _}),r.d(e,"b",function(){return u}),r.d(e,"c",function(){return x}),r.d(e,!1,function(){return Ve}),r.d(e,!1,function(){return Ye}),r.d(e,!1,function(){return w}),r.d(e,!1,function(){}),r.d(e,!1,function(){return Oe}),r.d(e,!1,function(){return Ne}),r.d(e,!1,function(){return Me}),r.d(e,!1,function(){return Be}),r.d(e,!1,function(){return De}),r.d(e,!1,function(){return Ue}),r.d(e,"h",function(){return je}),r.d(e,!1,function(){}),r.d(e,!1,function(){}),r.d(e,"g",function(){return R}),r.d(e,!1,function(){}),r.d(e,!1,function(){}),r.d(e,!1,function(){}),r.d(e,!1,function(){return D}),r.d(e,!1,function(){}),r.d(e,!1,function(){return j}),r.d(e,!1,function(){return F})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(r,t,e){!function(t){function e(t){return t&&t.Math==Math&&t}r.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||function(){return this}()||Function("return this")()}.call(this,e(21))},function(t,e,r){r=r(2);t.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(t,e,r){var n=r(3),i=r(40),o=r(9),s=r(45),a=r(60),r=r(93),c=i("wks"),h=n.Symbol,l=r?h:h&&h.withoutSetter||s;t.exports=function(t){return o(c,t)&&(a||"string"==typeof c[t])||(a&&o(h,t)?c[t]=h[t]:c[t]=l("Symbol."+t)),c[t]}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){"use strict";function n(t){return!!c(t)&&(t=l(t),h(T,t)||h(I,t))}var i,o=r(110),s=r(4),a=r(3),c=r(6),h=r(9),l=r(56),u=r(12),f=r(17),d=r(10).f,p=r(55),y=r(47),g=r(5),m=r(45),v=a.Int8Array,w=v&&v.prototype,r=a.Uint8ClampedArray,r=r&&r.prototype,b=v&&p(v),x=w&&p(w),v=Object.prototype,S=v.isPrototypeOf,g=g("toStringTag"),_=m("TYPED_ARRAY_TAG"),k=o&&!!y&&"Opera"!==l(a.opera),o=!1,T={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},I={BigInt64Array:8,BigUint64Array:8};for(i in T)a[i]||(k=!1);if((!k||"function"!=typeof b||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},k))for(i in T)a[i]&&y(a[i],b);if((!k||!x||x===v)&&(x=b.prototype,k))for(i in T)a[i]&&y(a[i].prototype,x);if(k&&p(r)!==x&&y(r,x),s&&!h(x,g))for(i in o=!0,d(x,g,{get:function(){return c(this)?this[_]:void 0}}),T)a[i]&&u(a[i],_,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:o&&_,aTypedArray:function(t){if(n(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(y){if(S.call(b,t))return t}else for(var e in T)if(h(T,i)){e=a[e];if(e&&(t===e||S.call(e,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r){if(s){if(r)for(var n in T){n=a[n];if(n&&h(n.prototype,t))try{delete n.prototype[t]}catch(t){}}x[t]&&!r||f(x,t,!r&&k&&w[t]||e)}},exportTypedArrayStaticMethod:function(t,e,r){var n,i;if(s){if(y){if(r)for(n in T)if((i=a[n])&&h(i,t))try{delete i[t]}catch(t){}if(b[t]&&!r)return;try{return f(b,t,!r&&k&&b[t]||e)}catch(t){}}for(n in T)!(i=a[n])||i[t]&&!r||f(i,t,e)}},isView:function(t){if(!c(t))return!1;t=l(t);return"DataView"===t||h(T,t)||h(I,t)},isTypedArray:n,TypedArray:b,TypedArrayPrototype:x}},function(t,e,r){var n=r(6);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,r){var n=r(15),i={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return i.call(n(t),e)}},function(t,e,r){var n=r(4),i=r(26),o=r(8),s=r(16),a=Object.defineProperty;e.f=n?a:function(t,e,r){if(o(t),e=s(e,!0),o(r),i)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(14),i=Math.min;t.exports=function(t){return 0<t?i(n(t),9007199254740991):0}},function(t,e,r){var n=r(4),i=r(10),o=r(24);t.exports=n?function(t,e,r){return i.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){"use strict";function n(t,e,r,n,i,o,s,a){var c,h,l="function"==typeof t?t.options:t;return e&&(l.render=e,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c&&(l.functional?(l._injectStyles=c,h=l.render,l.render=function(t,e){return c.call(e),h(t,e)}):(a=l.beforeCreate,l.beforeCreate=a?[].concat(a,c):[c])),{exports:t,options:l}}r.d(e,"a",function(){return n})},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:r)(t)}},function(t,e,r){var n=r(18);t.exports=function(t){return Object(n(t))}},function(t,e,r){var i=r(6);t.exports=function(t,e){if(!i(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!i(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var a=r(3),c=r(12),h=r(9),l=r(32),n=r(46),r=r(25),i=r.get,u=r.enforce,f=String(String).split("String");(t.exports=function(t,e,r,n){var i=!!n&&!!n.unsafe,o=!!n&&!!n.enumerable,s=!!n&&!!n.noTargetGet;"function"==typeof r&&("string"!=typeof e||h(r,"name")||c(r,"name",e),(n=u(r)).source||(n.source=f.join("string"==typeof e?e:""))),t!==a?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=r:c(t,e,r)):o?t[e]=r:l(e,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&i(this).source||n(this)})},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,r){var n=r(42),i=r(18);t.exports=function(t){return n(i(t))}},function(t,e,r){var h=r(3),l=r(36).f,u=r(12),f=r(17),d=r(32),p=r(71),y=r(61);t.exports=function(t,e){var r,n,i,o=t.target,s=t.global,a=t.stat,c=s?h:a?h[o]||d(o,{}):(h[o]||{}).prototype;if(c)for(r in e){if(n=e[r],i=t.noTargetGet?(i=l(c,r))&&i.value:c[r],!y(s?r:o+(a?".":"#")+r,t.forced)&&void 0!==i){if(typeof n==typeof i)continue;p(n,i)}(t.sham||i&&i.sham)&&u(n,"sham",!0),f(c,r,n,t)}}},function(t,e){var r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var n=r(4),i=r(10).f,r=Function.prototype,o=r.toString,s=/^\s*function ([^ (]*)/;!n||"name"in r||i(r,"name",{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n,i,o,s,a,c,h,l,u=r(72),f=r(3),d=r(6),p=r(12),y=r(9),g=r(31),m=r(41),r=r(35),v="Object already initialized",f=f.WeakMap;h=u||g.state?(n=g.state||(g.state=new f),i=n.get,o=n.has,s=n.set,a=function(t,e){if(o.call(n,t))throw new TypeError(v);return e.facade=t,s.call(n,t,e),e},c=function(t){return i.call(n,t)||{}},function(t){return o.call(n,t)}):(r[l=m("state")]=!0,a=function(t,e){if(y(t,l))throw new TypeError(v);return e.facade=t,p(t,l,e),e},c=function(t){return y(t,l)?t[l]:{}},function(t){return y(t,l)}),t.exports={set:a,get:c,has:h,enforce:function(t){return h(t)?c(t):a(t,{})},getterFor:function(r){return function(t){var e;if(!d(t)||(e=c(t)).type!==r)throw TypeError("Incompatible receiver, "+r+" required");return e}}}},function(t,e,r){var n=r(4),i=r(2),o=r(28);t.exports=!n&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){var b=r(88),x=r(42),S=r(15),_=r(11),k=r(122),T=[].push,r=function(f){var d=1==f,p=2==f,y=3==f,g=4==f,m=6==f,v=7==f,w=5==f||m;return function(t,e,r,n){for(var i,o,s=S(t),a=x(s),c=b(e,r,3),h=_(a.length),l=0,n=n||k,u=d?n(t,h):p||v?n(t,0):void 0;l<h;l++)if((w||l in a)&&(o=c(i=a[l],l,s),f))if(d)u[l]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return l;case 2:T.call(u,i)}else switch(f){case 4:return!1;case 7:T.call(u,i)}return m?-1:y||g?g:u}};t.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6),filterOut:r(7)}},function(t,e,r){var n=r(3),r=r(6),i=n.document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,e=function(){};return{s:e,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}r.d(e,"a",function(){return n})},function(t,e,r){function n(t){return"function"==typeof t?t:void 0}var i=r(69),o=r(3);t.exports=function(t,e){return arguments.length<2?n(i[t])||n(o[t]):i[t]&&i[t][e]||o[t]&&o[t][e]}},function(t,e,r){var n=r(3),i=r(32),r="__core-js_shared__",r=n[r]||i(r,{});t.exports=r},function(t,e,r){var n=r(3),i=r(12);t.exports=function(e,r){try{i(n,e,r)}catch(t){n[e]=r}return r}},function(t,e,r){function n(){}function i(t){return"<script>"+t+"</"+d+">"}var o,s=r(8),a=r(84),c=r(37),h=r(35),l=r(94),u=r(28),r=r(41),f="prototype",d="script",p=r("IE_PROTO"),y=function(){try{o=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;y=o?function(t){t.write(i("")),t.close();var e=t.parentWindow.Object;return t=null,e}(o):((t=u("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(i("document.F=Object")),t.close(),t.F);for(var e=c.length;e--;)delete y[f][c[e]];return y()};h[p]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(n[f]=s(t),r=new n,n[f]=null,r[p]=t):r=y(),void 0===e?r:a(r,e)}},function(t,e,r){var n=r(14),i=Math.max,o=Math.min;t.exports=function(t,e){t=n(t);return t<0?i(t+e,0):o(t,e)}},function(t,e){t.exports={}},function(t,e,r){var n=r(4),i=r(68),o=r(24),s=r(19),a=r(16),c=r(9),h=r(26),l=Object.getOwnPropertyDescriptor;e.f=n?l:function(t,e){if(t=s(t),e=a(e,!0),h)try{return l(t,e)}catch(t){}if(c(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},,function(t,e){t.exports=!1},function(t,e,r){var n=r(39),i=r(31);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.1",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(t,e,r){var n=r(40),i=r(45),o=n("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e,r){var n=r(2),i=r(22),o="".split;t.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e){t.exports={}},function(t,e,r){var n=r(52),i=r(37).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+n).toString(36)}},function(t,e,r){var r=r(31),n=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return n.call(t)}),t.exports=r.inspectSource},function(t,e,r){var i=r(8),o=r(119);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,n=!1,t={};try{(r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),n=t instanceof Array}catch(t){}return function(t,e){return i(t),o(e),n?r.call(t,e):t.__proto__=e,t}}():void 0)},function(t,e,r){r=r(30);t.exports=r("navigator","userAgent")||""},function(t,e,r){var n,i,o=r(3),r=r(48),o=o.process,o=o&&o.versions,o=o&&o.v8;o?i=(n=o.split("."))[0]<4?1:n[0]+n[1]:r&&(!(n=r.match(/Edge\/(\d+)/))||74<=n[1])&&(n=r.match(/Chrome\/(\d+)/))&&(i=n[1]),t.exports=i&&+i},function(t,e,r){"use strict";var p=r(96),n=r(95),i=r(40),y=r(33),g=r(25).get,o=r(128),s=r(127),m=RegExp.prototype.exec,v=i("native-string-replace",String.prototype.replace),w=m,b=(r=/a/,i=/b*/g,m.call(r,"a"),m.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),x=n.UNSUPPORTED_Y||n.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(b||S||x||o||s)&&(w=function(t){var e,r,n,i,o,s,a=this,c=g(a),h=c.raw;if(h)return h.lastIndex=a.lastIndex,d=w.call(h,t),a.lastIndex=h.lastIndex,d;var l=c.groups,u=x&&a.sticky,f=p.call(a),h=a.source,d=0,c=t;if(u&&(-1===(f=f.replace("y","")).indexOf("g")&&(f+="g"),c=String(t).slice(a.lastIndex),0<a.lastIndex&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(h="(?: "+h+")",c=" "+c,d++),e=new RegExp("^(?:"+h+")",f)),S&&(e=new RegExp("^"+h+"$(?!\\s)",f)),b&&(r=a.lastIndex),n=m.call(u?e:a,c),u?n?(n.input=n.input.slice(d),n[0]=n[0].slice(d),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:b&&n&&(a.lastIndex=a.global?n.index+n[0].length:r),S&&n&&1<n.length&&v.call(n[0],e,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)}),n&&l)for(n.groups=o=y(null),i=0;i<l.length;i++)o[(s=l[i])[0]]=n[s[1]];return n}),t.exports=w},function(t,e,r){var c=r(19),h=r(11),l=r(34),r=function(a){return function(t,e,r){var n,i=c(t),o=h(i.length),s=l(r,o);if(a&&e!=e){for(;s<o;)if((n=i[s++])!=n)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}};t.exports={includes:r(!0),indexOf:r(!1)}},function(t,e,r){var s=r(9),a=r(19),c=r(51).indexOf,h=r(35);t.exports=function(t,e){var r,n=a(t),i=0,o=[];for(r in n)!s(h,r)&&s(n,r)&&o.push(r);for(;e.length>i;)s(n,r=e[i++])&&(~c(o,r)||o.push(r));return o}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.d(e,"a",function(){return n})},function(t,e,r){var n=r(10).f,i=r(9),o=r(5)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(9),i=r(15),o=r(41),r=r(120),s=o("IE_PROTO"),a=Object.prototype;t.exports=r?Object.getPrototypeOf:function(t){return t=i(t),n(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,r){var n=r(58),i=r(22),o=r(5)("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=n?i:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?t:s?i(e):"Object"==(t=i(e))&&"function"==typeof e.callee?"Arguments":t}},function(t,e,r){var n=r(8),i=r(59),o=r(5)("species");t.exports=function(t,e){var r,t=n(t).constructor;return void 0===t||null==(r=n(t)[o])?e:i(r)}},function(t,e,r){var n={};n[r(5)("toStringTag")]="z",t.exports="[object z]"===String(n)},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,r){var n=r(49),r=r(2);t.exports=!!Object.getOwnPropertySymbols&&!r(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},function(t,e,r){var n=r(2),i=/#|\.prototype\./,r=function(t,e){t=s[o(t)];return t==c||t!=a&&("function"==typeof e?n(e):!!e)},o=r.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=r.data={},a=r.NATIVE="N",c=r.POLYFILL="P";t.exports=r},function(t,e,r){"use strict";var n=r(20),r=r(50);n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},function(n,i,o){!function(t,B){var e,D=o(188).default,r=o(183).default;o(182),o(180),o(65),o(155),o(153),o(152),o(151),o(150),o(149),o(148),o(147),o(146),o(145),o(144),o(143),o(142),o(141),o(140),o(139),o(138),o(137),o(136),o(135),o(134),o(133),o(132),o(131),o(166),o(165),o(62),o(83),o(114),o(113),o(164),e=function(){"use strict";function e(t){return t.replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=+$/m,"")}function r(t){return t.replace(/[^A-Za-z0-9\+\/]/g,"")}function t(t){for(var e,r,n,i="",o=t.length%3,s=0;s<t.length;){if(255<(e=t.charCodeAt(s++))||255<(r=t.charCodeAt(s++))||255<(n=t.charCodeAt(s++)))throw new TypeError("invalid character found");i+=x[(e=e<<16|r<<8|n)>>18&63]+x[e>>12&63]+x[e>>6&63]+x[63&e]}return o?i.slice(0,o-3)+"===".substring(o):i}function n(t){return 1<arguments.length&&void 0!==arguments[1]&&arguments[1]?e(L(t)):L(t)}function i(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?k(192|e>>>6)+k(128|63&e):k(224|e>>>12&15)+k(128|e>>>6&63)+k(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return k(240|e>>>18&7)+k(128|e>>>12&63)+k(128|e>>>6&63)+k(128|63&e)}function o(t){return t.replace(A,i)}function s(t){return 1<arguments.length&&void 0!==arguments[1]&&arguments[1]?e(R(t)):R(t)}function a(t){return s(t,!0)}function c(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return k(55296+(e>>>10))+k(56320+(1023&e));case 3:return k((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return k((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}}function h(t){return t.replace(P,c)}function l(t){return C(N(t))}function u(t){return O(N(t))}function f(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}}function d(){function t(t,e){return Object.defineProperty(String.prototype,t,f(e))}t("fromBase64",function(){return u(this)}),t("toBase64",function(t){return s(this,t)}),t("toBase64URI",function(){return s(this,!0)}),t("toBase64URL",function(){return s(this,!0)}),t("toUint8Array",function(){return l(this)})}function p(){function t(t,e){return Object.defineProperty(Uint8Array.prototype,t,f(e))}t("toBase64",function(t){return n(this,t)}),t("toBase64URI",function(){return n(this,!0)}),t("toBase64URL",function(){return n(this,!0)})}var y,g="function"==typeof atob,m="function"==typeof btoa,v="function"==typeof B,w="function"==typeof TextDecoder?new TextDecoder:void 0,b="function"==typeof TextEncoder?new TextEncoder:void 0,x=D("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),S=(y={},x.forEach(function(t,e){return y[t]=e}),y),_=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,k=String.fromCharCode.bind(String),T="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(t){return t};return new Uint8Array(Array.prototype.slice.call(t,0).map(e))},I=m?function(t){return btoa(t)}:v?function(t){return B.from(t,"binary").toString("base64")}:t,L=v?function(t){return B.from(t).toString("base64")}:function(t){for(var e=[],r=0,n=t.length;r<n;r+=4096)e.push(k.apply(null,t.subarray(r,r+4096)));return I(e.join(""))},A=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,R=v?function(t){return B.from(t,"utf8").toString("base64")}:b?function(t){return L(b.encode(t))}:function(t){return I(o(t))},P=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,m=function(t){if(t=t.replace(/\s+/g,""),!_.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));for(var e,r,n,i="",o=0;o<t.length;)e=S[t.charAt(o++)]<<18|S[t.charAt(o++)]<<12|(r=S[t.charAt(o++)])<<6|(n=S[t.charAt(o++)]),i+=64===r?k(e>>16&255):64===n?k(e>>16&255,e>>8&255):k(e>>16&255,e>>8&255,255&e);return i},E=g?function(t){return atob(r(t))}:v?function(t){return B.from(t,"base64").toString("binary")}:m,C=v?function(t){return T(B.from(t,"base64"))}:function(t){return T(E(t),function(t){return t.charCodeAt(0)})},O=v?function(t){return B.from(t,"base64").toString("utf8")}:w?function(t){return w.decode(C(t))}:function(t){return h(E(t))},N=function(t){return r(t.replace(/[-_]/g,function(t){return"-"==t?"+":"/"}))},M={version:"3.6.0",VERSION:"3.6.0",atob:E,atobPolyfill:m,btoa:I,btoaPolyfill:t,fromBase64:u,toBase64:s,encode:s,encodeURI:a,encodeURL:a,utob:o,btou:h,decode:u,isValid:function(t){if("string"!=typeof t)return!1;t=t.replace(/\s+/g,"").replace(/=+$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:n,toUint8Array:l,extendString:d,extendUint8Array:p,extendBuiltins:function(){d(),p()},Base64:{}};return Object.keys(M).forEach(function(t){return M.Base64[t]=M[t]}),M},"object"==r(i)&&void 0!==n?n.exports=e():void 0===(e="function"==typeof(e=e)?e.call(i,o,i,n):e)||(n.exports=e)}.call(this,o(21),o(192).Buffer)},function(t,e,s){"use strict";!function(r){s(113);var n=s(63),i="2B0919F0FA32CF039A3653A590CD0CEA";function o(t,e){for(var r=[],n=[],i=[],o=e.length,s=t.length,a=0;a<256;a++)r[a]=e[a%o].charCodeAt(),n[a]=a;for(var c=a=0;a<256;a++)c=(c+n[a]+r[a])%256,l=n[a],n[a]=n[c],n[c]=l;for(var h=c=a=0;a<s;a++){var c=(c+n[h=(h+1)%256])%256,l=n[h];n[h]=n[c],n[c]=l;var u=n[(n[h]+n[c])%256];t[a]&&i.push(String.fromCharCode(t[a].charCodeAt()^u))}return i.join("")}e.a={encrypt:function(t,e){return null==t?null:(e=o(t,e=e||(r.env.VUE_APP_CRYPT_KEY||i)),n.Base64.encode(e))},decrypt:function(t,e){return null==t?null:(e=e||(r.env.VUE_APP_CRYPT_KEY||i),o(t=n.Base64.decode(t),e))},base64Encrypt:function(t){return n.Base64.encode(t)},base64Decrypt:function(t){return n.Base64.decode(t)}}}.call(this,s(115))},function(t,e,r){var n=r(58),i=r(17),r=r(121);n||i(Object.prototype,"toString",r,{unsafe:!0})},function(t,e,r){var n=r(52),i=r(37);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);e.f=o?function(t){t=i(this,t);return!!t&&t.enumerable}:n},function(t,e,r){r=r(3);t.exports=r},function(t,e,r){var n=r(30),i=r(44),o=r(67),s=r(8);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(s(t)),r=o.f;return r?e.concat(r(t)):e}},function(t,e,r){var a=r(9),c=r(70),h=r(36),l=r(10);t.exports=function(t,e){for(var r=c(e),n=l.f,i=h.f,o=0;o<r.length;o++){var s=r[o];a(t,s)||n(t,s,i(e,s))}}},function(t,e,r){var n=r(3),r=r(46),n=n.WeakMap;t.exports="function"==typeof n&&/native code/.test(r(n))},,function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"b",function(){return i});r(53);e=r(65),Object.prototype.hasOwnProperty;function n(t){return void 0===Array.isArray?"[object Array]"===Object.prototype.toString.call(t):Array.isArray(t)}function i(t){return"[object Object]"===Object.prototype.toString.call(t)}},,function(t,e,r){"use strict";var s=r(15),a=r(34),c=r(11);t.exports=function(t){for(var e=s(this),r=c(e.length),n=arguments.length,i=a(1<n?arguments[1]:void 0,r),n=2<n?arguments[2]:void 0,o=void 0===n?r:a(n,r);i<o;)e[i++]=t;return e}},function(t,e,r){"use strict";var n,i=r(2),o=r(55),s=r(12),a=r(9),c=r(5),h=r(39),l=c("iterator"),r=!1;[].keys&&("next"in(c=[].keys())?(c=o(o(c)))!==Object.prototype&&(n=c):r=!0);i=null==n||i(function(){var t={};return n[l].call(t)!==t});i&&(n={}),h&&!i||a(n,l)||s(n,l,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:r}},function(t,e,r){var n=r(5),i=r(33),r=r(10),o=n("unscopables"),s=Array.prototype;null==s[o]&&r.f(s,o,{configurable:!0,value:i(null)}),t.exports=function(t){s[o][t]=!0}},function(t,e,r){var n=r(22);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(22),i=r(50);t.exports=function(t,e){var r=t.exec;if("function"==typeof r){r=r.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,r){"use strict";var n=r(92).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},function(t,e,r){"use strict";r(62);var c=r(17),h=r(50),l=r(2),u=r(5),f=r(12),d=u("species"),p=RegExp.prototype;t.exports=function(r,t,e,n){var s,i=u(r),a=!l(function(){var t={};return t[i]=function(){return 7},7!=""[r](t)}),o=a&&!l(function(){var t=!1,e=/a/;return"split"===r&&((e={constructor:{}}).constructor[d]=function(){return e},e.flags="",e[i]=/./[i]),e.exec=function(){return t=!0,null},e[i](""),!t});a&&o&&!e||(s=/./[i],t=t(i,""[r],function(t,e,r,n,i){var o=e.exec;return o===h||o===p.exec?a&&!i?{done:!0,value:s.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),c(String.prototype,r,t[0]),c(p,i,t[1])),n&&f(p[i],"sham",!0)}},function(t,e,r){"use strict";var n=r(82),i=r(2),_=r(8),k=r(11),T=r(14),o=r(18),I=r(81),L=r(126),A=r(80),s=r(5)("replace"),R=Math.max,P=Math.min,r="$0"==="a".replace(/./,"$0"),a=!!/./[s]&&""===/./[s]("a","$0");n("replace",function(t,b,x){var S=a?"$":"$0";return[function(t,e){var r=o(this),n=null==t?void 0:t[s];return void 0!==n?n.call(t,r,e):b.call(String(r),t,e)},function(t,e){if("string"==typeof e&&-1===e.indexOf(S)&&-1===e.indexOf("$<")){var r=x(b,this,t,e);if(r.done)return r.value}var n=_(this),i=String(t),o="function"==typeof e;o||(e=String(e));var s,a=n.global;a&&(s=n.unicode,n.lastIndex=0);for(var c=[];;){var h=A(n,i);if(null===h)break;if(c.push(h),!a)break;""===String(h[0])&&(n.lastIndex=I(i,k(n.lastIndex),s))}for(var l,u="",f=0,d=0;d<c.length;d++){for(var h=c[d],p=String(h[0]),y=R(P(T(h.index),i.length),0),g=[],m=1;m<h.length;m++)g.push(void 0===(l=h[m])?l:String(l));var v,w=h.groups,w=o?(v=[p].concat(g,y,i),void 0!==w&&v.push(w),String(e.apply(void 0,v))):L(p,i,y,g,w,e);f<=y&&(u+=i.slice(f,y)+w,f=y+p.length)}return u+i.slice(f)}]},!!i(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})||!r||a)},function(t,e,r){var n=r(4),s=r(10),a=r(8),c=r(66);t.exports=n?Object.defineProperties:function(t,e){a(t);for(var r,n=c(e),i=n.length,o=0;o<i;)s.f(t,r=n[o++],e[r]);return t}},,,function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t}},function(t,e,r){var o=r(59);t.exports=function(n,i,t){if(o(n),void 0===i)return n;switch(t){case 0:return function(){return n.call(i)};case 1:return function(t){return n.call(i,t)};case 2:return function(t,e){return n.call(i,t,e)};case 3:return function(t,e,r){return n.call(i,t,e,r)}}return function(){return n.apply(i,arguments)}}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t,e){var r=[][t];return!!r&&n(function(){r.call(null,e||function(){throw 1},1)})}},function(t,e,r){"use strict";var n=r(19),i=r(78),o=r(43),s=r(25),r=r(100),a="Array Iterator",c=s.set,h=s.getterFor(a);t.exports=r(Array,"Array",function(t,e){c(this,{type:a,target:n(t),index:0,kind:e})},function(){var t=h(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?{value:t.target=void 0,done:!0}:"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,r){var n=r(2),i=r(5),o=r(49),s=i("species");t.exports=function(e){return 51<=o||!n(function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(t,e,r){var s=r(14),a=r(18),r=function(o){return function(t,e){var r,n=String(a(t)),i=s(e),t=n.length;return i<0||t<=i?o?"":void 0:(e=n.charCodeAt(i))<55296||56319<e||i+1===t||(r=n.charCodeAt(i+1))<56320||57343<r?o?n.charAt(i):e:o?n.slice(i,i+2):r-56320+(e-55296<<10)+65536}};t.exports={codeAt:r(!1),charAt:r(!0)}},function(t,e,r){r=r(60);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,r){r=r(30);t.exports=r("document","documentElement")},function(t,e,r){function n(t,e){return RegExp(t,e)}r=r(2);e.UNSUPPORTED_Y=r(function(){var t=n("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),e.BROKEN_CARET=r(function(){var t=n("^r","gy");return t.lastIndex=2,null!=t.exec("str")})},function(t,e,r){"use strict";var n=r(8);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,c,h){"use strict";!function(e){h(65),h(114);var r=h(64),n=h(74);function i(t){return t=(e.env.VUE_APP_NAME||"")+"_"+t,r.a.encrypt(t)}var o=function(t,e){try{localStorage.setItem(t,e)}catch(t){console.log(t)}},s=function(t){var e="";try{e=localStorage.getItem(t)}catch(t){console.log(t)}return e},a=function(t){try{localStorage.removeItem(t)}catch(t){console.log(t)}};c.a={get:function(t){if(!t)return"";var e="";try{e=s(i(t)),e=r.a.decrypt(e)}catch(t){console.log(t)}return e},getJson:function(t){if(t){var e=null;try{e=s(i(t)),null===(e=r.a.decrypt(e))||Object(n.b)(e)||(e=JSON.parse(e))}catch(t){console.log(t)}return e}},set:function(t,e){if(t)try{"number"==typeof(e=Object(n.b)(e)||Object(n.a)(e)?JSON.stringify(e):e)&&(e=e.toString()),o(i(t),r.a.encrypt(e))}catch(t){console.log(t)}},del:function(t){t&&a(i(t))}}}.call(this,h(115))},function(t,e,r){var n=r(56),i=r(43),o=r(5)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[n(t)]}},function(t,e,r){"use strict";function n(){return this}var i=r(77).IteratorPrototype,o=r(33),s=r(24),a=r(54),c=r(43);t.exports=function(t,e,r){e+=" Iterator";return t.prototype=o(i,{next:s(1,r)}),a(t,e,!1,!0),c[e]=n,t}},function(t,e,r){"use strict";function y(){return this}var g=r(20),m=r(99),v=r(55),w=r(47),b=r(54),x=r(12),S=r(17),n=r(5),_=r(39),k=r(43),r=r(77),T=r.IteratorPrototype,I=r.BUGGY_SAFARI_ITERATORS,L=n("iterator"),A="values",R="entries";t.exports=function(t,e,r,n,i,o,s){m(r,e,n);function a(t){if(t===i&&p)return p;if(!I&&t in f)return f[t];switch(t){case"keys":case A:case R:return function(){return new r(this,t)}}return function(){return new r(this)}}var c,h,l=e+" Iterator",u=!1,f=t.prototype,d=f[L]||f["@@iterator"]||i&&f[i],p=!I&&d||a(i),n="Array"==e&&f.entries||d;if(n&&(t=v(n.call(new t)),T!==Object.prototype&&t.next&&(_||v(t)===T||(w?w(t,T):"function"!=typeof t[L]&&x(t,L,y)),b(t,l,!0,!0),_&&(k[l]=y))),i==A&&d&&d.name!==A&&(u=!0,p=function(){return d.call(this)}),_&&!s||f[L]===p||x(f,L,p),k[e]=p,i)if(c={values:a(A),keys:o?p:a("keys"),entries:a(R)},s)for(h in c)!I&&!u&&h in f||S(f,h,c[h]);else g({target:e,proto:!0,forced:I||u},c);return c}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,r){"use strict";var n=r(16),i=r(10),o=r(24);t.exports=function(t,e,r){e=n(e);e in t?i.f(t,e,o(0,r)):t[e]=r}},,,,function(t,e,r){var l=r(59),u=r(15),f=r(42),d=r(11),r=function(h){return function(t,e,r,n){l(e);var i=u(t),o=f(i),s=d(i.length),a=h?s-1:0,c=h?-1:1;if(r<2)for(;;){if(a in o){n=o[a],a+=c;break}if(a+=c,h?a<0:s<=a)throw TypeError("Reduce of empty array with no initial value")}for(;h?0<=a:a<s;a+=c)a in o&&(n=e(n,o[a],a,i));return n}};t.exports={left:r(!1),right:r(!0)}},function(t,e,r){var n=r(175);t.exports=function(t,e){t=n(t);if(t%e)throw RangeError("Wrong offset");return t}},function(t,e,r){var n=r(14),i=r(11);t.exports=function(t){if(void 0===t)return 0;var e=n(t),t=i(e);if(e!==t)throw RangeError("Wrong length or index");return t}},function(t,e,r){var f=r(15),d=r(11),p=r(98),y=r(156),g=r(88),m=r(7).aTypedArrayConstructor;t.exports=function(t){var e,r,n,i,o,s,a=f(t),c=arguments.length,h=1<c?arguments[1]:void 0,l=void 0!==h,u=p(a);if(null!=u&&!y(u))for(s=(o=u.call(a)).next,a=[];!(i=s.call(o)).done;)a.push(i.value);for(l&&2<c&&(h=g(h,arguments[2],2)),r=d(a.length),n=new(m(this))(r),e=0;e<r;e++)n[e]=l?h(a[e],e):a[e];return n}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e,r){var n=r(3),i=r(2),o=r(179),r=r(7).NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,a=n.Int8Array;t.exports=!r||!i(function(){a(1)})||!i(function(){new a(-1)})||!o(function(t){new a,new a(null),new a(1.5),new a(t)},!0)||i(function(){return 1!==new a(new s(2),1,void 0).length})},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){"use strict";var n=r(20),i=r(42),o=r(19),r=r(89),s=[].join,i=i!=Object,r=r("join",",");n({target:"Array",proto:!0,forced:i||!r},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},function(t,e,r){"use strict";var n=r(17),i=r(8),o=r(2),s=r(96),a="toString",c=RegExp.prototype,h=c[a],r=o(function(){return"/a/b"!=h.call({source:"a",flags:"b"})}),o=h.name!=a;(r||o)&&n(RegExp.prototype,a,function(){var t=i(this),e=String(t.source),r=t.flags;return"/"+e+"/"+String(void 0===r&&t instanceof RegExp&&!("flags"in c)?s.call(t):r)},{unsafe:!0})},function(t,e){var r,n,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var a,c=[],h=!1,l=-1;function u(){h&&a&&(h=!1,a.length?c=a.concat(c):l=-1,c.length&&f())}function f(){if(!h){var t=s(u);h=!0;for(var e=c.length;e;){for(a=c,c=[];++l<e;)a&&a[l].run();l=-1,e=c.length}a=null,h=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||h||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e,r){var o=r(6),s=r(47);t.exports=function(t,e,r){var n,i;return s&&"function"==typeof(n=e.constructor)&&n!==r&&o(i=n.prototype)&&i!==r.prototype&&s(t,i),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(118),r=(i.prototype.unsubscribe=function(){delete n.observers[this.id]},i);function i(t,e,r){this.key="",this.id=t,this.key=e,this.fn=r}e.Observer=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.data={},e.observers={}},function(t,e,r){var n=r(6);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,r){r=r(2);t.exports=!r(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},function(t,e,r){"use strict";var n=r(58),i=r(56);t.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,r){var n=r(6),i=r(79),o=r(5)("species");t.exports=function(t,e){var r;return new(void 0===(r=i(t)&&("function"==typeof(r=t.constructor)&&(r===Array||i(r.prototype))||n(r)&&null===(r=r[o]))?void 0:r)?Array:r)(0===e?0:e)}},,,,function(t,e,r){var n=r(15),f=Math.floor,i="".replace,d=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,p=/\$([$&'`]|\d{1,2})/g;t.exports=function(o,s,a,c,h,t){var l=a+o.length,u=c.length,e=p;return void 0!==h&&(h=n(h),e=d),i.call(t,e,function(t,e){var r;switch(e.charAt(0)){case"$":return"$";case"&":return o;case"`":return s.slice(0,a);case"'":return s.slice(l);case"<":r=h[e.slice(1,-1)];break;default:var n=+e;if(0==n)return t;if(u<n){var i=f(n/10);return 0===i?t:i<=u?void 0===c[i-1]?e.charAt(1):c[i-1]+e.charAt(1):t}r=c[n-1]}return void 0===r?"":r})}},function(t,e,r){r=r(2);t.exports=r(function(){var t=RegExp("(?<a>b)","string".charAt(5));return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})},function(t,e,r){r=r(2);t.exports=r(function(){var t=RegExp(".","string".charAt(0));return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})},,function(t,e,l){!function(n){t.exports=function n(i,o,s){function a(e,t){if(!o[e]){if(!i[e]){if(0,c)return c(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r=o[e]={exports:{}};i[e][0].call(r.exports,function(t){return a(i[e][1][t]||t)},r,r.exports,n,i,o,s)}return o[e].exports}for(var c=!1,t=0;t<s.length;t++)a(s[t]);return a}({1:[function(b,x,t){!function(r,w){!function(){"use strict";var n=b("events").EventEmitter,o=b("./store"),a=b("mqtt-packet"),c=b("readable-stream").Writable,t=b("inherits"),e=b("reinterval"),u=b("./validations"),f=b("xtend"),d=b("debug")("mqttjs:client"),h=r?r.nextTick:function(t){setTimeout(t,0)},p=w.setImmediate||function(t){h(t)},s={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},l=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],y={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function g(t,e,r){d("sendPacket :: packet: %O",e),d("sendPacket :: emitting `packetsend`"),t.emit("packetsend",e),d("sendPacket :: writing to stream");e=a.writeToStream(e,t.stream,t.options);d("sendPacket :: writeToStream result %s",e),!e&&r?(d("sendPacket :: handle events on `drain` once through callback."),t.stream.once("drain",r)):r&&(d("sendPacket :: invoking cb"),r())}function i(e,r,n,i){d("storeAndSend :: store packet with cmd %s to outgoingStore",r.cmd),e.outgoingStore.put(r,function(t){return t?n&&n(t):(i(),void g(e,r,n))})}function m(t){d("nop ::",t)}function v(t,e){var r,i=this;if(!(this instanceof v))return new v(t,e);for(r in this.options=e||{},s)void 0===this.options[r]?this.options[r]=s[r]:this.options[r]=e[r];d("MqttClient :: options.protocol",e.protocol),d("MqttClient :: options.protocolVersion",e.protocolVersion),d("MqttClient :: options.username",e.username),d("MqttClient :: options.keepalive",e.keepalive),d("MqttClient :: options.reconnectPeriod",e.reconnectPeriod),d("MqttClient :: options.rejectUnauthorized",e.rejectUnauthorized),this.options.clientId="string"==typeof e.clientId?e.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),d("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===e.protocolVersion&&e.customHandleAcks?e.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=t,this.outgoingStore=e.outgoingStore||new o,this.incomingStore=e.incomingStore||new o,this.queueQoSZero=void 0===e.queueQoSZero||e.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this._firstConnection=!0,this.on("connect",function(){var n=this.queue;d("connect :: sending queued packets"),function e(){var t,r=n.shift();d("deliver :: entry %o",r),r&&(t=r.packet,d("deliver :: call _sendPacket for %o",t),i._sendPacket(t,function(t){r.cb&&r.cb(t),e()}))}()}),this.on("close",function(){d("close :: connected set to `false`"),this.connected=!1,d("close :: clearing connackTimer"),clearTimeout(this.connackTimer),d("close :: clearing ping timer"),null!==i.pingTimer&&(i.pingTimer.clear(),i.pingTimer=null),d("close :: calling _setupReconnect"),this._setupReconnect()}),n.call(this),d("MqttClient :: setting up stream"),this._setupStream()}t(v,n),v.prototype._setupStream=function(){var r=this,t=new c,n=a.parser(this.options),i=null,e=[];function o(){var t;e.length?h(s):(t=i,i=null,t())}function s(){d("work :: getting next packet in queue");var t=e.shift();t?(d("work :: packet pulled from queue"),r._handlePacket(t,o)):(d("work :: no packets in queue"),t=i,i=null,d("work :: done flag is %s",!!t),t&&t())}if(d("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),d("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),n.on("packet",function(t){d("parser :: on packet push to packets array."),e.push(t)}),t._write=function(t,e,r){i=r,d("writable stream :: parsing buffer"),n.parse(t),s()},d("_setupStream :: pipe stream to writable stream"),this.stream.pipe(t),this.stream.on("error",function(t){d("streamErrorHandler :: error",t.message),l.includes(t.code)?(d("streamErrorHandler :: emitting error"),r.emit("error",t)):m(t)}),this.stream.on("close",function(){var e;d("(%s)stream :: on close",r.options.clientId),(e=r.outgoing)&&(d("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(e).forEach(function(t){e[t].volatile&&"function"==typeof e[t].cb&&(e[t].cb(new Error("Connection closed")),delete e[t])})),d("stream: emit close to MqttClient"),r.emit("close")}),d("_setupStream: sending packet `connect`"),(t=Object.create(this.options)).cmd="connect",g(this,t),n.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return r.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&g(this,f({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){d("!!connectTimeout hit!! Calling _cleanUp with force `true`"),r._cleanUp(!0)},this.options.connectTimeout)},v.prototype._handlePacket=function(t,e){var r=this.options;if(5===r.protocolVersion&&r.properties&&r.properties.maximumPacketSize&&r.properties.maximumPacketSize<t.length)return this.emit("error",new Error("exceeding packets size "+t.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(d("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",t),t.cmd){case"publish":this._handlePublish(t,e);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(t),e();break;case"pubrel":this._handlePubrel(t,e);break;case"connack":this._handleConnack(t),e();break;case"pingresp":this._handlePingresp(t),e();break;case"disconnect":this._handleDisconnect(t),e()}},v.prototype._checkDisconnecting=function(t){return this.disconnecting&&(t?t(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},v.prototype.publish=function(t,e,r,n){var i;d("publish :: message `%s` to topic `%s`",e,t);var o=this.options;if("function"==typeof r&&(n=r,r=null),r=f({qos:0,retain:!1,dup:!1},r),this._checkDisconnecting(n))return this;switch(i={cmd:"publish",topic:t,payload:e,qos:r.qos,retain:r.retain,messageId:this._nextId(),dup:r.dup},5===o.protocolVersion&&(i.properties=r.properties,(!o.properties&&i.properties&&i.properties.topicAlias||r.properties&&o.properties&&(r.properties.topicAlias&&o.properties.topicAliasMaximum&&r.properties.topicAlias>o.properties.topicAliasMaximum||!o.properties.topicAliasMaximum&&r.properties.topicAlias))&&delete i.properties.topicAlias),d("publish :: qos",r.qos),r.qos){case 1:case 2:this.outgoing[i.messageId]={volatile:!1,cb:n||m},this._storeProcessing?(d("_storeProcessing enabled"),this._packetIdsDuringStoreProcessing[i.messageId]=!1,this._storePacket(i,void 0,r.cbStorePut)):(d("MqttClient:publish: packet cmd: %s",i.cmd),this._sendPacket(i,void 0,r.cbStorePut));break;default:this._storeProcessing?(d("_storeProcessing enabled"),this._storePacket(i,n,r.cbStorePut)):(d("MqttClient:publish: packet cmd: %s",i.cmd),this._sendPacket(i,n,r.cbStorePut))}return this},v.prototype.subscribe=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++)t[e]=arguments[e];var i=[],r=t.shift(),n=r.resubscribe,o=t.pop()||m,s=t.pop(),a=this,c=this.options.protocolVersion;if(delete r.resubscribe,"string"==typeof r&&(r=[r]),"function"!=typeof o&&(s=o,o=m),null!==(l=u.validateTopics(r)))return p(o,new Error("Invalid topic "+l)),this;if(this._checkDisconnecting(o))return d("subscribe: discconecting true"),this;var h,l={qos:0};if(5===c&&(l.nl=!1,l.rap=!1,l.rh=0),s=f(l,s),Array.isArray(r)?r.forEach(function(t){d("subscribe: array topic %s",t),(!a._resubscribeTopics.hasOwnProperty(t)||a._resubscribeTopics[t].qos<s.qos||n)&&(t={topic:t,qos:s.qos},5===c&&(t.nl=s.nl,t.rap=s.rap,t.rh=s.rh,t.properties=s.properties),d("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos),i.push(t))}):Object.keys(r).forEach(function(t){var e;d("subscribe: object topic %s",t),(!a._resubscribeTopics.hasOwnProperty(t)||a._resubscribeTopics[t].qos<r[t].qos||n)&&(e={topic:t,qos:r[t].qos},5===c&&(e.nl=r[t].nl,e.rap=r[t].rap,e.rh=r[t].rh,e.properties=s.properties),d("subscribe: pushing `%s` to subs list",e),i.push(e))}),l={cmd:"subscribe",subscriptions:i,qos:1,retain:!1,dup:!1,messageId:this._nextId()},s.properties&&(l.properties=s.properties),i.length)return this.options.resubscribe&&(d("subscribe :: resubscribe true"),h=[],i.forEach(function(t){var e;0<a.options.reconnectPeriod&&(e={qos:t.qos},5===c&&(e.nl=t.nl||!1,e.rap=t.rap||!1,e.rh=t.rh||0,e.properties=t.properties),a._resubscribeTopics[t.topic]=e,h.push(t.topic))}),a.messageIdToTopic[l.messageId]=h),this.outgoing[l.messageId]={volatile:!0,cb:function(t,e){if(!t)for(var r=e.granted,n=0;n<r.length;n+=1)i[n].qos=r[n];o(t,i)}},d("subscribe :: call _sendPacket"),this._sendPacket(l),this;o(null,[])},v.prototype.unsubscribe=function(){for(var t={cmd:"unsubscribe",qos:1,messageId:this._nextId()},e=this,r=new Array(arguments.length),n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r.shift(),o=r.pop()||m,s=r.pop();return"string"==typeof i&&(i=[i]),"function"!=typeof o&&(s=o,o=m),this._checkDisconnecting(o)||("string"==typeof i?t.unsubscriptions=[i]:Array.isArray(i)&&(t.unsubscriptions=i),this.options.resubscribe&&t.unsubscriptions.forEach(function(t){delete e._resubscribeTopics[t]}),"object"==typeof s&&s.properties&&(t.properties=s.properties),this.outgoing[t.messageId]={volatile:!0,cb:o},d("unsubscribe: call _sendPacket"),this._sendPacket(t)),this},v.prototype.end=function(t,e,r){var n=this;function i(){d("end :: (%s) :: finish :: calling _cleanUp with force %s",n.options.clientId,t),n._cleanUp(t,()=>{d("end :: finish :: calling process.nextTick on closeStores"),h(function(){d("end :: closeStores: closing incoming and outgoing stores"),n.disconnected=!0,n.incomingStore.close(function(e){n.outgoingStore.close(function(t){d("end :: closeStores: emitting end"),n.emit("end"),r&&(t=e||t,d("end :: closeStores: invoking callback with args"),r(t))})}),n._deferredReconnect&&n._deferredReconnect()}.bind(n))},e)}return d("end :: (%s)",this.options.clientId),null!=t&&"boolean"==typeof t||(r=e||m,e=t,t=!1,"object"!=typeof e&&(r=e,e=null,"function"!=typeof r&&(r=m))),"object"!=typeof e&&(r=e,e=null),d("end :: cb? %s",!!r),r=r||m,this.disconnecting?r():(this._clearReconnect(),this.disconnecting=!0,!t&&0<Object.keys(this.outgoing).length?(d("end :: (%s) :: calling finish in 10ms once outgoing is empty",n.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,i,10))):(d("end :: (%s) :: immediately calling finish",n.options.clientId),i())),this},v.prototype.removeOutgoingMessage=function(t){var e=this.outgoing[t]?this.outgoing[t].cb:null;return delete this.outgoing[t],this.outgoingStore.del({messageId:t},function(){e(new Error("Message removed"))}),this},v.prototype.reconnect=function(t){d("client reconnect");function e(){t?(r.options.incomingStore=t.incomingStore,r.options.outgoingStore=t.outgoingStore):(r.options.incomingStore=null,r.options.outgoingStore=null),r.incomingStore=r.options.incomingStore||new o,r.outgoingStore=r.options.outgoingStore||new o,r.disconnecting=!1,r.disconnected=!1,r._deferredReconnect=null,r._reconnect()}var r=this;return this.disconnecting&&!this.disconnected?this._deferredReconnect=e:e(),this},v.prototype._reconnect=function(){d("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),d("client already connected. disconnecting first.")):(d("_reconnect: calling _setupStream"),this._setupStream())},v.prototype._setupReconnect=function(){var t=this;!t.disconnecting&&!t.reconnectTimer&&0<t.options.reconnectPeriod?(this.reconnecting||(d("_setupReconnect :: emit `offline` state"),this.emit("offline"),d("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),d("_setupReconnect :: setting reconnectTimer for %d ms",t.options.reconnectPeriod),t.reconnectTimer=setInterval(function(){d("reconnectTimer :: reconnect triggered!"),t._reconnect()},t.options.reconnectPeriod)):d("_setupReconnect :: doing nothing...")},v.prototype._clearReconnect=function(){d("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},v.prototype._cleanUp=function(t,e){var r,n=arguments[2];e&&(d("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",e)),d("_cleanUp :: forced? %s",t),t?(0===this.options.reconnectPeriod&&this.options.clean&&(r=this.outgoing)&&(d("flush: queue exists? %b",!!r),Object.keys(r).forEach(function(t){"function"==typeof r[t].cb&&(r[t].cb(new Error("Connection closed")),delete r[t])})),d("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy()):(n=f({cmd:"disconnect"},n),d("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(n,p.bind(null,this.stream.end.bind(this.stream)))),this.disconnecting||(d("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(d("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),e&&!this.connected&&(d("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",e),e())},v.prototype._sendPacket=function(t,e,r){if(d("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||m,!this.connected)return d("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(t,e,r);switch(this._shiftPingInterval(),t.cmd){case"publish":break;case"pubrel":return void i(this,t,e,r);default:return void g(this,t,e)}switch(t.qos){case 2:case 1:i(this,t,e,r);break;default:g(this,t,e)}d("_sendPacket :: (%s) ::  end",this.options.clientId)},v.prototype._storePacket=function(t,e,r){d("_storePacket :: packet: %o",t),d("_storePacket :: cb? %s",!!e),r=r||m,0===(t.qos||0)&&this.queueQoSZero||"publish"!==t.cmd?this.queue.push({packet:t,cb:e}):0<t.qos?(e=this.outgoing[t.messageId]?this.outgoing[t.messageId].cb:null,this.outgoingStore.put(t,function(t){return t?e&&e(t):void r()})):e&&e(new Error("No connection to broker"))},v.prototype._setupPingTimer=function(){d("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);var t=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=e(function(){t._checkPing()},1e3*this.options.keepalive))},v.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},v.prototype._checkPing=function(){d("_checkPing :: checking ping..."),this.pingResp?(d("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(d("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},v.prototype._handlePingresp=function(){this.pingResp=!0},v.prototype._handleConnack=function(t){d("_handleConnack");var e=this.options,r=5===e.protocolVersion?t.reasonCode:t.returnCode;clearTimeout(this.connackTimer),t.properties&&(t.properties.topicAliasMaximum&&(e.properties||(e.properties={}),e.properties.topicAliasMaximum=t.properties.topicAliasMaximum),t.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=t.properties.serverKeepAlive,this._shiftPingInterval()),t.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=t.properties.maximumPacketSize)),0===r?(this.reconnecting=!1,this._onConnect(t)):0<r&&((t=new Error("Connection refused: "+y[r])).code=r,this.emit("error",t))},v.prototype._handlePublish=function(r,n){d("_handlePublish: packet %o",r),n=void 0!==n?n:m;var i=r.topic.toString(),o=r.payload,t=r.qos,s=r.messageId,a=this,e=this.options,c=[0,16,128,131,135,144,145,151,153];switch(d("_handlePublish: qos %d",t),t){case 2:e.customHandleAcks(i,o,r,function(t,e){return t instanceof Error||(e=t,t=null),t?a.emit("error",t):-1===c.indexOf(e)?a.emit("error",new Error("Wrong reason code for pubrec")):void(e?a._sendPacket({cmd:"pubrec",messageId:s,reasonCode:e},n):a.incomingStore.put(r,function(){a._sendPacket({cmd:"pubrec",messageId:s},n)}))});break;case 1:e.customHandleAcks(i,o,r,function(t,e){return t instanceof Error||(e=t,t=null),t?a.emit("error",t):-1===c.indexOf(e)?a.emit("error",new Error("Wrong reason code for puback")):(e||a.emit("message",i,o,r),void a.handleMessage(r,function(t){return t?n&&n(t):void a._sendPacket({cmd:"puback",messageId:s,reasonCode:e},n)}))});break;case 0:this.emit("message",i,o,r),this.handleMessage(r,n);break;default:d("_handlePublish: unknown QoS. Doing nothing.")}},v.prototype.handleMessage=function(t,e){e()},v.prototype._handleAck=function(t){var e,r=t.messageId,n=t.cmd,i=this.outgoing[r]?this.outgoing[r].cb:null,o=this;if(i){switch(d("_handleAck :: packet type",n),n){case"pubcomp":case"puback":var s=t.reasonCode;s&&0<s&&16!==s&&((e=new Error("Publish error: "+y[s])).code=s,i(e,t)),delete this.outgoing[r],this.outgoingStore.del(t,i);break;case"pubrec":var a={cmd:"pubrel",qos:2,messageId:r},s=t.reasonCode;s&&0<s&&16!==s?((e=new Error("Publish error: "+y[s])).code=s,i(e,t)):this._sendPacket(a);break;case"suback":delete this.outgoing[r];for(var c,h=0;h<t.granted.length;h++)0==(128&t.granted[h])||(c=this.messageIdToTopic[r])&&c.forEach(function(t){delete o._resubscribeTopics[t]});i(null,t);break;case"unsuback":delete this.outgoing[r],i(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else d("_handleAck :: Server sent an ack in error. Ignoring.")},v.prototype._handlePubrel=function(t,r){d("handling pubrel packet"),r=void 0!==r?r:m;var n=this,i={cmd:"pubcomp",messageId:t.messageId};n.incomingStore.get(t,function(t,e){t?n._sendPacket(i,r):(n.emit("message",e.topic,e.payload,e),n.handleMessage(e,function(t){return t?r(t):(n.incomingStore.del(e,m),void n._sendPacket(i,r))}))})},v.prototype._handleDisconnect=function(t){this.emit("disconnect",t)},v.prototype._nextId=function(){var t=this.nextId++;return 65536===this.nextId&&(this.nextId=1),t},v.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},v.prototype._resubscribe=function(t){d("_resubscribe");var e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!t.sessionPresent)&&0<e.length)if(this.options.resubscribe)if(5===this.options.protocolVersion){d("_resubscribe: protocolVersion 5");for(var r=0;r<e.length;r++){var n={};n[e[r]]=this._resubscribeTopics[e[r]],n.resubscribe=!0,this.subscribe(n,{properties:n[e[r]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},v.prototype._onConnect=function(o){var s;this.disconnected?this.emit("connect",o):((s=this)._setupPingTimer(),this._resubscribe(o),this.connected=!0,function r(){var e=s.outgoingStore.createStream();function n(){s._storeProcessing=!1,s._packetIdsDuringStoreProcessing={}}function i(){e.destroy(),e=null,n()}s.once("close",i),e.on("error",function(t){n(),s.removeListener("close",i),s.emit("error",t)}),e.on("end",function(){var t,e=!0;for(t in s._packetIdsDuringStoreProcessing)if(!s._packetIdsDuringStoreProcessing[t]){e=!1;break}e?(n(),s.removeListener("close",i),s.emit("connect",o)):r()}),function r(){var n,t;e&&(s._storeProcessing=!0,(t=e.read(1))?s._packetIdsDuringStoreProcessing[t.messageId]?r():s.disconnecting||s.reconnectTimer?e.destroy&&e.destroy():(n=s.outgoing[t.messageId]?s.outgoing[t.messageId].cb:null,s.outgoing[t.messageId]={volatile:!1,cb:function(t,e){n&&n(t,e),r()}},s._packetIdsDuringStoreProcessing[t.messageId]=!0,s._sendPacket(t)):e.once("readable",r))}()}())},x.exports=v}.call(this)}.call(this,b("_process"),void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./store":7,"./validations":8,_process:32,debug:15,events:19,inherits:21,"mqtt-packet":24,"readable-stream":51,reinterval:52,xtend:61}],2:[function(t,e,r){!function(f){!function(){"use strict";var s,a,c,h=t("readable-stream").Transform,l=t("duplexify"),u=!1;e.exports=function(t,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");var r="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";(o=e).hostname||(o.hostname="localhost"),o.path||(o.path="/"),o.wsOptions||(o.wsOptions={});var n,i,o,o=(i="alis"===(n=e).protocol?"wss":"ws",o=i+"://"+n.hostname+n.path,n.port&&80!==n.port&&443!==n.port&&(o=i+"://"+n.hostname+":"+n.port+n.path),o="function"==typeof n.transformWsUrl?n.transformWsUrl(o,n,t):o);return(s=e.my).connectSocket({url:o,protocols:r}),(r=new h)._write=function(t,e,r){s.sendSocketMessage({data:t.buffer,success:function(){r()},fail:function(){r(new Error)}})},r._flush=function(t){s.closeSocket({success:function(){t()}})},a=r,c=l.obj(),u||(u=!0,s.onSocketOpen(function(){c.setReadable(a),c.setWritable(a),c.emit("connect")}),s.onSocketMessage(function(t){var e,r;"string"==typeof t.data?(e=f.from(t.data,"base64"),a.push(e)):((r=new FileReader).addEventListener("load",function(){var t=(t=r.result)instanceof ArrayBuffer?f.from(t):f.from(t,"utf8");a.push(t)}),r.readAsArrayBuffer(t.data))}),s.onSocketClose(function(){c.end(),c.destroy()}),s.onSocketError(function(t){c.destroy(t)})),c}}.call(this)}.call(this,t("buffer").Buffer)},{buffer:14,duplexify:17,"readable-stream":51}],3:[function(t,e,r){"use strict";var n=t("net"),i=t("debug")("mqttjs:tcp");e.exports=function(t,e){var r;return e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",r=e.port,e=e.hostname,i("port %d and host %s",r,e),n.createConnection(r,e)}},{debug:15,net:13}],4:[function(t,e,r){"use strict";var i=t("tls"),o=t("debug")("mqttjs:tls");e.exports=function(e,r){var n;function t(t){r.rejectUnauthorized&&e.emit("error",t),n.end()}return r.port=r.port||8883,r.host=r.hostname||r.host||"localhost",r.servername=r.host,r.rejectUnauthorized=!1!==r.rejectUnauthorized,delete r.path,o("port %d host %s rejectUnauthorized %b",r.port,r.host,r.rejectUnauthorized),(n=i.connect(r)).on("secureConnect",function(){r.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",t)}),n.on("error",t),n}},{debug:15,tls:13}],5:[function(r,o,t){!function(e,w){!function(){"use strict";const i=r("ws"),p=r("debug")("mqttjs:ws"),y=r("duplexify"),g=r("readable-stream").Transform;let t=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];const n=void 0!==e&&"browser"===e.title||"function"==typeof l;function m(t,e){let r=t.protocol+"://"+t.hostname+":"+t.port+t.path;return"function"==typeof t.transformWsUrl&&(r=t.transformWsUrl(r,t,e)),r}function v(e){let r=e;return e.hostname||(r.hostname="localhost"),e.port||("wss"===e.protocol?r.port=443:r.port=80),e.path||(r.path="/"),e.wsOptions||(r.wsOptions={}),n||"wss"!==e.protocol||t.forEach(function(t){e.hasOwnProperty(t)&&!e.wsOptions.hasOwnProperty(t)&&(r.wsOptions[t]=e[t])}),r}o.exports=n?function(n,i){let e;p("browserStreamBuilder");const o=function(t){let e=v(t);if(e.hostname||(e.hostname=e.host),!e.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");const t=new URL(document.URL);e.hostname=t.hostname,e.port||(e.port=t.port)}return void 0===e.objectMode&&(e.objectMode=!(!0===e.binary||void 0===e.binary)),e}(i).browserBufferSize||524288,s=i.browserBufferTimeout||1e3,a=!i.objectMode;let c=function(){var t="MQIsdp"===i.protocolId&&3===i.protocolVersion?"mqttv3.1":"mqtt";let e=m(i,n),r=new WebSocket(e,[t]);return r.binaryType="arraybuffer",r}(),r=function(t,e){let r=new g({objectModeMode:t.objectMode});return r._write=e,r._flush=function(t){c.close(),t()},r}(i,function t(e,r,n){c.bufferedAmount>o&&setTimeout(t,s,e,r,n),a&&"string"==typeof e&&(e=w.from(e,"utf8"));try{c.send(e)}catch(t){return n(t)}n()});i.objectMode||(r._writev=d),r.on("close",()=>{c.close()});var t=void 0!==c.addEventListener;function h(){e.setReadable(r),e.setWritable(r),e.emit("connect")}function l(){e.end(),e.destroy()}function u(t){e.destroy(t)}function f(t){let e=t.data;e=e instanceof ArrayBuffer?w.from(e):w.from(e,"utf8"),r.push(e)}function d(e,t){const r=new Array(e.length);for(let t=0;t<e.length;t++)"string"==typeof e[t].chunk?r[t]=w.from(e[t],"utf8"):r[t]=e[t].chunk;this._write(w.concat(r),"binary",t)}return c.readyState===c.OPEN?e=r:(e=e=y(void 0,void 0,i),i.objectMode||(e._writev=d),t?c.addEventListener("open",h):c.onopen=h),e.socket=c,t?(c.addEventListener("close",l),c.addEventListener("error",u),c.addEventListener("message",f)):(c.onclose=l,c.onerror=u,c.onmessage=f),e}:function(t,e){p("streamBuilder");e=v(e),t=m(e,t);let r=function(t,e){p("createWebSocket"),p("protocol: "+e.protocolId+" "+e.protocolVersion);var r="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";return p("creating new Websocket for url: "+t+" and protocol: "+r),new i(t,[r],e.wsOptions)}(t,e),n=i.createWebSocketStream(r,e.wsOptions);return n.url=t,r.on("close",()=>{n.destroy()}),n}}.call(this)}.call(this,r("_process"),r("buffer").Buffer)},{_process:32,buffer:14,debug:15,duplexify:17,"readable-stream":51,ws:60}],6:[function(t,e,r){!function(u){!function(){"use strict";var s,a,c,h=t("readable-stream").Transform,l=t("duplexify");e.exports=function(t,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");var r="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";(i=e).hostname||(i.hostname="localhost"),i.path||(i.path="/"),i.wsOptions||(i.wsOptions={});var n,i,e=(i="wxs"===(n=e).protocol?"wss":"ws",e=i+"://"+n.hostname+n.path,n.port&&80!==n.port&&443!==n.port&&(e=i+"://"+n.hostname+":"+n.port+n.path),e="function"==typeof n.transformWsUrl?n.transformWsUrl(e,n,t):e);s=wx.connectSocket({url:e,protocols:[r]}),(r=new h)._write=function(t,e,r){s.send({data:t.buffer,success:function(){r()},fail:function(t){r(new Error(t))}})},r._flush=function(t){s.close({success:function(){t()}})},a=r,(c=l.obj())._destroy=function(t,e){s.close({success:function(){e&&e(t)}})};var o=c.destroy;return c.destroy=function(){c.destroy=o;var t=this;setTimeout(function(){s.close({fail:function(){t._destroy(new Error)}})},0)}.bind(c),s.onOpen(function(){c.setReadable(a),c.setWritable(a),c.emit("connect")}),s.onMessage(function(t){t=(t=t.data)instanceof ArrayBuffer?u.from(t):u.from(t,"utf8");a.push(t)}),s.onClose(function(){c.end(),c.destroy()}),s.onError(function(t){c.destroy(new Error(t.errMsg))}),c}}.call(this)}.call(this,t("buffer").Buffer)},{buffer:14,duplexify:17,"readable-stream":51}],7:[function(t,e,r){"use strict";var n=t("xtend"),i=t("readable-stream").Readable,o={objectMode:!0},s={clean:!0};function a(t){if(!(this instanceof a))return new a(t);this.options=t||{},this.options=n(s,t),this._inflights=new Map}a.prototype.put=function(t,e){return this._inflights.set(t.messageId,t),e&&e(),this},a.prototype.createStream=function(){var t=new i(o),e=!1,r=[],n=0;return this._inflights.forEach(function(t,e){r.push(t)}),t._read=function(){!e&&n<r.length?this.push(r[n++]):this.push(null)},t.destroy=function(){var t;e||(t=this,e=!0,setTimeout(function(){t.emit("close")},0))},t},a.prototype.del=function(t,e){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),e(null,t)):e&&e(new Error("missing packet")),this},a.prototype.get=function(t,e){return(t=this._inflights.get(t.messageId))?e(null,t):e&&e(new Error("missing packet")),this},a.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},e.exports=a},{"readable-stream":51,xtend:61}],8:[function(t,e,r){"use strict";e.exports={validateTopics:function(t){if(0===t.length)return"empty_topic_list";for(var e=0;e<t.length;e++)if(!function(t){for(var e=t.split("/"),r=0;r<e.length;r++)if("+"!==e[r]){if("#"===e[r])return r===e.length-1;if(-1!==e[r].indexOf("+")||-1!==e[r].indexOf("#"))return}return 1}(t[e]))return t[e];return null}}},{}],9:[function(n,h,t){!function(r){!function(){"use strict";var i=n("../client"),t=n("../store"),o=n("url"),s=n("xtend"),a=n("debug")("mqttjs"),c={};function e(t,e){if(a("connecting to an MQTT broker..."),"object"!=typeof t||e||(e=t,t=null),e=e||{},t){var r=o.parse(t,!0);if(null!=r.port&&(r.port=Number(r.port)),null===(e=s(r,e)).protocol)throw new Error("Missing protocol");e.protocol=e.protocol.replace(/:$/,"")}if((t=e).auth&&((r=t.auth.match(/^(.+):(.+)$/))?(t.username=r[1],t.password=r[2]):t.username=t.auth),e.query&&"string"==typeof e.query.clientId&&(e.clientId=e.query.clientId),e.cert&&e.key){if(!e.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(e.protocol))switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;case"ali":e.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+e.protocol+'"!')}}var n;if(c[e.protocol]||(n=-1!==["mqtts","wss"].indexOf(e.protocol),e.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(t,e){return(!n||e%2!=0)&&"function"==typeof c[t]})[0]),!1===e.clean&&!e.clientId)throw new Error("Missing clientId for unclean clients");e.protocol&&(e.defaultProtocol=e.protocol);t=new i(function(t){return e.servers&&(t._reconnectCount&&t._reconnectCount!==e.servers.length||(t._reconnectCount=0),e.host=e.servers[t._reconnectCount].host,e.port=e.servers[t._reconnectCount].port,e.protocol=e.servers[t._reconnectCount].protocol||e.defaultProtocol,e.hostname=e.host,t._reconnectCount++),a("calling streambuilder for",e.protocol),c[e.protocol](t,e)},e);return t.on("error",function(){}),t}void 0!==r&&"browser"!==r.title||"function"!=typeof l?(c.mqtt=n("./tcp"),c.tcp=n("./tcp"),c.ssl=n("./tls"),c.tls=n("./tls"),c.mqtts=n("./tls")):(c.wx=n("./wx"),c.wxs=n("./wx"),c.ali=n("./ali"),c.alis=n("./ali")),c.ws=n("./ws"),c.wss=n("./ws"),h.exports=e,h.exports.connect=e,h.exports.MqttClient=i,h.exports.Store=t}.call(this)}.call(this,n("_process"))},{"../client":1,"../store":7,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:32,debug:15,url:56,xtend:61}],10:[function(t,e,r){"use strict";r.byteLength=function(t){var e=l(t),t=e[0],e=e[1];return 3*(t+e)/4-e},r.toByteArray=function(t){for(var e,r=l(t),n=r[0],r=r[1],i=new h(3*(n+r)/4-r),o=0,s=0<r?n-4:n,a=0;a<s;a+=4)e=c[t.charCodeAt(a)]<<18|c[t.charCodeAt(a+1)]<<12|c[t.charCodeAt(a+2)]<<6|c[t.charCodeAt(a+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=255&e;return 2===r&&(e=c[t.charCodeAt(a)]<<2|c[t.charCodeAt(a+1)]>>4,i[o++]=255&e),1===r&&(e=c[t.charCodeAt(a)]<<10|c[t.charCodeAt(a+1)]<<4|c[t.charCodeAt(a+2)]>>2,i[o++]=e>>8&255,i[o++]=255&e),i},r.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i=[],o=0,s=r-n;o<s;o+=16383)i.push(function(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(a[(n=n)>>18&63]+a[n>>12&63]+a[n>>6&63]+a[63&n]);return i.join("")}(t,o,s<o+16383?s:o+16383));return 1==n?(e=t[r-1],i.push(a[e>>2]+a[e<<4&63]+"==")):2==n&&(e=(t[r-2]<<8)+t[r-1],i.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"=")),i.join("")};for(var a=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)a[i]=n[i],c[n.charCodeAt(i)]=i;function l(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("=");return[t=-1===t?e:t,t===e?0:4-t%4]}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],11:[function(t,e,r){"use strict";const{Buffer:l}=t("buffer"),n=Symbol.for("BufferList");function i(t){if(!(this instanceof i))return new i(t);i._init.call(this,t)}i._init=function(t){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},i.prototype._new=function(t){return new i(t)},i.prototype._offset=function(e){if(0===e)return[0,0];let r=0;for(let t=0;t<this._bufs.length;t++){var n=r+this._bufs[t].length;if(e<n||t===this._bufs.length-1)return[t,e-r];r=n}},i.prototype._reverseOffset=function(t){var e=t[0];let r=t[1];for(let t=0;t<e;t++)r+=this._bufs[t].length;return r},i.prototype.get=function(t){if(!(t>this.length||t<0)){t=this._offset(t);return this._bufs[t[0]][t[1]]}},i.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},i.prototype.copy=function(e,t,r,n){if(("number"!=typeof n||n>this.length)&&(n=this.length),(r="number"!=typeof r||r<0?0:r)>=this.length)return e||l.alloc(0);if(n<=0)return e||l.alloc(0);var i=!!e,o=this._offset(r),s=n-r;let a=s,c=i&&t||0,h=o[1];if(0===r&&n===this.length){if(!i)return 1===this._bufs.length?this._bufs[0]:l.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,c),c+=this._bufs[t].length;return e}if(a<=this._bufs[o[0]].length-h)return i?this._bufs[o[0]].copy(e,t,h,h+a):this._bufs[o[0]].slice(h,h+a);i||(e=l.allocUnsafe(s));for(let t=o[0];t<this._bufs.length;t++){const r=this._bufs[t].length-h;if(!(a>r)){this._bufs[t].copy(e,c,h,h+a),c+=r;break}this._bufs[t].copy(e,c,h),c+=r,a-=r,h=h&&0}return e.length>c?e.slice(0,c):e},i.prototype.shallowSlice=function(t,e){if(e="number"!=typeof e?this.length:e,(t=t||0)<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const r=this._offset(t),n=this._offset(e),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},i.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)},i.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},i.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(l.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"==typeof e&&(e=e.toString()),this._appendBuffer(l.from(e));return this},i.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},i.prototype.indexOf=function(t,e,r){if(void 0===r&&"string"==typeof e&&(r=e,e=void 0),"function"==typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof t?t=l.from([t]):"string"==typeof t?t=l.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=l.from(t.buffer,t.byteOffset,t.byteLength):l.isBuffer(t)||(t=l.from(t)),e=Number(e||0),(e=(e=isNaN(e)?0:e)<0?this.length+e:e)<0&&(e=0),0===t.length)return e>this.length?this.length:e;e=this._offset(e);let n=e[0],i=e[1];for(;n<this._bufs.length;n++){const o=this._bufs[n];for(;i<o.length;)if(o.length-i>=t.length){const r=o.indexOf(t,i);if(-1!==r)return this._reverseOffset([n,r]);i=o.length-t.length+1}else{const o=this._reverseOffset([n,i]);if(this._match(o,t))return o;i++}i=0}return-1},i.prototype._match=function(e,r){if(this.length-e<r.length)return!1;for(let t=0;t<r.length;t++)if(this.get(e+t)!==r[t])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)!function(r){i.prototype[r]=null===e[r]?function(t,e){return this.slice(t,t+e)[r](0,e)}:function(t=0){return this.slice(t,t+e[r])[r](0)}}(t)}(),i.prototype._isBufferList=function(t){return t instanceof i||i.isBufferList(t)},i.isBufferList=function(t){return null!=t&&t[n]},e.exports=i},{buffer:14}],12:[function(t,e,r){"use strict";const n=t("readable-stream").Duplex,i=t("inherits"),o=t("./BufferList");function s(t){if(!(this instanceof s))return new s(t);if("function"==typeof t){this._callback=t;const e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",e)}),this.on("unpipe",function(t){t.removeListener("error",e)}),t=null}o._init.call(this,t),n.call(this)}i(s,n),Object.assign(s.prototype,o.prototype),s.prototype._new=function(t){return new s(t)},s.prototype._write=function(t,e,r){this._appendBuffer(t),"function"==typeof r&&r()},s.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},s.prototype.end=function(t){n.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(t,e){this._bufs.length=0,this.length=0,e(t)},s.prototype._isBufferList=function(t){return t instanceof s||t instanceof o||s.isBufferList(t)},s.isBufferList=o.isBufferList,e.exports=s,e.exports.BufferListStream=s,e.exports.BufferList=o},{"./BufferList":11,inherits:21,"readable-stream":51}],13:[function(t,e,r){},{}],14:[function(R,t,P){!function(t){!function(){"use strict";var a=R("base64-js"),o=R("ieee754");P.Buffer=u,P.SlowBuffer=function(t){return u.alloc(+(t=+t!=t?0:t))},P.INSPECT_MAX_BYTES=50;var e=2147483647;function i(t){if(e<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');t=new Uint8Array(t);return t.__proto__=u.prototype,t}function u(t,e,r){if("number"!=typeof t)return n(t,e,r);if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}function n(t,e,r){if("string"==typeof t)return function(t,e){if(!u.isEncoding(e="string"!=typeof e||""===e?"utf8":e))throw new TypeError("Unknown encoding: "+e);var r=0|f(t,e),n=i(r),e=n.write(t,e);return n=e!==r?n.slice(0,e):n}(t,e);if(ArrayBuffer.isView(t))return h(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(L(t,ArrayBuffer)||t&&L(t.buffer,ArrayBuffer))return function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');r=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return r.__proto__=u.prototype,r}(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,r);n=function(t){if(u.isBuffer(t)){var e=0|l(t.length),r=i(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||A(t.length)?i(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return s(t),i(t<0?0:0|l(t))}function h(t){for(var e=t.length<0?0:0|l(t.length),r=i(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t){if(e<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e.toString(16)+" bytes");return 0|t}function f(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||L(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return k(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return T(t).length;default:if(i)return n?-1:k(t).length;e=(""+e).toLowerCase(),i=!0}}function r(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function d(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=A(r=+r)?i?0:t.length-1:r)<0?t.length+r:r)>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:p(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,r):p(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function p(t,e,r,n,i){var o=1,s=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s/=o=2,a/=2,r/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var h=-1,l=r;l<s;l++)if(c(t,l)===c(e,-1===h?0:l-h)){if(l-(h=-1===h?l:h)+1===a)return h*o}else-1!==h&&(l-=l-h),h=-1;else for(l=r=s<r+a?s-a:r;0<=l;l--){for(var u=!0,f=0;f<a;f++)if(c(t,l+f)!==c(e,f)){u=!1;break}if(u)return l}return-1}function y(t,e,r,n){return I(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function g(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,c,h=t[i],l=null,u=239<h?4:223<h?3:191<h?2:1;if(i+u<=r)switch(u){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[i+1]))&&127<(c=(31&h)<<6|63&o)&&(l=c);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(c=(15&h)<<12|(63&o)<<6|63&s)&&(c<55296||57343<c)&&(l=c);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)&&c<1114112&&(l=c)}null===l?(l=65533,u=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=u}return function(t){var e=t.length;if(e<=m)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=m));return r}(n)}P.kMaxLength=e,(u.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=n,u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,u.alloc=function(t,e,r){return e=e,r=r,s(t=t),!(t<=0)&&void 0!==e?"string"==typeof r?i(t).fill(e,r):i(t).fill(e):i(t)},u.allocUnsafe=c,u.allocUnsafeSlow=c,u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(L(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),L(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var r=u.allocUnsafe(e),n=0,i=0;i<t.length;++i){var o=t[i];if(L(o,Uint8Array)&&(o=u.from(o)),!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)r(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)r(this,e,e+3),r(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)r(this,e,e+7),r(this,e+1,e+6),r(this,e+2,e+5),r(this,e+3,e+4);return this},u.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?g(this,0,t):function(t,e,r){var n,i,o,s=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,r){var n=t.length;(!r||r<0||n<r)&&(r=n);for(var i="",o=e=!e||e<0?0:e;o<r;++o)i+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return i}(this,e,r);case"utf8":case"utf-8":return g(this,e,r);case"ascii":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}(this,e,r);case"latin1":case"binary":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}(this,e,r);case"base64":return n=this,o=r,0===(i=e)&&o===n.length?a.fromByteArray(n):a.fromByteArray(n.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,e,r);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",e=P.INSPECT_MAX_BYTES,t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim();return this.length>e&&(t+=" ... "),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(L(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(e=void 0===e?0:e)<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=e)return 0;if(i<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(n,i),h=t.slice(e,r),l=0;l<a;++l)if(c[l]!==h[l]){o=c[l],s=h[l];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return d(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return d(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||i<r)&&(r=i),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,s,a,c,h,l,u=!1;;)switch(n){case"hex":return function(t,e,r,n){r=Number(r)||0;var i=t.length-r;(!n||(n=Number(n))>i)&&(n=i),(i=e.length)/2<n&&(n=i/2);for(var o=0;o<n;++o){var s=parseInt(e.substr(2*o,2),16);if(A(s))return o;t[r+o]=s}return o}(this,t,e,r);case"utf8":case"utf-8":return h=e,l=r,I(k(t,(c=this).length-h),c,h,l);case"ascii":return y(this,t,e,r);case"latin1":case"binary":return y(this,t,e,r);case"base64":return o=this,s=e,a=r,I(T(t),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=e,s=r,I(function(t,e){for(var r,n,i=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(t,(a=this).length-o),a,o,s);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var m=4096;function v(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function w(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function b(t,e,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(t,e,r,n,i){return e=+e,r>>>=0,i||b(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function S(t,e,r,n,i){return e=+e,r>>>=0,i||b(t,0,r,8),o.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t);e=this.subarray(t,e);return e.__proto__=u.prototype,e},u.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=this[t+--e],i=1;0<e&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return t>>>=0,e||v(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||v(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||v(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||v(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||v(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=e,i=1,o=this[t+--n];0<n&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return t>>>=0,e||v(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||v(t,2,this.length);t=this[t]|this[t+1]<<8;return 32768&t?4294901760|t:t},u.prototype.readInt16BE=function(t,e){t>>>=0,e||v(t,2,this.length);t=this[t+1]|this[t]<<8;return 32768&t?4294901760|t:t},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||v(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||v(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return t>>>=0,e||v(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||v(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||v(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||v(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||w(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||w(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeIntLE=function(t,e,r,n){t=+t,e>>>=0,n||w(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){t=+t,e>>>=0,n||w(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,o=1,s=0;for(this[e+i]=255&t;0<=--i&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,1,127,-128),this[e]=255&(t=t<0?255+t+1:t),e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,4,2147483647,-2147483648),this[e]=(t=t<0?4294967295+t+1:t)>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeFloatLE=function(t,e,r){return x(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return x(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return S(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return S(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i=(n=t.length-e<n-r?t.length-e+r:n)-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var o=i-1;0<=o;--o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i;1===t.length&&(i=t.charCodeAt(0),("utf8"===n&&i<128||"latin1"===n)&&(t=i))}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(o=e;o<r;++o)this[o]=t;else{var s=u.isBuffer(t)?t:u.from(t,n),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var _=/[^+/0-9A-Za-z-_]/g;function k(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!i){if(56319<r){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(e-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,r<128){if(--e<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function T(t){return a.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(_,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function I(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function L(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function A(t){return t!=t}}.call(this)}.call(this,R("buffer").Buffer)},{"base64-js":10,buffer:14,ieee754:20}],15:[function(r,i,n){!function(e){!function(){n.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");let e=0,r=0;t[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&"%c"===t&&(r=++e)}),t.splice(r,0,n)}},n.save=function(t){try{t?n.storage.setItem("debug",t):n.storage.removeItem("debug")}catch(t){}},n.load=function(){let t;try{t=n.storage.getItem("debug")}catch(t){}return!t&&void 0!==e&&"env"in e&&(t=e.env.DEBUG),t},n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(t){}}(),n.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),i.exports=r("./common")(n);const{formatters:t}=i.exports;t.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}.call(this)}.call(this,r("_process"))},{"./common":16,_process:32}],16:[function(t,e,r){e.exports=function(e){function a(t){let r,e=null;function s(...i){if(s.enabled){const o=s,t=Number(new Date),e=t-(r||t);o.diff=e,o.prev=r,o.curr=t,r=t,i[0]=a.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");let n=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(t,e)=>{if("%%"===t)return"%";n++;const r=a.formatters[e];if("function"==typeof r){const a=i[n];t=r.call(o,a),i.splice(n,1),n--}return t}),a.formatArgs.call(o,i),(o.log||a.log).apply(o,i)}}return s.namespace=t,s.useColors=a.useColors(),s.color=a.selectColor(t),s.extend=n,s.destroy=a.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null===e?a.enabled(t):e,set:t=>{e=t}}),"function"==typeof a.init&&a.init(s),s}function n(t,e){const r=a(this.namespace+(void 0===e?":":e)+t);return r.log=this.log,r}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return((a.debug=a).default=a).coerce=function(t){return t instanceof Error?t.stack||t.message:t},a.disable=function(){var t=[...a.names.map(r),...a.skips.map(r).map(t=>"-"+t)].join(",");return a.enable(""),t},a.enable=function(t){let e;a.save(t),a.names=[],a.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),n=r.length;for(e=0;e<n;e++)r[e]&&("-"===(t=r[e].replace(/\*/g,".*?"))[0]?a.skips.push(new RegExp("^"+t.substr(1)+"$")):a.names.push(new RegExp("^"+t+"$")))},a.enabled=function(t){if("*"===t[t.length-1])return!0;let e,r;for(e=0,r=a.skips.length;e<r;e++)if(a.skips[e].test(t))return!1;for(e=0,r=a.names.length;e<r;e++)if(a.names[e].test(t))return!0;return!1},a.humanize=t("ms"),a.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(t=>{a[t]=e[t]}),a.names=[],a.skips=[],a.formatters={},a.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return a.colors[Math.abs(r)%a.colors.length]},a.enable(a.load()),a}},{ms:29}],17:[function(u,f,t){!function(l,r){!function(){function i(t,e){t._corked?t.once("uncork",e):e()}function o(r,n){return function(t){var e;t?(e=r,t="premature close"===t.message?null:t,e._autoDestroy&&e.destroy(t)):n&&!r._ended&&r.end()}}function n(){}var s=u("readable-stream"),a=u("end-of-stream"),t=u("inherits"),e=u("stream-shift"),c=r.from&&r.from!==Uint8Array.from?r.from([0]):new r([0]),h=function(t,e,r){if(!(this instanceof h))return new h(t,e,r);s.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};t(h,s.Duplex),h.obj=function(t,e,r){return(r=r||{}).objectMode=!0,r.highWaterMark=16,new h(t,e,r)},h.prototype.cork=function(){1==++this._corked&&this.emit("cork")},h.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},h.prototype.setWritable=function(t){var e,r,n;this._unwrite&&this._unwrite(),this.destroyed?t&&t.destroy&&t.destroy():null!==t&&!1!==t?(r=a(t,{writable:!0,readable:!1},o(e=this,this._forwardEnd)),n=function(){var t=e._ondrain;e._ondrain=null,t&&t()},this._unwrite&&l.nextTick(n),this._writable=t,this._writable.on("drain",n),this._unwrite=function(){e._writable.removeListener("drain",n),r()},this.uncork()):this.end()},h.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed)t&&t.destroy&&t.destroy();else{if(null===t||!1===t)return this.push(null),void this.resume();function e(){n._forward()}function r(){n.push(null)}var n=this,i=a(t,{writable:!1,readable:!0},o(this));this._drained=!0,this._readable=t,this._readable2=t._readableState?t:(t=t,new s.Readable({objectMode:!0,highWaterMark:16}).wrap(t)),this._readable2.on("readable",e),this._readable2.on("end",r),this._unread=function(){n._readable2.removeListener("readable",e),n._readable2.removeListener("end",r),i()},this._forward()}},h.prototype._read=function(){this._drained=!0,this._forward()},h.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var t;for(this._forwarding=!0;this._drained&&null!==(t=e(this._readable2));)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}},h.prototype.destroy=function(t,e){if(e=e||n,this.destroyed)return e(null);this.destroyed=!0;var r=this;l.nextTick(function(){r._destroy(t),e(null)})},h.prototype._destroy=function(t){var e;t&&(e=this._ondrain,this._ondrain=null,e?e(t):this.emit("error",t)),this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},h.prototype._write=function(t,e,r){if(!this.destroyed)return this._corked?i(this,this._write.bind(this,t,e,r)):t===c?this._finish(r):this._writable?void(!1===this._writable.write(t)?this._ondrain=r:this.destroyed||r()):r()},h.prototype._finish=function(r){var n=this;this.emit("preend"),i(this,function(){var t=n._forwardEnd&&n._writable,e=function(){!1===n._writableState.prefinished&&(n._writableState.prefinished=!0),n.emit("prefinish"),i(n,r)};!t||t._writableState&&t._writableState.finished?e():t._writableState?t.end(e):(t.end(),e())})},h.prototype.end=function(t,e,r){return"function"==typeof t?this.end(null,null,t):"function"==typeof e?this.end(t,null,e):(this._ended=!0,t&&this.write(t),this._writableState.ending||this.write(c),s.Writable.prototype.end.call(this,r))},f.exports=h}.call(this)}.call(this,u("_process"),u("buffer").Buffer)},{_process:32,buffer:14,"end-of-stream":18,inherits:21,"readable-stream":51,"stream-shift":54}],18:[function(t,e,r){!function(b){!function(){function m(){}var v=t("once"),w=function(e,t,r){if("function"==typeof t)return w(e,null,t);t=t||{},r=v(r||m);function n(){e.writable||y()}function i(){f=!1,d||r.call(e)}function o(t){r.call(e,t?new Error("exited with error code: "+t):null)}function s(t){r.call(e,t)}function a(){b.nextTick(g)}function c(){e.req.on("finish",y)}var h,l=e._writableState,u=e._readableState,f=t.readable||!1!==t.readable&&e.readable,d=t.writable||!1!==t.writable&&e.writable,p=!1,y=function(){d=!1,f||r.call(e)},g=function(){if(!p)return(!f||u&&u.ended&&!u.destroyed)&&(!d||l&&l.ended&&!l.destroyed)?void 0:r.call(e,new Error("premature close"))};return e.setHeader&&"function"==typeof e.abort?(e.on("complete",y),e.on("abort",a),e.req?c():e.on("request",c)):d&&!l&&(e.on("end",n),e.on("close",n)),(h=e).stdio&&Array.isArray(h.stdio)&&3===h.stdio.length&&e.on("exit",o),e.on("end",i),e.on("finish",y),!1!==t.error&&e.on("error",s),e.on("close",a),function(){p=!0,e.removeListener("complete",y),e.removeListener("abort",a),e.removeListener("request",c),e.req&&e.req.removeListener("finish",y),e.removeListener("end",n),e.removeListener("close",n),e.removeListener("finish",y),e.removeListener("exit",o),e.removeListener("end",i),e.removeListener("error",s),e.removeListener("close",a)}};e.exports=w}.call(this)}.call(this,t("_process"))},{_process:32,once:30}],19:[function(t,e,r){var a=Object.create||function(t){function e(){}return e.prototype=t,new e},s=Object.keys||function(t){var e,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return e},n=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=a(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0;var o,c=10;try{var h={};Object.defineProperty&&Object.defineProperty(h,"x",{value:0}),o=0===h.x}catch(t){o=!1}function l(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function u(t,e,r,n){var i,o,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');return(i=t._events)?(i.newListener&&(t.emit("newListener",e,r.listener||r),i=t._events),o=i[e]):(i=t._events=a(null),t._eventsCount=0),o?("function"==typeof o?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(s=l(t))&&0<s&&o.length>s&&(o.warned=!0,(s=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message))):(o=i[e]=r,++t._eventsCount),t}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function d(t,e,r){t={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},e=n.call(f,t);return e.listener=r,t.wrapFn=e}function p(t,e,r){t=t._events;if(!t)return[];e=t[e];return e?"function"==typeof e?r?[e.listener||e]:[e]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(e):g(e,e.length):[]}function y(t){var e=this._events;if(e){t=e[t];if("function"==typeof t)return 1;if(t)return t.length}return 0}function g(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}o?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');c=t}}):i.defaultMaxListeners=c,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(t){var e,r,n,i,o,s,a="error"===t;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if((e=1<arguments.length?arguments[1]:e)instanceof Error)throw e;a=new Error('Unhandled "error" event. ('+e+")");throw a.context=e,a}if(!(r=s[t]))return!1;var c="function"==typeof r;switch(n=arguments.length){case 1:!function(t,e){if(c)t.call(e);else for(var r=t.length,n=g(t,r),i=0;i<r;++i)n[i].call(e)}(r,this);break;case 2:!function(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,o=g(t,i),s=0;s<i;++s)o[s].call(r,n)}(r,c,this,arguments[1]);break;case 3:!function(t,e,r,n,i){if(e)t.call(r,n,i);else for(var o=t.length,s=g(t,o),a=0;a<o;++a)s[a].call(r,n,i)}(r,c,this,arguments[1],arguments[2]);break;case 4:!function(t,e,r,n,i,o){if(e)t.call(r,n,i,o);else for(var s=t.length,a=g(t,s),c=0;c<s;++c)a[c].call(r,n,i,o)}(r,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];!function(t,e,r){if(c)t.apply(e,r);else for(var n=t.length,i=g(t,n),o=0;o<n;++o)i[o].apply(e,r)}(r,this,i)}return!0},i.prototype.on=i.prototype.addListener=function(t,e){return u(this,t,e,!1)},i.prototype.prependListener=function(t,e){return u(this,t,e,!0)},i.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,d(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,d(this,t,e)),this},i.prototype.removeListener=function(t,e){var r,n,i,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=a(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;0<=o;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t){for(var e=i,r=e+1,n=t.length;r<n;e+=1,r+=1)t[e]=t[r];t.pop()}(r),1===r.length&&(n[t]=r[0]),n.removeListener&&this.emit("removeListener",t,s||e)}return this},i.prototype.removeAllListeners=function(t){var e,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=a(null),this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=a(null):delete r[t]),this;if(0===arguments.length){for(var n,i=s(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=a(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(e)for(o=e.length-1;0<=o;o--)this.removeListener(t,e[o]);return this},i.prototype.listeners=function(t){return p(this,t,!0)},i.prototype.rawListeners=function(t){return p(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},i.prototype.listenerCount=y,i.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],20:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,h=c>>1,l=-7,u=r?i-1:0,f=r?-1:1,r=t[e+u];for(u+=f,o=r&(1<<-l)-1,r>>=-l,l+=a;0<l;o=256*o+t[e+u],u+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;0<l;s=256*s+t[e+u],u+=f,l-=8);if(0===o)o=1-h;else{if(o===c)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,n),o-=h}return(r?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,c=8*o-i-1,h=(1<<c)-1,l=h>>1,u=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,o=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(e+=1<=s+l?u/n:u*Math.pow(2,1-l))*n&&(s++,n/=2),h<=s+l?(a=0,s=h):1<=s+l?(a=(e*n-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;t[r+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;0<c;t[r+f]=255&s,f+=d,s/=256,c-=8);t[r+f-d]|=128*o}},{}],21:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){var r;e&&(t.super_=e,(r=function(){}).prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t)}},{}],22:[function(t,e,r){!function(s){!function(){const o=e.exports;o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.codes={};for(const s in o.types){const e=o.types[s];o.codes[e]=s}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=s.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=s.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=s.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(const s in o.properties){const e=o.properties[s];o.propertiesCodes[e]=s}function t(i){return[0,1,2].map(n=>[0,1].map(r=>[0,1].map(t=>{const e=s.alloc(1);return e.writeUInt8(o.codes[i]<<o.CMD_SHIFT|(r?o.DUP_MASK:0)|n<<o.QOS_SHIFT|t,0,!0),e})))}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},o.PUBLISH_HEADER=t("publish"),o.SUBSCRIBE_HEADER=t("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=t("unsubscribe"),o.ACKS={unsuback:t("unsuback"),puback:t("puback"),pubcomp:t("pubcomp"),pubrel:t("pubrel"),pubrec:t("pubrec")},o.SUBACK_HEADER=s.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=s.from([3]),o.VERSION4=s.from([4]),o.VERSION5=s.from([5]),o.VERSION131=s.from([131]),o.VERSION132=s.from([132]),o.QOS=[0,1,2].map(t=>s.from([t])),o.EMPTY={pingreq:s.from([o.codes.pingreq<<4,0]),pingresp:s.from([o.codes.pingresp<<4,0]),disconnect:s.from([o.codes.disconnect<<4,0])}}.call(this)}.call(this,t("buffer").Buffer)},{buffer:14}],23:[function(e,r,t){!function(s){!function(){const n=e("./writeToStream"),t=e("events");class i extends t{constructor(){super(),this._array=new Array(20),this._i=0}write(t){return this._array[this._i++]=t,!0}concat(){let t=0;const e=new Array(this._array.length),r=this._array;let n,i=0;for(n=0;n<r.length&&void 0!==r[n];n++)"string"!=typeof r[n]?e[n]=r[n].length:e[n]=s.byteLength(r[n]),t+=e[n];const o=s.allocUnsafe(t);for(n=0;n<r.length&&void 0!==r[n];n++)"string"!=typeof r[n]?r[n].copy(o,i):o.write(r[n],i),i+=e[n];return o}}r.exports=function(t,e){const r=new i;return n(t,r,e),r.concat()}}.call(this)}.call(this,e("buffer").Buffer)},{"./writeToStream":28,buffer:14,events:19}],24:[function(t,e,r){r.parser=t("./parser").parser,r.generate=t("./generate"),r.writeToStream=t("./writeToStream")},{"./generate":23,"./parser":27,"./writeToStream":28}],25:[function(t,n,e){!function(o){!function(){const e={},i=o.isBuffer(o.from([1,2]).subarray(0,1));function r(t){const e=o.allocUnsafe(2);return e.writeUInt8(t>>8,0),e.writeUInt8(255&t,1),e}n.exports={cache:e,generateCache:function(){for(let t=0;t<65536;t++)e[t]=r(t)},generateNumber:r,genBufVariableByteInt:function(t){let e=0,r=0;const n=o.allocUnsafe(4);for(;e=t%128|0,0<(t=t/128|0)&&(e|=128),n.writeUInt8(e,r++),0<t&&r<4;);return 0<t&&(r=0),i?n.subarray(0,r):n.slice(0,r)},generate4ByteBuffer:function(t){const e=o.allocUnsafe(4);return e.writeUInt32BE(t,0),e}}}.call(this)}.call(this,t("buffer").Buffer)},{buffer:14}],26:[function(t,e,r){e.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],27:[function(t,e,r){const n=t("bl"),i=t("events"),o=t("./packet"),c=t("./constants"),h=t("debug")("mqtt-packet:parser");class s extends i{constructor(){super(),this.parser=this.constructor.parser}static parser(t){return this instanceof s?(this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new s).parser(t)}_resetState(){h("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new o,this.error=null,this._list=n(),this._stateCounter=0}parse(t){for(this.error&&this._resetState(),this._list.append(t),h("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||0<this._list.length)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,h("parse: state complete. _stateCounter is now: %d",this._stateCounter),h("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return h("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){var t=this._list.readUInt8(0);return this.packet.cmd=c.types[t>>c.CMD_SHIFT],this.packet.retain=0!=(t&c.RETAIN_MASK),this.packet.qos=t>>c.QOS_SHIFT&c.QOS_MASK,this.packet.dup=0!=(t&c.DUP_MASK),h("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){var t=this._parseVarByteNum(!0);return t&&(this.packet.length=t.value,this._list.consume(t.bytes)),h("_parseLength %d",t.value),!!t}_parsePayload(){h("_parsePayload: payload %O",this._list);let t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}t=!0}return h("_parsePayload complete result: %s",t),t}_parseConnect(){let t,e,r,n;h("_parseConnect");const i={},o=this.packet,s=this._parseString();if(null===s)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==s&&"MQIsdp"!==s)return this._emitError(new Error("Invalid protocolId"));if(o.protocolId=s,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(o.protocolVersion=this._list.readUInt8(this._pos),128<=o.protocolVersion&&(o.bridgeMode=!0,o.protocolVersion=o.protocolVersion-128),3!==o.protocolVersion&&4!==o.protocolVersion&&5!==o.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(i.username=this._list.readUInt8(this._pos)&c.USERNAME_MASK,i.password=this._list.readUInt8(this._pos)&c.PASSWORD_MASK,i.will=this._list.readUInt8(this._pos)&c.WILL_FLAG_MASK,i.will&&(o.will={},o.will.retain=0!=(this._list.readUInt8(this._pos)&c.WILL_RETAIN_MASK),o.will.qos=(this._list.readUInt8(this._pos)&c.WILL_QOS_MASK)>>c.WILL_QOS_SHIFT),o.clean=0!=(this._list.readUInt8(this._pos)&c.CLEAN_SESSION_MASK),this._pos++,o.keepalive=this._parseNum(),-1===o.keepalive)return this._emitError(new Error("Packet too short"));if(5===o.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(o.properties=t)}var a=this._parseString();if(null===a)return this._emitError(new Error("Packet too short"));if(o.clientId=a,h("_parseConnect: packet.clientId: %s",o.clientId),i.will){if(5===o.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(o.will.properties=t)}if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(o.will.topic=t,h("_parseConnect: packet.will.topic: %s",o.will.topic),null===(e=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));o.will.payload=e,h("_parseConnect: packet.will.paylaod: %s",o.will.payload)}if(i.username){if(null===(n=this._parseString()))return this._emitError(new Error("Cannot parse username"));o.username=n,h("_parseConnect: packet.username: %s",o.username)}if(i.password){if(null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));o.password=r}return this.settings=o,h("_parseConnect: complete"),o}_parseConnack(){h("_parseConnack");const t=this.packet;if(this._list.length<1)return null;if(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&c.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)2<=this._list.length?t.reasonCode=this._list.readUInt8(this._pos++):t.reasonCode=0;else{if(this._list.length<2)return null;t.returnCode=this._list.readUInt8(this._pos++)}if(-1===t.returnCode||-1===t.reasonCode)return this._emitError(new Error("Cannot parse return code"));var e;5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e)),h("_parseConnack: complete")}_parsePublish(){h("_parsePublish");const t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error("Cannot parse topic"));var e;0<t.qos&&!this._parseMessageId()||(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e)),t.payload=this._list.slice(this._pos,t.length),h("_parsePublish: payload from buffer list: %o",t.payload))}_parseSubscribe(){h("_parseSubscribe");const t=this.packet;let e,r,n,i,o,s,a;if(1!==t.qos)return this._emitError(new Error("Wrong subscribe header"));if(t.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}for(;this._pos<t.length;){if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse topic"));if(this._pos>=t.length)return this._emitError(new Error("Malformed Subscribe Payload"));n=(r=this._parseByte())&c.SUBSCRIBE_OPTIONS_QOS_MASK,s=0!=(r>>c.SUBSCRIBE_OPTIONS_NL_SHIFT&c.SUBSCRIBE_OPTIONS_NL_MASK),o=0!=(r>>c.SUBSCRIBE_OPTIONS_RAP_SHIFT&c.SUBSCRIBE_OPTIONS_RAP_MASK),i=r>>c.SUBSCRIBE_OPTIONS_RH_SHIFT&c.SUBSCRIBE_OPTIONS_RH_MASK,a={topic:e,qos:n},5===this.settings.protocolVersion?(a.nl=s,a.rap=o,a.rh=i):this.settings.bridgeMode&&(a.rh=0,a.rap=!0,a.nl=!0),h("_parseSubscribe: push subscription `%s` to subscription",a),t.subscriptions.push(a)}}}_parseSuback(){h("_parseSuback");const t=this.packet;var e;if(this.packet.granted=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e));this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}_parseUnsubscribe(){h("_parseUnsubscribe");const t=this.packet;var e;if(t.unsubscriptions=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e));this._pos<t.length;){var r=this._parseString();if(null===r)return this._emitError(new Error("Cannot parse topic"));h("_parseUnsubscribe: push topic `%s` to unsubscriptions",r),t.unsubscriptions.push(r)}}_parseUnsuback(){h("_parseUnsuback");const t=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){var e=this._parseProperties();for(Object.getOwnPropertyNames(e).length&&(t.properties=e),t.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){h("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const t=this.packet;var e;return this._parseMessageId(),5===this.settings.protocolVersion&&(2<t.length?(t.reasonCode=this._parseByte(),h("_parseConfirmation: packet.reasonCode `%d`",t.reasonCode)):t.reasonCode=0,3<t.length)&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e)),!0}_parseDisconnect(){const t=this.packet;var e;return h("_parseDisconnect"),5===this.settings.protocolVersion&&(0<this._list.length?t.reasonCode=this._parseByte():t.reasonCode=0,e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e)),h("_parseDisconnect result: true"),!0}_parseAuth(){h("_parseAuth");const t=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));t.reasonCode=this._parseByte();var e=this._parseProperties();return Object.getOwnPropertyNames(e).length&&(t.properties=e),h("_parseAuth: result: true"),!0}_parseMessageId(){const t=this.packet;return t.messageId=this._parseNum(),null===t.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(h("_parseMessageId: packet.messageId %d",t.messageId),!0)}_parseString(t){var e=this._parseNum(),r=e+this._pos;if(-1===e||r>this._list.length||r>this.packet.length)return null;r=this._list.toString("utf8",this._pos,r);return this._pos+=e,h("_parseString: result: %s",r),r}_parseStringPair(){return h("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){var t=this._parseNum(),e=t+this._pos;if(-1===t||e>this._list.length||e>this.packet.length)return null;e=this._list.slice(this._pos,e);return this._pos+=t,h("_parseBuffer: result: %o",e),e}_parseNum(){if(this._list.length-this._pos<2)return-1;var t=this._list.readUInt16BE(this._pos);return this._pos+=2,h("_parseNum: result: %s",t),t}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;var t=this._list.readUInt32BE(this._pos);return this._pos+=4,h("_parse4ByteNum: result: %s",t),t}_parseVarByteNum(t){h("_parseVarByteNum");let e,r=0,n=1,i=0,o=!1;for(var s=this._pos||0;r<4&&s+r<this._list.length;){if(i+=n*((e=this._list.readUInt8(s+r++))&c.VARBYTEINT_MASK),n*=128,0==(e&c.VARBYTEINT_FIN_MASK)){o=!0;break}if(this._list.length<=r)break}return!o&&4===r&&this._list.length>=r&&this._emitError(new Error("Invalid variable byte integer")),s&&(this._pos+=r),h("_parseVarByteNum: result: %o",o=!!o&&(t?{bytes:r,value:i}:i)),o}_parseByte(){let t;return this._pos<this._list.length&&(t=this._list.readUInt8(this._pos),this._pos++),h("_parseByte: result: %o",t),t}_parseByType(t){switch(h("_parseByType: type: %s",t),t){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){h("_parseProperties");const t=this._parseVarByteNum(),e=this._pos+t,r={};for(;this._pos<e;){const t=this._parseByte();if(!t)return this._emitError(new Error("Cannot parse property code type")),!1;const e=c.propertiesCodes[t];if(!e)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==e)r[e]?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(this._parseByType(c.propertiesTypes[e]))):r[e]=this._parseByType(c.propertiesTypes[e]);else{r[e]||(r[e]=Object.create(null));const t=this._parseByType(c.propertiesTypes[e]);var n;r[e][t.name]?(Array.isArray(r[e][t.name])||(n=r[e][t.name],r[e][t.name]=[n]),r[e][t.name].push(t.value)):r[e][t.name]=t.value}}return r}_newPacket(){return h("_newPacket"),this.packet&&(this._list.consume(this.packet.length),h("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),h("_newPacket: new packet"),this.packet=new o,!(this._pos=0)}_emitError(t){h("_emitError"),this.error=t,this.emit("error",t)}}e.exports=s},{"./constants":22,"./packet":26,bl:12,debug:15,events:19}],28:[function(R,P,t){!function(A){!function(){const g=R("./constants"),u=A.allocUnsafe(0),a=A.from([0]),t=R("./numbers"),r=R("process-nextick-args").nextTick,f=R("debug")("mqtt-packet:writeToStream"),n=t.cache,i=t.generateNumber,o=t.generateCache,c=t.genBufVariableByteInt,s=t.generate4ByteBuffer;let m=y,l=!0;function e(y,t,h){switch(f("generate called"),t.cork&&(t.cork(),r(d,t)),l&&(l=!1,o()),f("generate: packet.cmd: %s",y.cmd),y.cmd){case"connect":return function(t){var e=y||{},r=e.protocolId||"MQTT";let n=e.protocolVersion||4;var i=e.will;let o=e.clean;var s=e.keepalive||0,a=e.clientId||"",c=e.username,h=e.password,l=e.properties;void 0===o&&(o=!0);let u=0;if(!r||"string"!=typeof r&&!A.isBuffer(r))return t.emit("error",new Error("Invalid protocolId")),!1;if(u+=r.length+2,3!==n&&4!==n&&5!==n)return t.emit("error",new Error("Invalid protocol version")),!1;if(u+=1,("string"==typeof a||A.isBuffer(a))&&(a||4<=n)&&(a||o))u+=A.byteLength(a)+2;else{if(n<4)return t.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(0==+o)return t.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof s||s<0||65535<s||s%1!=0)return t.emit("error",new Error("Invalid keepalive")),!1;if(u+=2,u+=1,5===n){var f=S(t,l);if(!f)return!1;u+=f.length}if(i){if("object"!=typeof i)return t.emit("error",new Error("Invalid will")),!1;if(!i.topic||"string"!=typeof i.topic)return t.emit("error",new Error("Invalid will topic")),!1;if(u+=A.byteLength(i.topic)+2,u+=2,i.payload){if(!(0<=i.payload.length))return t.emit("error",new Error("Invalid will payload")),!1;"string"==typeof i.payload?u+=A.byteLength(i.payload):u+=i.payload.length}var d={};if(5===n){if(!(d=S(t,i.properties)))return!1;u+=d.length}}let p=!1;if(null!=c){if(!L(c))return t.emit("error",new Error("Invalid username")),!1;p=!0,u+=A.byteLength(c)+2}if(null!=h){if(!p)return t.emit("error",new Error("Username is required to use password")),!1;if(!L(h))return t.emit("error",new Error("Invalid password")),!1;u+=I(h)+2}t.write(g.CONNECT_HEADER),v(t,u),x(t,r),e.bridgeMode&&(n+=128),t.write(131===n?g.VERSION131:132===n?g.VERSION132:4===n?g.VERSION4:5===n?g.VERSION5:g.VERSION3);e=0;return e|=null!=c?g.USERNAME_MASK:0,e|=null!=h?g.PASSWORD_MASK:0,e|=i&&i.retain?g.WILL_RETAIN_MASK:0,e|=i&&i.qos?i.qos<<g.WILL_QOS_SHIFT:0,e|=i?g.WILL_FLAG_MASK:0,e|=o?g.CLEAN_SESSION_MASK:0,t.write(A.from([e])),m(t,s),5===n&&f.write(),x(t,a),i&&(5===n&&d.write(),w(t,i.topic),x(t,i.payload)),null!=c&&x(t,c),null!=h&&x(t,h),!0}(t);case"connack":return function(t){var e=h?h.protocolVersion:4,r=y||{},n=5===e?r.reasonCode:r.returnCode,i=r.properties;let o=2;if("number"!=typeof n)return t.emit("error",new Error("Invalid return code")),!1;let s=null;if(5===e){if(!(s=S(t,i)))return!1;o+=s.length}return t.write(g.CONNACK_HEADER),v(t,o),t.write(r.sessionPresent?g.SESSIONPRESENT_HEADER:a),t.write(A.from([n])),null!=s&&s.write(),!0}(t);case"publish":return function(t,e,r){f("publish: packet: %o",t);var n=r?r.protocolVersion:4,i=t||{},o=i.qos||0,s=i.retain?g.RETAIN_MASK:0,a=i.topic,c=i.payload||u,r=i.messageId,t=i.properties;let h=0;if("string"==typeof a)h+=A.byteLength(a)+2;else{if(!A.isBuffer(a))return e.emit("error",new Error("Invalid topic")),!1;h+=a.length+2}if(A.isBuffer(c)?h+=c.length:h+=A.byteLength(c),o&&"number"!=typeof r)return e.emit("error",new Error("Invalid messageId")),!1;o&&(h+=2);let l=null;if(5===n){if(!(l=S(e,t)))return!1;h+=l.length}return e.write(g.PUBLISH_HEADER[o][i.dup?1:0][s?1:0]),v(e,h),m(e,I(a)),e.write(a),0<o&&m(e,r),null!=l&&l.write(),f("publish: payload: %o",c),e.write(c)}(y,t,h);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(t,e){var r=e?e.protocolVersion:4,n=y||{},i=n.cmd||"puback",o=n.messageId,s=n.dup&&"pubrel"===i?g.DUP_MASK:0;let a=0;var c=n.reasonCode,n=n.properties;let h=5===r?3:2;if("pubrel"===i&&(a=1),"number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;let l=null;if(5===r&&"object"==typeof n){if(!(l=_(t,n,e,h)))return!1;h+=l.length}return t.write(g.ACKS[i][a][s][0]),v(t,h),m(t,o),5===r&&t.write(A.from([c])),null!==l&&l.write(),!0}(t,h);case"subscribe":return function(e,r,n){f("subscribe: packet: ");const i=n?n.protocolVersion:4,o=e||{},s=o.dup?g.DUP_MASK:0,a=o.messageId,c=o.subscriptions,t=o.properties;let h=0;if("number"!=typeof a)return r.emit("error",new Error("Invalid messageId")),!1;h+=2;let l=null;if(5===i){if(!(l=S(r,t)))return!1;h+=l.length}if("object"!=typeof c||!c.length)return r.emit("error",new Error("Invalid subscriptions")),!1;for(let t=0;t<c.length;t+=1){const g=c[t].topic,n=c[t].qos;if("string"!=typeof g)return r.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof n)return r.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===i){const A=c[t].nl||!1;if("boolean"!=typeof A)return r.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;const g=c[t].rap||!1;if("boolean"!=typeof g)return r.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const n=c[t].rh||0;if("number"!=typeof n||2<n)return r.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}h+=A.byteLength(g)+2+1}f("subscribe: writing to stream: %o",g.SUBSCRIBE_HEADER),r.write(g.SUBSCRIBE_HEADER[1][s?1:0][0]),v(r,h),m(r,a),null!==l&&l.write();let u=!0;for(const e of c){const n=e.topic,o=e.qos,s=+e.nl,f=+e.rap,a=e.rh;let t;w(r,n),t=g.SUBSCRIBE_OPTIONS_QOS[o],5===i&&(t|=s?g.SUBSCRIBE_OPTIONS_NL:0,t|=f?g.SUBSCRIBE_OPTIONS_RAP:0,t|=a?g.SUBSCRIBE_OPTIONS_RH[a]:0),u=r.write(A.from([t]))}return u}(y,t,h);case"suback":return function(e,t){var r=t?t.protocolVersion:4,n=y||{},i=n.messageId,o=n.granted,n=n.properties;let s=0;if("number"!=typeof i)return e.emit("error",new Error("Invalid messageId")),!1;if(s+=2,"object"!=typeof o||!o.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(let t=0;t<o.length;t+=1){if("number"!=typeof o[t])return e.emit("error",new Error("Invalid qos vector")),!1;s+=1}let a=null;if(5===r){if(!(a=_(e,n,t,s)))return!1;s+=a.length}return e.write(g.SUBACK_HEADER),v(e,s),m(e,i),null!==a&&a.write(),e.write(A.from(o))}(t,h);case"unsubscribe":return function(e){var t=h?h.protocolVersion:4,r=y||{},n=r.messageId,i=r.dup?g.DUP_MASK:0,o=r.unsubscriptions,r=r.properties;let s=0;if("number"!=typeof n)return e.emit("error",new Error("Invalid messageId")),!1;if(s+=2,"object"!=typeof o||!o.length)return e.emit("error",new Error("Invalid unsubscriptions")),!1;for(let t=0;t<o.length;t+=1){if("string"!=typeof o[t])return e.emit("error",new Error("Invalid unsubscriptions")),!1;s+=A.byteLength(o[t])+2}let a=null;if(5===t){if(!(a=S(e,r)))return!1;s+=a.length}e.write(g.UNSUBSCRIBE_HEADER[1][i?1:0][0]),v(e,s),m(e,n),null!==a&&a.write();let c=!0;for(let t=0;t<o.length;t++)c=w(e,o[t]);return c}(t);case"unsuback":return function(e,t){var r=t?t.protocolVersion:4,n=y||{},i=n.messageId,o=n.dup?g.DUP_MASK:0,s=n.granted,a=n.properties,n=n.cmd;let c=2;if("number"!=typeof i)return e.emit("error",new Error("Invalid messageId")),!1;if(5===r){if("object"!=typeof s||!s.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(let t=0;t<s.length;t+=1){if("number"!=typeof s[t])return e.emit("error",new Error("Invalid qos vector")),!1;c+=1}}let h=null;if(5===r){if(!(h=_(e,a,t,c)))return!1;c+=h.length}return e.write(g.ACKS[n][0][o][0]),v(e,c),m(e,i),null!==h&&h.write(),5===r&&e.write(A.from(s)),!0}(t,h);case"pingreq":case"pingresp":return e=y,t.write(g.EMPTY[e.cmd]);case"disconnect":return function(t){var e=h?h.protocolVersion:4,r=y||{},n=r.reasonCode,r=r.properties;let i=5===e?1:0,o=null;if(5===e){if(!(o=_(t,r,h,i)))return!1;i+=o.length}return t.write(A.from([g.codes.disconnect<<4])),v(t,i),5===e&&t.write(A.from([n])),null!==o&&o.write(),!0}(t);case"auth":return function(t,e){var r=e?e.protocolVersion:4,n=y||{},i=n.reasonCode,o=n.properties,n=5===r?1:0;5!==r&&t.emit("error",new Error("Invalid mqtt version for auth packet"));const s=_(t,o,e,n);return!!s&&(n+=s.length,t.write(A.from([g.codes.auth<<4])),v(t,n),t.write(A.from([i])),null!==s&&s.write(),!0)}(t,h);default:return t.emit("error",new Error("Unknown command")),!1}var e}function d(t){t.uncork()}Object.defineProperty(e,"cacheNumbers",{get:()=>m===y,set(t){m=t?(n&&0!==Object.keys(n).length||(l=!0),y):(l=!1,b)}});const h={};function v(t,e){if(e>g.VARBYTEINT_MAX)return t.emit("error",new Error(`Invalid variable byte integer: ${e}`)),0;let r=h[e];return r||(r=c(e),e<16384&&(h[e]=r)),f("writeVarByteInt: writing to stream: %o",r),t.write(r)}function w(t,e){var r=A.byteLength(e);return m(t,r),f("writeString: %s",e),t.write(e,"utf8")}function p(t,e,r){w(t,e),w(t,r)}function y(t,e){return f("writeNumberCached: number: %d",e),f("writeNumberCached: %o",n[e]),t.write(n[e])}function b(t,e){e=i(e);return f("writeNumberGenerated: %o",e),t.write(e)}function x(t,e){"string"==typeof e?w(t,e):e?(m(t,e.length),t.write(e)):m(t,0)}function S(i,t){if("object"!=typeof t||null!=t.length)return{length:1,write(){T(i,{},0)}};let n=0;function o(t,n){let e=0;switch(g.propertiesTypes[t]){case"byte":if("boolean"!=typeof n)return i.emit("error",new Error(`Invalid ${t}: ${n}`)),!1;e+=2;break;case"int8":if("number"!=typeof n||n<0||255<n)return i.emit("error",new Error(`Invalid ${t}: ${n}`)),!1;e+=2;break;case"binary":if(n&&null===n)return i.emit("error",new Error(`Invalid ${t}: ${n}`)),!1;e+=1+A.byteLength(n)+2;break;case"int16":if("number"!=typeof n||n<0||65535<n)return i.emit("error",new Error(`Invalid ${t}: ${n}`)),!1;e+=3;break;case"int32":if("number"!=typeof n||n<0||4294967295<n)return i.emit("error",new Error(`Invalid ${t}: ${n}`)),!1;e+=5;break;case"var":if("number"!=typeof n||n<0||268435455<n)return i.emit("error",new Error(`Invalid ${t}: ${n}`)),!1;e+=1+A.byteLength(c(n));break;case"string":if("string"!=typeof n)return i.emit("error",new Error(`Invalid ${t}: ${n}`)),!1;e+=3+A.byteLength(n.toString());break;case"pair":if("object"!=typeof n)return i.emit("error",new Error(`Invalid ${t}: ${n}`)),!1;e+=Object.getOwnPropertyNames(n).reduce((t,r)=>{const e=n[r];return Array.isArray(e)?t+=e.reduce((t,e)=>t+=3+A.byteLength(r.toString())+2+A.byteLength(e.toString()),0):t+=3+A.byteLength(r.toString())+2+A.byteLength(n[r].toString()),t},0);break;default:return i.emit("error",new Error(`Invalid property ${t}: ${n}`)),!1}return e}if(t)for(const i in t){let e=0,r=0;var s=t[i];if(Array.isArray(s))for(let t=0;t<s.length;t++){if(!(r=o(i,s[t])))return!1;e+=r}else{if(!(r=o(i,s)))return!1;e=r}if(!e)return!1;n+=e}return{length:A.byteLength(c(n))+n,write(){T(i,t,n)}}}function _(t,e,r,n){const i=["reasonString","userProperties"],o=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0;let s=S(t,e);if(o)for(;n+s.length>o;){const r=i.shift();if(!r||!e[r])return!1;delete e[r],s=S(t,e)}return s}function k(r,n,i){switch(g.propertiesTypes[n]){case"byte":r.write(A.from([g.properties[n]])),r.write(A.from([+i]));break;case"int8":r.write(A.from([g.properties[n]])),r.write(A.from([i]));break;case"binary":r.write(A.from([g.properties[n]])),x(r,i);break;case"int16":r.write(A.from([g.properties[n]])),m(r,i);break;case"int32":r.write(A.from([g.properties[n]])),function(t,e){e=s(e);f("write4ByteNumber: %o",e),t.write(e)}(r,i);break;case"var":r.write(A.from([g.properties[n]])),v(r,i);break;case"string":r.write(A.from([g.properties[n]])),w(r,i);break;case"pair":Object.getOwnPropertyNames(i).forEach(e=>{const t=i[e];Array.isArray(t)?t.forEach(t=>{r.write(A.from([g.properties[n]])),p(r,e.toString(),t.toString())}):(r.write(A.from([g.properties[n]])),p(r,e.toString(),t.toString()))});break;default:return r.emit("error",new Error(`Invalid property ${n} value: ${i}`)),0}}function T(e,t,r){v(e,r);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&null!==t[r]){var n=t[r];if(Array.isArray(n))for(let t=0;t<n.length;t++)k(e,r,n[t]);else k(e,r,n)}}function I(t){return t?t instanceof A?t.length:A.byteLength(t):0}function L(t){return"string"==typeof t||t instanceof A}P.exports=e}.call(this)}.call(this,R("buffer").Buffer)},{"./constants":22,"./numbers":25,buffer:14,debug:15,"process-nextick-args":31}],29:[function(t,e,r){var o=864e5;function s(t,e,r,n){e=1.5*r<=e;return Math.round(t/r)+" "+n+(e?"s":"")}e.exports=function(r,t){t=t||{};var e,n,i=typeof r;if("string"==i&&0<r.length)return function(t){if(!(100<(t=String(r)).length)){t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(t){var e=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*e;case"weeks":case"week":case"w":return 6048e5*e;case"days":case"day":case"d":return e*o;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*e;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*e;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return e;default:return}}}}(r);if("number"==i&&isFinite(r))return t.long?(e=r,n=Math.abs(e),o<=n?s(e,n,o,"day"):36e5<=n?s(e,n,36e5,"hour"):6e4<=n?s(e,n,6e4,"minute"):1e3<=n?s(e,n,1e3,"second"):e+" ms"):(n=r,e=Math.abs(n),o<=e?Math.round(n/o)+"d":36e5<=e?Math.round(n/36e5)+"h":6e4<=e?Math.round(n/6e4)+"m":1e3<=e?Math.round(n/1e3)+"s":n+"ms");throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))}},{}],30:[function(t,e,r){t=t("wrappy");function n(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function i(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}e.exports=t(n),e.exports.strict=t(i),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},{wrappy:59}],31:[function(t,e,r){!function(a){!function(){"use strict";void 0===a||!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?e.exports={nextTick:function(t,e,r,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return a.nextTick(t);case 2:return a.nextTick(function(){t.call(null,e)});case 3:return a.nextTick(function(){t.call(null,e,r)});case 4:return a.nextTick(function(){t.call(null,e,r,n)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return a.nextTick(function(){t.apply(null,i)})}}}:e.exports=a}.call(this)}.call(this,t("_process"))},{_process:32}],32:[function(t,e,r){var n,i,e=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var c,h=[],l=!1,u=-1;function f(){l&&c&&(l=!1,c.length?h=c.concat(h):u=-1,h.length&&d())}function d(){if(!l){var t=a(f);l=!0;for(var e=h.length;e;){for(c=h,h=[];++u<e;)c&&c[u].run();u=-1,e=h.length}c=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}e.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new p(t,e)),1!==h.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=y,e.addListener=y,e.once=y,e.off=y,e.removeListener=y,e.removeAllListeners=y,e.emit=y,e.prependListener=y,e.prependOnceListener=y,e.listeners=function(t){return[]},e.binding=function(t){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(t){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],33:[function(t,A,R){!function(L){!function(){!function(t){var e="object"==typeof R&&R&&!R.nodeType&&R,r="object"==typeof A&&A&&!A.nodeType&&A,n="object"==typeof L&&L;n.global!==n&&n.window!==n&&n.self!==n||(t=n);var i,o,g=2147483647,m=36,v=26,s=38,a=700,c=/^xn--/,h=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=m-1,w=Math.floor,b=String.fromCharCode;function x(t){throw new RangeError(u[t])}function d(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function p(t,e){var r=t.split("@"),n="";return 1<r.length&&(n=r[0]+"@",t=r[1]),n+d((t=t.replace(l,".")).split("."),e).join(".")}function S(t){for(var e,r,n=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function y(t){return d(t,function(t){var e="";return 65535<t&&(e+=b((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+b(t)}).join("")}function _(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function k(t,e,r){var n=0;for(t=r?w(t/a):t>>1,t+=w(t/e);f*v>>1<t;n+=m)t=w(t/f);return w(n+(f+1)*t/(t+s))}function T(t){var e,r,n,i,o,s,a,c,h=[],l=t.length,u=0,f=128,d=72;for((r=t.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)128<=t.charCodeAt(n)&&x("not-basic"),h.push(t.charCodeAt(n));for(i=0<r?r+1:0;i<l;){for(o=u,s=1,a=m;l<=i&&x("invalid-input"),((c=(c=t.charCodeAt(i++))-48<10?c-22:c-65<26?c-65:c-97<26?c-97:m)>=m||c>w((g-u)/s))&&x("overflow"),u+=c*s,!(c<(c=a<=d?1:d+v<=a?v:a-d));a+=m)s>w(g/(c=m-c))&&x("overflow"),s*=c;d=k(u-o,e=h.length+1,0==o),w(u/e)>g-f&&x("overflow"),f+=w(u/e),u%=e,h.splice(u++,0,f)}return y(h)}function I(t){for(var e,r,n,i,o,s,a,c,h,l=[],u=(t=S(t)).length,f=128,d=0,p=72,y=0;y<u;++y)(s=t[y])<128&&l.push(b(s));for(e=r=l.length,r&&l.push("-");e<u;){for(n=g,y=0;y<u;++y)(s=t[y])>=f&&s<n&&(n=s);for(n-f>w((g-d)/(a=e+1))&&x("overflow"),d+=(n-f)*a,f=n,y=0;y<u;++y)if((s=t[y])<f&&++d>g&&x("overflow"),s==f){for(i=d,o=m;!(i<(c=o<=p?1:p+v<=o?v:o-p));o+=m)l.push(b(_(c+(h=i-c)%(c=m-c),0))),i=w(h/c);l.push(b(_(i,0))),p=k(d,a,e==r),d=0,++e}++d,++f}return l.join("")}if(i={version:"1.4.1",ucs2:{decode:S,encode:y},decode:T,encode:I,toASCII:function(t){return p(t,function(t){return h.test(t)?"xn--"+I(t):t})},toUnicode:function(t){return p(t,function(t){return c.test(t)?T(t.slice(4).toLowerCase()):t})}},e&&r)if(A.exports==e)r.exports=i;else for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);else t.punycode=i}(this)}.call(this)}.call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e=e||"&");e=1e3;n&&"number"==typeof n.maxKeys&&(e=n.maxKeys);var s=t.length;0<e&&e<s&&(s=e);for(var a=0;a<s;++a){var c,h=t[a].replace(o,"%20"),l=h.indexOf(r),l=0<=l?(c=h.substr(0,l),h.substr(l+1)):(c=h,""),h=decodeURIComponent(c),l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(i,h)?u(i[h])?i[h].push(l):i[h]=[i[h],l]:i[h]=l}return i};var u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],35:[function(t,e,r){"use strict";function o(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}e.exports=function(r,n,i,t){return n=n||"&",i=i||"=","object"==typeof(r=null===r?void 0:r)?a(c(r),function(t){var e=encodeURIComponent(o(t))+i;return s(r[t])?a(r[t],function(t){return e+encodeURIComponent(o(t))}).join(n):e+encodeURIComponent(o(r[t]))}).join(n):t?encodeURIComponent(o(t))+i+encodeURIComponent(o(r)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var c=Object.keys||function(t){var e,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r}},{}],36:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":34,"./encode":35}],37:[function(t,e,r){"use strict";var a={};function n(t,n,e){e=e||Error;var i,r,o,o=(o=i=e,(r=s).prototype=Object.create(o.prototype),(r.prototype.constructor=r).__proto__=o,s);function s(t,e,r){return i.call(this,"string"==typeof n?n:n(t,e,r))||this}o.prototype.name=e.name,o.prototype.code=t,a[t]=o}function c(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(t){return String(t)}),2<r?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}n("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(t,e,r){var n,i,o,s;return"string"==typeof e&&"not "===e.substr(0,"not ".length)?(n="must not be",e=e.replace(/^not /,"")):n="must be",o=t,(void 0===s||s>o.length)&&(s=o.length),(" argument"===o.substring(s-" argument".length,s)?"The ".concat(t," ").concat(n," ").concat(c(e,"type")):(i=(i="number"!=typeof i?0:i)+".".length>(s=t).length||-1===s.indexOf(".",i)?"argument":"property",'The "'.concat(t,'" ').concat(i," ").concat(n," ").concat(c(e,"type"))))+". Received type ".concat(typeof r)},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=a},{}],38:[function(l,u,t){!function(h){!function(){"use strict";var t=Object.keys||function(t){var e,r=[];for(e in t)r.push(e);return r};u.exports=s;var e=l("./_stream_readable"),r=l("./_stream_writable");l("inherits")(s,e);for(var n=t(r.prototype),i=0;i<n.length;i++){var o=n[i];s.prototype[o]||(s.prototype[o]=r.prototype[o])}function s(t){if(!(this instanceof s))return new s(t);e.call(this,t),r.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||h.nextTick(c,this)}function c(t){t.end()}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}.call(this)}.call(this,l("_process"))},{"./_stream_readable":40,"./_stream_writable":42,_process:32,inherits:21}],39:[function(t,e,r){"use strict";e.exports=i;var n=t("./_stream_transform");function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}t("inherits")(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":41,inherits:21}],40:[function(U,j,t){!function(B,D){!function(){"use strict";var n;(j.exports=b).ReadableState=w,U("events").EventEmitter;function y(t,e){return t.listeners(e).length}var i,t,r,o=U("./internal/streams/stream"),u=U("buffer").Buffer,f=D.Uint8Array||function(){},e=U("util"),g=e&&e.debuglog?e.debuglog("stream"):function(){},s=U("./internal/streams/buffer_list"),a=U("./internal/streams/destroy"),c=U("./internal/streams/state").getHighWaterMark,e=U("../errors").codes,d=e.ERR_INVALID_ARG_TYPE,p=e.ERR_STREAM_PUSH_AFTER_EOF,h=e.ERR_METHOD_NOT_IMPLEMENTED,m=e.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;U("inherits")(b,o);var v=a.errorOrDestroy,l=["error","close","destroy","pause","resume"];function w(t,e,r){n=n||U("./_stream_duplex"),"boolean"!=typeof r&&(r=e instanceof n),this.objectMode=!!(t=t||{}).objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=c(this,t,"readableHighWaterMark",r),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(i=i||U("string_decoder/").StringDecoder,this.decoder=new i(t.encoding),this.encoding=t.encoding)}function b(t){if(n=n||U("./_stream_duplex"),!(this instanceof b))return new b(t);var e=this instanceof n;this._readableState=new w(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function x(t,e,r,n,i){g("readableAddChunk",e);var o,s,a,c,h,l=t._readableState;if(null===e)l.reading=!1,a=t,c=l,g("onEofChunk"),c.ended||(!c.decoder||(h=c.decoder.end())&&h.length&&(c.buffer.push(h),c.length+=c.objectMode?1:h.length),c.ended=!0,c.sync?k(a):(c.needReadable=!1,c.emittedReadable||(c.emittedReadable=!0,T(a))));else if(i||(a=l,i=o=e,o=s=u.isBuffer(i)||i instanceof f||"string"==typeof o||void 0===o||a.objectMode?s:new d("chunk",["string","Buffer","Uint8Array"],o)),o)v(t,o);else if(l.objectMode||e&&0<e.length)if("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===u.prototype||(o=e,e=u.from(o)),n)l.endEmitted?v(t,new m):S(t,l,e,!0);else if(l.ended)v(t,new p);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!r?(e=l.decoder.write(e),l.objectMode||0!==e.length?S(t,l,e,!1):I(t,l)):S(t,l,e,!1)}else n||(l.reading=!1,I(t,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function S(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&k(t)),I(t,e)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=a.destroy,b.prototype._undestroy=a.undestroy,b.prototype._destroy=function(t,e){e(t)},b.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=u.from(t,e),e=""),r=!0),x(this,t,e,!1,r)},b.prototype.unshift=function(t){return x(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){var e=new(i=i||U("string_decoder/").StringDecoder)(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};function _(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?(e.flowing&&e.length?e.buffer.head.data:e).length:(t>e.highWaterMark&&(e.highWaterMark=(1073741824<=(r=t)?r=1073741824:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));var r}function k(t){var e=t._readableState;g("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(g("emitReadable",e.flowing),e.emittedReadable=!0,B.nextTick(T,t))}function T(t){var e=t._readableState;g("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,E(t)}function I(t,e){e.readingMore||(e.readingMore=!0,B.nextTick(L,t,e))}function L(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(g("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function A(t){var e=t._readableState;e.readableListening=0<t.listenerCount("readable"),e.resumeScheduled&&!e.paused?e.flowing=!0:0<t.listenerCount("data")&&t.resume()}function R(t){g("readable nexttick read 0"),t.read(0)}function P(t,e){g("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),E(t),e.flowing&&!e.reading&&t.read(0)}function E(t){var e=t._readableState;for(g("flow",e.flowing);e.flowing&&null!==t.read(););}function C(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function O(t){var e=t._readableState;g("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,B.nextTick(N,e,t))}function N(t,e){g("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)&&(!(t=e._writableState)||t.autoDestroy&&t.finished)&&e.destroy()}function M(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}b.prototype.read=function(t){g("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:0<e.length)||e.ended))return g("read: emitReadable",e.length,e.ended),(0===e.length&&e.ended?O:k)(this),null;if(0===(t=_(t,e))&&e.ended)return 0===e.length&&O(this),null;var n=e.needReadable;return g("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&g("length less than watermark",n=!0),e.ended||e.reading?g("reading or ended",n=!1):n&&(g("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=_(r,e))),null===(n=0<t?C(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&O(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(t){v(this,new h("_read()"))},b.prototype.pipe=function(n,t){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=n;break;case 1:o.pipes=[o.pipes,n];break;default:o.pipes.push(n)}o.pipesCount+=1,g("pipe count=%d opts=%j",o.pipesCount,t);var e=t&&!1===t.end||n===B.stdout||n===B.stderr?p:s;function s(){g("onend"),n.end()}o.endEmitted?B.nextTick(e):i.once("end",e),n.on("unpipe",function t(e,r){g("onunpipe"),e===i&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,g("cleanup"),n.removeListener("close",f),n.removeListener("finish",d),n.removeListener("drain",a),n.removeListener("error",u),n.removeListener("unpipe",t),i.removeListener("end",s),i.removeListener("end",p),i.removeListener("data",l),h=!0,!o.awaitDrain||n._writableState&&!n._writableState.needDrain||a())});var r,a=(r=i,function(){var t=r._readableState;g("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&y(r,"data")&&(t.flowing=!0,E(r))});n.on("drain",a);var c,h=!1;function l(t){g("ondata");t=n.write(t);g("dest.write",t),!1===t&&((1===o.pipesCount&&o.pipes===n||1<o.pipesCount&&-1!==M(o.pipes,n))&&!h&&(g("false write response, pause",o.awaitDrain),o.awaitDrain++),i.pause())}function u(t){g("onerror",t),p(),n.removeListener("error",u),0===y(n,"error")&&v(n,t)}function f(){n.removeListener("finish",d),p()}function d(){g("onfinish"),n.removeListener("close",f),p()}function p(){g("unpipe"),i.unpipe(n)}return i.on("data",l),c="error",t=u,"function"==typeof(e=n).prependListener?e.prependListener(c,t):e._events&&e._events[c]?Array.isArray(e._events[c])?e._events[c].unshift(t):e._events[c]=[t,e._events[c]]:e.on(c,t),n.once("close",f),n.once("finish",d),n.emit("pipe",i),o.flowing||(g("pipe resume"),i.resume()),n},b.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=M(e.pipes,t);return-1===s||(e.pipes.splice(s,1),--e.pipesCount,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},b.prototype.on=function(t,e){var r=o.prototype.on.call(this,t,e),e=this._readableState;return"data"===t?(e.readableListening=0<this.listenerCount("readable"),!1!==e.flowing&&this.resume()):"readable"===t&&(e.endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.flowing=!1,e.emittedReadable=!1,g("on readable",e.length,e.reading),e.length?k(this):e.reading||B.nextTick(R,this))),r},b.prototype.addListener=b.prototype.on,b.prototype.removeListener=function(t,e){e=o.prototype.removeListener.call(this,t,e);return"readable"===t&&B.nextTick(A,this),e},b.prototype.removeAllListeners=function(t){var e=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||B.nextTick(A,this),e},b.prototype.resume=function(){var t,e,r=this._readableState;return r.flowing||(g("resume"),r.flowing=!r.readableListening,t=this,(e=r).resumeScheduled||(e.resumeScheduled=!0,B.nextTick(P,t,e))),r.paused=!1,this},b.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},b.prototype.wrap=function(e){var t,r=this,n=this._readableState,i=!1;for(t in e.on("end",function(){var t;g("wrapped end"),n.decoder&&!n.ended&&(t=n.decoder.end())&&t.length&&r.push(t),r.push(null)}),e.on("data",function(t){g("wrapped data"),n.decoder&&(t=n.decoder.write(t)),n.objectMode&&null==t||!(n.objectMode||t&&t.length)||r.push(t)||(i=!0,e.pause())}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var o=0;o<l.length;o++)e.on(l[o],this.emit.bind(this,l[o]));return this._read=function(t){g("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(b.prototype[Symbol.asyncIterator]=function(){return(t=void 0===t?U("./internal/streams/async_iterator"):t)(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),b._fromList=C,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(b.from=function(t,e){return(r=void 0===r?U("./internal/streams/from"):r)(b,t,e)})}.call(this)}.call(this,U("_process"),void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":37,"./_stream_duplex":38,"./internal/streams/async_iterator":43,"./internal/streams/buffer_list":44,"./internal/streams/destroy":45,"./internal/streams/from":47,"./internal/streams/state":49,"./internal/streams/stream":50,_process:32,buffer:14,events:19,inherits:21,"string_decoder/":55,util:13}],41:[function(t,e,r){"use strict";e.exports=c;var e=t("../errors").codes,n=e.ERR_METHOD_NOT_IMPLEMENTED,i=e.ERR_MULTIPLE_CALLBACK,o=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=e.ERR_TRANSFORM_WITH_LENGTH_0,a=t("./_stream_duplex");function c(t){if(!(this instanceof c))return new c(t);a.call(this,t),this._transformState={afterTransform:function(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i);r.writechunk=null,(r.writecb=null)!=e&&this.push(e),n(t);t=this._readableState;t.reading=!1,(t.needReadable||t.length<t.highWaterMark)&&this._read(t.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var r=this;"function"!=typeof this._flush||this._readableState.destroyed?l(this,null,null):this._flush(function(t,e){l(r,t,e)})}function l(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new s;if(t._transformState.transforming)throw new o;return t.push(null)}t("inherits")(c,a),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,r){r(new n("_transform()"))},c.prototype._write=function(t,e,r){var n=this._transformState;n.writecb=r,n.writechunk=t,n.writeencoding=e,n.transforming||(e=this._readableState,(n.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark))},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){a.prototype._destroy.call(this,t,function(t){e(t)})}},{"../errors":37,"./_stream_duplex":38,inherits:21}],42:[function(P,E,t){!function(A,R){!function(){"use strict";function l(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(void 0),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var n;(E.exports=x).WritableState=b;var r,t={deprecate:P("util-deprecate")},i=P("./internal/streams/stream"),u=P("buffer").Buffer,f=R.Uint8Array||function(){},e=P("./internal/streams/destroy"),o=P("./internal/streams/state").getHighWaterMark,s=P("../errors").codes,d=s.ERR_INVALID_ARG_TYPE,a=s.ERR_METHOD_NOT_IMPLEMENTED,h=s.ERR_MULTIPLE_CALLBACK,c=s.ERR_STREAM_CANNOT_PIPE,p=s.ERR_STREAM_DESTROYED,y=s.ERR_STREAM_NULL_VALUES,g=s.ERR_STREAM_WRITE_AFTER_END,m=s.ERR_UNKNOWN_ENCODING,v=e.errorOrDestroy;function w(){}function b(t,e,r){n=n||P("./_stream_duplex"),"boolean"!=typeof r&&(r=e instanceof n),this.objectMode=!!(t=t||{}).objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=o(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;r=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r,n,i,o,s=t._writableState,a=s.sync,c=s.writecb;if("function"!=typeof c)throw new h;(o=s).writing=!1,o.writecb=null,o.length-=o.writelen,o.writelen=0,e?(r=t,i=a,o=e,e=c,--(n=s).pendingcb,i?(A.nextTick(e,o),A.nextTick(L,r,n),r._writableState.errorEmitted=!0,v(r,o)):(e(o),r._writableState.errorEmitted=!0,v(r,o),L(r,n))):((n=T(s)||t.destroyed)||s.corked||s.bufferProcessing||!s.bufferedRequest||k(t,s),a?A.nextTick(_,t,s,n,c):_(t,s,n,c))}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function x(t){var e=this instanceof(n=n||P("./_stream_duplex"));if(!e&&!r.call(x,this))return new x(t);this._writableState=new b(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),i.call(this)}function S(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new p("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function _(t,e,r,n){var i;r||(i=t,0===(r=e).length&&r.needDrain&&(r.needDrain=!1,i.emit("drain"))),e.pendingcb--,n(),L(t,e)}function k(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),n=e.corkedRequestsFree;n.entry=r;for(var o=0,s=!0;r;)(i[o]=r).isBuf||(s=!1),r=r.next,o+=1;i.allBuffers=s,S(t,e,!0,e.length,i,"",n.finish),e.pendingcb++,e.lastBufferedRequest=null,n.next?(e.corkedRequestsFree=n.next,n.next=null):e.corkedRequestsFree=new l(e),e.bufferedRequestCount=0}else{for(;r;){var a=r.chunk,c=r.encoding,h=r.callback;if(S(t,e,!1,e.objectMode?1:a.length,a,c,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function T(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function I(e,r){e._final(function(t){r.pendingcb--,t&&v(e,t),r.prefinished=!0,e.emit("prefinish"),L(e,r)})}function L(t,e){var r,n,i=T(e);return i&&(r=t,(n=e).prefinished||n.finalCalled||("function"!=typeof r._final||n.destroyed?(n.prefinished=!0,r.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,A.nextTick(I,r,n))),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))&&((!(e=t._readableState)||e.autoDestroy&&e.endEmitted)&&t.destroy()),i}P("inherits")(x,i),b.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(b.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(t){return!!r.call(this,t)||this===x&&t&&t._writableState instanceof b}})):r=function(t){return t instanceof this},x.prototype.pipe=function(){v(this,new c)},x.prototype.write=function(t,e,r){var n,i,o,s,a,c=this._writableState,h=!1,l=!c.objectMode&&(l=t,u.isBuffer(l)||l instanceof f);return l&&!u.isBuffer(t)&&(a=t,t=u.from(a)),"function"==typeof e&&(r=e,e=null),e=l?"buffer":e||c.defaultEncoding,"function"!=typeof r&&(r=w),c.ending?(i=this,o=r,s=new g,v(i,s),A.nextTick(o,s)):!l&&(a=this,i=c,o=r,null===(s=t)?n=new y:"string"==typeof s||i.objectMode||(n=new d("chunk",["string","Buffer"],s)),n&&(v(a,n),A.nextTick(o,n),!0))||(c.pendingcb++,h=function(t,e,r,n,i,o){r||(a=n,c=i,a=e.objectMode||!1===e.decodeStrings||"string"!=typeof a?a:u.from(a,c),n!==a&&(r=!0,i="buffer",n=a));var s=e.objectMode?1:n.length;e.length+=s;var a,c=e.length<e.highWaterMark;return c||(e.needDrain=!0),e.writing||e.corked?(a=e.lastBufferedRequest,e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},a?a.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1):S(t,e,!1,s,n,i,o),c}(this,c,l,t,e,r)),h},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||k(this,t))},x.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new m(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(t,e,r){r(new a("_write()"))},x.prototype._writev=null,x.prototype.end=function(t,e,r){var n=this._writableState;return"function"==typeof t?(r=t,e=t=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||(e=this,r=r,(n=n).ending=!0,L(e,n),r&&(n.finished?A.nextTick(r):e.once("finish",r)),n.ended=!0,e.writable=!1),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),x.prototype.destroy=e.destroy,x.prototype._undestroy=e.undestroy,x.prototype._destroy=function(t,e){e(t)}}.call(this)}.call(this,P("_process"),void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":37,"./_stream_duplex":38,"./internal/streams/destroy":45,"./internal/streams/state":49,"./internal/streams/stream":50,_process:32,buffer:14,inherits:21,"util-deprecate":58}],43:[function(n,g,t){!function(y){!function(){"use strict";var t;function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=n("./end-of-stream"),o=Symbol("lastResolve"),s=Symbol("lastReject"),a=Symbol("error"),c=Symbol("ended"),h=Symbol("lastPromise"),l=Symbol("handlePromise"),u=Symbol("stream");function f(t,e){return{value:t,done:e}}function d(t){var e,r=t[o];null===r||null!==(e=t[u].read())&&(t[h]=null,t[o]=null,t[s]=null,r(f(e,!1)))}var e=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((r(t={get stream(){return this[u]},next:function(){var r=this,t=this[a];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(f(void 0,!0));if(this[u].destroyed)return new Promise(function(t,e){y.nextTick(function(){r[a]?e(r[a]):t(f(void 0,!0))})});var e,n,i,t=this[h];if(t)e=new Promise((n=t,i=this,function(t,e){n.then(function(){i[c]?t(f(void 0,!0)):i[l](t,e)},e)}));else{t=this[u].read();if(null!==t)return Promise.resolve(f(t,!1));e=new Promise(this[l])}return this[h]=e}},Symbol.asyncIterator,function(){return this}),r(t,"return",function(){var t=this;return new Promise(function(e,r){t[u].destroy(null,function(t){t?r(t):e(f(void 0,!0))})})}),t),e);g.exports=function(t){var e,n=Object.create(p,(r(e={},u,{value:t,writable:!0}),r(e,o,{value:null,writable:!0}),r(e,s,{value:null,writable:!0}),r(e,a,{value:null,writable:!0}),r(e,c,{value:t._readableState.endEmitted,writable:!0}),r(e,l,{value:function(t,e){var r=n[u].read();r?(n[h]=null,n[o]=null,n[s]=null,t(f(r,!1))):(n[o]=t,n[s]=e)},writable:!0}),e));return n[h]=null,i(t,function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[s];return null!==e&&(n[h]=null,n[o]=null,n[s]=null,e(t)),void(n[a]=t)}t=n[o];null!==t&&(n[h]=null,n[o]=null,t(f(void 0,!(n[s]=null)))),n[c]=!0}),t.on("readable",function(t){y.nextTick(d,t)}.bind(null,n)),n}}.call(this)}.call(this,n("_process"))},{"./end-of-stream":46,_process:32}],44:[function(t,e,r){"use strict";function o(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=t("buffer").Buffer,i=t("util").inspect,t=i&&i.custom||"inspect";function a(){!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.head=null,this.tail=null,this.length=0}e.exports=(t=[{key:"push",value:function(t){t={data:t,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(t){t={data:t,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return s.alloc(0);for(var e,r,n=s.allocUnsafe(t>>>0),i=this.head,o=0;i;)e=i.data,r=o,s.prototype.copy.call(e,n,r),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),0==(t-=o)){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e).data=i.slice(o);break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=s.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r).data=i.slice(o);break}++n}return this.length-=n,e}},{key:t,value:function(t,e){return i(this,function(n){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){var e,r;e=n,t=i[r=t],r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}({},e,{depth:0,customInspect:!1}))}}],n(a.prototype,t),a)},{buffer:14,util:13}],45:[function(t,e,r){!function(c){!function(){"use strict";function o(t,e){a(t,e),s(t)}function s(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function a(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(a,this,t)):c.nextTick(a,this,t)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?r._writableState?r._writableState.errorEmitted?c.nextTick(s,r):(r._writableState.errorEmitted=!0,c.nextTick(o,r,t)):c.nextTick(o,r,t):e?(c.nextTick(s,r),e(t)):c.nextTick(s,r)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}}.call(this)}.call(this,t("_process"))},{_process:32}],46:[function(t,e,r){"use strict";var g=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function m(){}e.exports=function t(e,r,n){if("function"==typeof r)return t(e,null,r);var i,o;i=n||m,o=!1,n=function(){if(!o){o=!0;for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];i.apply(this,e)}};function s(){e.writable||p()}function a(){y=!(u=!1),f||n.call(e)}function c(t){n.call(e,t)}function h(){var t;return u&&!y?(e._readableState&&e._readableState.ended||(t=new g),n.call(e,t)):f&&!d?(e._writableState&&e._writableState.ended||(t=new g),n.call(e,t)):void 0}function l(){e.req.on("finish",p)}var u=(r=r||{}).readable||!1!==r.readable&&e.readable,f=r.writable||!1!==r.writable&&e.writable,d=e._writableState&&e._writableState.finished,p=function(){d=!(f=!1),u||n.call(e)},y=e._readableState&&e._readableState.endEmitted;return e.setHeader&&"function"==typeof e.abort?(e.on("complete",p),e.on("abort",h),e.req?l():e.on("request",l)):f&&!e._writableState&&(e.on("end",s),e.on("close",s)),e.on("end",a),e.on("finish",p),!1!==r.error&&e.on("error",c),e.on("close",h),function(){e.removeListener("complete",p),e.removeListener("abort",h),e.removeListener("request",l),e.req&&e.req.removeListener("finish",p),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",p),e.removeListener("end",a),e.removeListener("error",c),e.removeListener("close",h)}}},{"../../../errors":37}],47:[function(t,e,r){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],48:[function(c,t,e){"use strict";var h,r=c("../../../errors").codes,a=r.ERR_MISSING_ARGS,l=r.ERR_STREAM_DESTROYED;function u(t){if(t)throw t}function f(t){t()}function d(t,e){return t.pipe(e)}t.exports=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var i,r,o=!(r=n).length||"function"!=typeof r[r.length-1]?u:r.pop();if((n=Array.isArray(n[0])?n[0]:n).length<2)throw new a("streams");var s=n.map(function(t,e){var r=e<n.length-1;return function(e,t,r,n){var i,o;i=n,o=!1;var s=!(n=function(){o||(o=!0,i.apply(void 0,arguments))});e.on("close",function(){s=!0}),(h=void 0===h?c("./end-of-stream"):h)(e,{readable:t,writable:r},function(t){return t?n(t):(s=!0,void n())});var a=!1;return function(t){if(!s&&!a)return a=!0,e.setHeader&&"function"==typeof e.abort?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new l("pipe"))}}(t,r,0<e,function(t){i=i||t,t&&s.forEach(f),r||(s.forEach(f),o(i))})});return n.reduce(d)}},{"../../../errors":37,"./end-of-stream":46}],49:[function(t,e,r){"use strict";var i=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(t,e,r,n){e=null!=e.highWaterMark?e.highWaterMark:n?e[r]:null;if(null==e)return t.objectMode?16:16384;if(!isFinite(e)||Math.floor(e)!==e||e<0)throw new i(n?r:"highWaterMark",e);return Math.floor(e)}}},{"../../../errors":37}],50:[function(t,e,r){e.exports=t("events").EventEmitter},{events:19}],51:[function(t,e,r){(((r=e.exports=t("./lib/_stream_readable.js")).Stream=r).Readable=r).Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js"),r.finished=t("./lib/internal/streams/end-of-stream.js"),r.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":38,"./lib/_stream_passthrough.js":39,"./lib/_stream_readable.js":40,"./lib/_stream_transform.js":41,"./lib/_stream_writable.js":42,"./lib/internal/streams/end-of-stream.js":46,"./lib/internal/streams/pipeline.js":48}],52:[function(t,e,r){"use strict";e.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");if(0<arguments.length)for(var t=new Array(arguments.length-2),e=0;e<t.length;e++)t[e]=arguments[e+2];return new function(t,e,r){var n=this;this._callback=t,this._args=r,this._interval=setInterval(t,e,this._args),this.reschedule=function(t){t=t||n._interval,n._interval&&clearInterval(n._interval),n._interval=setInterval(n._callback,t,n._args)},this.clear=function(){n._interval&&(clearInterval(n._interval),n._interval=void 0)},this.destroy=function(){n._interval&&clearInterval(n._interval),n._callback=void 0,n._interval=void 0,n._args=void 0}}(arguments[0],arguments[1],t)}},{}],53:[function(t,e,r){var n=t("buffer"),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,r),r.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");t=i(t);return void 0!==e?"string"==typeof r?t.fill(e,r):t.fill(e):t.fill(0),t},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},{buffer:14}],54:[function(t,e,r){e.exports=function(t){var e=t._readableState;return e?e.objectMode||"number"==typeof t._duplexState?t.read():t.read((e.buffer.length?e.buffer.head?e.buffer.head.data:e.buffer[0]:e).length):null}},{}],55:[function(t,e,r){"use strict";var n=t("safe-buffer").Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=c,this.end=h,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=u,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e,r,n=this.lastTotal-this.lastNeed,e=(e=this,128!=(192&(r=t)[0])?(e.lastNeed=0,"�"):1<e.lastNeed&&1<r.length?128!=(192&r[1])?(e.lastNeed=1,"�"):2<e.lastNeed&&2<r.length&&128!=(192&r[2])?(e.lastNeed=2,"�"):void 0:void 0);return void 0!==e?e:this.lastNeed<=t.length?(t.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,n,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var r=t.toString("utf16le",e);if(r){e=r.charCodeAt(r.length-1);if(55296<=e&&e<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function l(t,e){var r=(t.length-e)%3;return 0==r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function u(t){t=t&&t.length?this.write(t):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}(r.StringDecoder=o).prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){t=t&&t.length?this.write(t):"";return this.lastNeed?t+"�":t},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=s(e[n]);return 0<=i?(0<i&&(t.lastNeed=i-1),i):--n<r||-2===i?0:0<=(i=s(e[n]))?(0<i&&(t.lastNeed=i-2),i):!(--n<r||-2===i)&&0<=(i=s(e[n]))?(0<i&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;r=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":53}],56:[function(t,e,r){"use strict";var I=t("punycode"),L=t("./util");function x(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=i,r.resolve=function(t,e){return i(t,!1,!0).resolve(e)},r.resolveObject=function(t,e){return t?i(t,!1,!0).resolveObject(e):e},r.format=function(t){return(t=L.isString(t)?i(t):t)instanceof x?t.format():x.prototype.format.call(t)},r.Url=x;var A=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,R=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),P=["'"].concat(r),E=["%","/","?",";","#"].concat(P),C=["/","?","#"],O=/^[+a-z0-9A-Z_-]{0,63}$/,N=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,M={javascript:!0,"javascript:":!0},B={javascript:!0,"javascript:":!0},D={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},U=t("querystring");function i(t,e,r){if(t&&L.isObject(t)&&t instanceof x)return t;var n=new x;return n.parse(t,e,r),n}x.prototype.parse=function(t,e,r){if(!L.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=-1!==n&&n<t.indexOf("#")?"?":"#",n=t.split(i);n[0]=n[0].replace(/\\/g,"/");var o=(o=t=n.join(i)).trim();if(!r&&1===t.split("#").length){var s=R.exec(o);if(s)return this.path=o,this.href=o,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?U.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var a,s=A.exec(o);if(s&&(T=(s=s[0]).toLowerCase(),this.protocol=T,o=o.substr(s.length)),(r||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(a="//"===o.substr(0,2))||s&&B[s]||(o=o.substr(2),this.slashes=!0)),!B[s]&&(a||s&&!D[s])){for(var c,h=-1,l=0;l<C.length;l++)-1!==(c=o.indexOf(C[l]))&&(-1===h||c<h)&&(h=c);for(-1!==(x=-1===h?o.lastIndexOf("@"):o.lastIndexOf("@",h))&&(S=o.slice(0,x),o=o.slice(x+1),this.auth=decodeURIComponent(S)),h=-1,l=0;l<E.length;l++)-1!==(c=o.indexOf(E[l]))&&(-1===h||c<h)&&(h=c);-1===h&&(h=o.length),this.host=o.slice(0,h),o=o.slice(h),this.parseHost(),this.hostname=this.hostname||"";var u="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!u)for(var f=this.hostname.split(/\./),d=(l=0,f.length);l<d;l++){var p=f[l];if(p&&!p.match(O)){for(var y="",g=0,m=p.length;g<m;g++)127<p.charCodeAt(g)?y+="x":y+=p[g];if(!y.match(O)){var v=f.slice(0,l),w=f.slice(l+1),b=p.match(N);b&&(v.push(b[1]),w.unshift(b[2])),w.length&&(o="/"+w.join(".")+o),this.hostname=v.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),u||(this.hostname=I.toASCII(this.hostname));var x=this.port?":"+this.port:"",S=this.hostname||"";this.host=S+x,this.href+=this.host,u&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!M[T])for(l=0,d=P.length;l<d;l++){var _,k=P[l];-1!==o.indexOf(k)&&((_=encodeURIComponent(k))===k&&(_=escape(k)),o=o.split(k).join(_))}u=o.indexOf("#");-1!==u&&(this.hash=o.substr(u),o=o.slice(0,u));var T,u=o.indexOf("?");return-1!==u?(this.search=o.substr(u),this.query=o.substr(u+1),e&&(this.query=U.parse(this.query)),o=o.slice(0,u)):e&&(this.search="",this.query={}),o&&(this.pathname=o),D[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(x=this.pathname||"",T=this.search||"",this.path=x+T),this.href=this.format(),this},x.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&L.isObject(this.query)&&Object.keys(this.query).length&&(o=U.stringify(this.query));o=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||D[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i=i||"",n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),e+i+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(o=o.replace("#","%23"))+n},x.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},x.prototype.resolveObject=function(t){L.isString(t)&&((d=new x).parse(t,!1,!0),t=d);for(var e=new x,r=Object.keys(this),n=0;n<r.length;n++){var i=r[n];e[i]=this[i]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),s=0;s<o.length;s++){var a=o[s];"protocol"!==a&&(e[a]=t[a])}return D[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!D[t.protocol]){for(var c=Object.keys(t),h=0;h<c.length;h++){var l=c[h];e[l]=t[l]}return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||B[t.protocol])e.pathname=t.pathname;else{for(var u=(t.pathname||"").split("/");u.length&&!(t.host=u.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==u[0]&&u.unshift(""),u.length<2&&u.unshift(""),e.pathname=u.join("/")}return e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,(e.pathname||e.search)&&(p=e.pathname||"",y=e.search||"",e.path=p+y),e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var f=e.pathname&&"/"===e.pathname.charAt(0),d=t.host||t.pathname&&"/"===t.pathname.charAt(0),p=d||f||e.host&&t.pathname,y=p,g=e.pathname&&e.pathname.split("/")||[],f=(u=t.pathname&&t.pathname.split("/")||[],e.protocol&&!D[e.protocol]);if(f&&(e.hostname="",e.port=null,e.host&&(""===g[0]?g[0]=e.host:g.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===u[0]?u[0]=t.host:u.unshift(t.host)),t.host=null),p=p&&(""===u[0]||""===g[0])),d)e.host=(t.host||""===t.host?t:e).host,e.hostname=(t.hostname||""===t.hostname?t:e).hostname,e.search=t.search,e.query=t.query,g=u;else if(u.length)(g=g||[]).pop(),g=g.concat(u),e.search=t.search,e.query=t.query;else if(!L.isNullOrUndefined(t.search))return f&&(e.hostname=e.host=g.shift(),(b=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=b.shift(),e.host=e.hostname=b.shift())),e.search=t.search,e.query=t.query,L.isNull(e.pathname)&&L.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.href=e.format(),e;if(!g.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var m=g.slice(-1)[0],d=(e.host||t.host||1<g.length)&&("."===m||".."===m)||""===m,v=0,w=g.length;0<=w;w--)"."===(m=g[w])?g.splice(w,1):".."===m?(g.splice(w,1),v++):v&&(g.splice(w,1),v--);if(!p&&!y)for(;v--;)g.unshift("..");!p||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),d&&"/"!==g.join("/").substr(-1)&&g.push("");var b,d=""===g[0]||g[0]&&"/"===g[0].charAt(0);return f&&(e.hostname=e.host=!d&&g.length?g.shift():"",(b=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=b.shift(),e.host=e.hostname=b.shift())),(p=p||e.host&&g.length)&&!d&&g.unshift(""),g.length?e.pathname=g.join("/"):(e.pathname=null,e.path=null),L.isNull(e.pathname)&&L.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},x.prototype.parseHost=function(){var t=this.host,e=n.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":57,punycode:33,querystring:36}],57:[function(t,e,r){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],58:[function(t,r,e){!function(e){!function(){function n(t){try{if(!e.localStorage)return}catch(t){return}t=e.localStorage[t];return null!=t&&"true"===String(t).toLowerCase()}r.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}.call(this)}.call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(t,e,r){e.exports=function t(i,e){if(i&&e)return t(i)(e);if("function"!=typeof i)throw new TypeError("need wrapper function");return Object.keys(i).forEach(function(t){r[t]=i[t]}),r;function r(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];var r=i.apply(this,t),n=t[t.length-1];return"function"==typeof r&&r!==n&&Object.keys(n).forEach(function(t){r[t]=n[t]}),r}}},{}],60:[function(t,e,r){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],61:[function(t,e,r){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r,n=arguments[e];for(r in n)i.call(n,r)&&(t[r]=n[r])}return t};var i=Object.prototype.hasOwnProperty},{}]},{},[9])(9)}.call(this,l(21))},function(t,e,r){"use strict";var n=r(7).exportTypedArrayMethod,i=r(2),r=r(3).Uint8Array,r=r&&r.prototype||{},o=[].toString,s=[].join;i(function(){o.call({})})&&(o=function(){return s.call(this)});r=r.toString!=o;n("toString",o,r)},function(t,e,r){"use strict";var n=r(3),i=r(7),r=r(2),o=n.Int8Array,s=i.aTypedArray,i=i.exportTypedArrayMethod,a=[].toLocaleString,c=[].slice,h=!!o&&r(function(){a.call(new o(1))});i("toLocaleString",function(){return a.apply(h?c.call(s(this)):s(this),arguments)},r(function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()})||!r(function(){o.prototype.toLocaleString.call([1,2])}))},function(t,e,r){"use strict";var n=r(7),i=r(11),o=r(34),s=r(57),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("subarray",function(t,e){var r=a(this),n=r.length,t=o(t,n);return new(s(r,r.constructor))(r.buffer,r.byteOffset+t*r.BYTES_PER_ELEMENT,i((void 0===e?n:o(e,n))-t))})},function(t,e,r){"use strict";var n=r(7),i=r(3),o=r(2),s=r(59),a=r(11),c=r(170),h=r(169),l=r(168),u=r(49),f=r(167),d=n.aTypedArray,n=n.exportTypedArrayMethod,p=i.Uint16Array,y=p&&p.prototype.sort,i=!!y&&!o(function(){var t=new p(2);t.sort(null),t.sort({})}),g=!!y&&!o(function(){if(u)return u<74;if(h)return h<67;if(l)return!0;if(f)return f<602;for(var t,e=new p(516),r=Array(516),n=0;n<516;n++)t=n%4,e[n]=515-n,r[n]=n-2*t+3;for(e.sort(function(t,e){return(t/4|0)-(e/4|0)}),n=0;n<516;n++)if(e[n]!==r[n])return!0});n("sort",function(t){if(void 0!==t&&s(t),g)return y.call(this,t);d(this);for(var r,e=a(this.length),n=Array(e),i=0;i<e;i++)n[i]=this[i];for(n=c(this,(r=t,function(t,e){return void 0!==r?+r(t,e)||0:e!=e?-1:t!=t?1:0===t&&0===e?0<1/t&&1/e<0?1:-1:e<t})),i=0;i<e;i++)this[i]=n[i];return this},!g||i)},function(t,e,r){"use strict";var n=r(7),i=r(27).some,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(7),s=r(57),r=r(2),a=n.aTypedArray,c=n.aTypedArrayConstructor,n=n.exportTypedArrayMethod,h=[].slice;n("slice",function(t,e){for(var r=h.call(a(this),t,e),e=s(this,this.constructor),n=0,i=r.length,o=new(c(e))(i);n<i;)o[n]=r[n++];return o},r(function(){new Int8Array(1).slice()}))},function(t,e,r){"use strict";var n=r(7),s=r(11),a=r(107),c=r(15),r=r(2),h=n.aTypedArray;(0,n.exportTypedArrayMethod)("set",function(t){h(this);var e=a(1<arguments.length?arguments[1]:void 0,1),r=this.length,n=c(t),i=s(n.length),o=0;if(r<i+e)throw RangeError("Wrong length");for(;o<i;)this[e+o]=n[o++]},r(function(){new Int8Array(1).set({})}))},function(t,e,r){"use strict";var r=r(7),i=r.aTypedArray,r=r.exportTypedArrayMethod,o=Math.floor;r("reverse",function(){for(var t,e=i(this).length,r=o(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this})},function(t,e,r){"use strict";var n=r(7),i=r(106).right,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",function(t){return i(o(this),t,arguments.length,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(7),i=r(106).left,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",function(t){return i(o(this),t,arguments.length,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(7),i=r(27).map,o=r(57),s=n.aTypedArray,a=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("map",function(t){return i(s(this),t,1<arguments.length?arguments[1]:void 0,function(t,e){return new(a(o(t,t.constructor)))(e)})})},function(t,e,r){"use strict";var n=r(7),i=r(171),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",function(t){return i.apply(o(this),arguments)})},function(t,e,r){"use strict";var r=r(7),n=r.aTypedArray,r=r.exportTypedArrayMethod,i=[].join;r("join",function(t){return i.apply(n(this),arguments)})},function(t,e,r){"use strict";var n=r(3),i=r(7),o=r(90),r=r(5)("iterator"),n=n.Uint8Array,s=o.values,a=o.keys,c=o.entries,h=i.aTypedArray,o=i.exportTypedArrayMethod,i=n&&n.prototype[r],n=!!i&&("values"==i.name||null==i.name),i=function(){return s.call(h(this))};o("entries",function(){return c.call(h(this))}),o("keys",function(){return a.call(h(this))}),o("values",i,!n),o(r,i,!n)},function(t,e,r){"use strict";var n=r(7),i=r(51).indexOf,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(7),i=r(51).includes,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(7),i=r(27).forEach,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",function(t){i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(7),i=r(27).findIndex,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(7),i=r(27).find,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(7),i=r(27).filter,o=r(172),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("filter",function(t){t=i(s(this),t,1<arguments.length?arguments[1]:void 0);return o(this,t)})},function(t,e,r){"use strict";var n=r(7),i=r(76),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("fill",function(t){return i.apply(o(this),arguments)})},function(t,e,r){"use strict";var n=r(7),i=r(27).every,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(7),i=r(173),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("copyWithin",function(t,e){return i.call(o(this),t,e,2<arguments.length?arguments[2]:void 0)})},function(t,e,r){var i=r(17);t.exports=function(t,e,r){for(var n in e)i(t,n,e[n],r);return t}},function(t,e,r){r(178)("Uint8",function(n){return function(t,e,r){return n(this,t,e,r)}})},function(t,e,r){var n=r(5),i=r(43),o=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},function(t,e,r){"use strict";r.r(e);r(199);function n(t,e){var r=e.rect.width*e.borderRadius,n=e.rect.height*e.borderRadius,n=r<n?r:n;e.rect.width<2*n&&(n=e.rect.width/2),e.rect.height<2*n&&(n=e.rect.height/2),t.beginPath(),t.moveTo(e.rect.x+n,e.rect.y),t.arcTo(e.rect.x+e.rect.width,e.rect.y,e.rect.x+e.rect.width,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height,e.rect.x,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x,e.rect.y+e.rect.height,e.rect.x,e.rect.y,n),t.arcTo(e.rect.x,e.rect.y,e.rect.x+e.rect.width,e.rect.y,n),t.closePath(),t.moveTo(e.rect.x,e.rect.y+40),t.lineTo(e.rect.ex,e.rect.y+40),t.fill(),t.stroke()}function i(t,e){var r=e.rect.width*e.borderRadius,n=e.rect.height*e.borderRadius,n=r<n?r:n;e.rect.width<2*n&&(n=e.rect.width/2),e.rect.height<2*n&&(n=e.rect.height/2),t.beginPath(),t.moveTo(e.rect.x+n,e.rect.y),t.arcTo(e.rect.x+e.rect.width,e.rect.y,e.rect.x+e.rect.width,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height,e.rect.x,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x,e.rect.y+e.rect.height,e.rect.x,e.rect.y,n),t.arcTo(e.rect.x,e.rect.y,e.rect.x+e.rect.width,e.rect.y,n),t.closePath(),t.moveTo(e.rect.x,e.rect.y+40),t.lineTo(e.rect.ex,e.rect.y+40);n=e.rect.y+20+e.rect.height/2;t.moveTo(e.rect.x,n),t.lineTo(e.rect.ex,n),t.fill(),t.stroke()}var o=r(1);function s(t){t.iconRect=new o.c(0,0,0,0)}function a(t){t.textRect=new o.c(t.rect.x,t.rect.y,t.rect.width,40),t.fullTextRect=t.textRect}function c(t){t.iconRect=new o.c(0,0,0,0)}function h(t){t.textRect=new o.c(t.rect.x,t.rect.y,t.rect.width,40),t.fullTextRect=t.textRect}function l(){Object(o.h)("simpleClass",n,null,s,a),Object(o.h)("interfaceClass",i,null,c,h)}r.d(e,"simpleClass",function(){return n}),r.d(e,"interfaceClass",function(){return i}),r.d(e,"simpleClassIconRect",function(){return s}),r.d(e,"simpleClassTextRect",function(){return a}),r.d(e,"interfaceClassIconRect",function(){return c}),r.d(e,"interfaceClassTextRect",function(){return h}),r.d(e,"register",function(){return l}),r.d(e,"Topology",function(){return o.d})},,,,,,,function(t,e,r){var n=r(20),i=r(15),o=r(66);n({target:"Object",stat:!0,forced:r(2)(function(){o(1)})},{keys:function(t){return o(i(t))}})},function(t,e,r){"use strict";var n=r(20),h=r(6),l=r(79),u=r(34),f=r(11),d=r(19),p=r(102),i=r(5),r=r(91)("slice"),y=i("species"),g=[].slice,m=Math.max;n({target:"Array",proto:!0,forced:!r},{slice:function(t,e){var r,n,i,o=d(this),s=f(o.length),a=u(t,s),c=u(void 0===e?s:e,s);if(l(o)&&((r="function"==typeof(r=o.constructor)&&(r===Array||l(r.prototype))||h(r)&&null===(r=r[y])?void 0:r)===Array||void 0===r))return g.call(o,a,c);for(n=new(void 0===r?Array:r)(m(c-a,0)),i=0;a<c;a++,i++)a in o&&p(n,i,o[a]);return n.length=i,n}})},function(t,e,r){"use strict";var n=r(20),i=r(27).map;n({target:"Array",proto:!0,forced:!r(91)("map")},{map:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}})},function(t,e,r){r=r(48).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},function(t,e,r){r=r(48);t.exports=/MSIE|Trident/.test(r)},function(t,e,r){r=r(48).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},function(t,e){var i=Math.floor,o=function(t,e){var r=t.length,n=i(r/2);return r<8?s(t,e):a(o(t.slice(0,n),e),o(t.slice(n),e),e)},s=function(t,e){for(var r,n,i=t.length,o=1;o<i;){for(r=t[n=o];n&&0<e(t[n-1],r);)t[n]=t[--n];n!==o++&&(t[n]=r)}return t},a=function(t,e,r){for(var n=t.length,i=e.length,o=0,s=0,a=[];o<n||s<i;)o<n&&s<i?a.push(r(t[o],e[s])<=0?t[o++]:e[s++]):a.push(o<n?t[o++]:e[s++]);return a};t.exports=o},function(t,e,r){"use strict";var i=r(19),o=r(14),s=r(11),r=r(89),a=Math.min,c=[].lastIndexOf,h=!!c&&1/[1].lastIndexOf(1,-0)<0,r=r("lastIndexOf");t.exports=h||!r?function(t){if(h)return c.apply(this,arguments)||0;var e=i(this),r=s(e.length),n=r-1;for((n=1<arguments.length?a(n,o(arguments[1])):n)<0&&(n=r+n);0<=n;n--)if(n in e&&e[n]===t)return n||0;return-1}:c},function(t,e,r){var o=r(7).aTypedArrayConstructor,s=r(57);t.exports=function(t,e){for(var t=s(t,t.constructor),r=0,n=e.length,i=new(o(t))(n);r<n;)i[r]=e[r++];return i}},function(t,e,r){"use strict";var c=r(15),h=r(34),l=r(11),u=Math.min;t.exports=[].copyWithin||function(t,e){var r=c(this),n=l(r.length),i=h(t,n),o=h(e,n),e=2<arguments.length?arguments[2]:void 0,s=u((void 0===e?n:h(e,n))-o,n-i),a=1;for(o<i&&i<o+s&&(a=-1,o+=s-1,i+=s-1);0<s--;)o in r?r[i]=r[o]:delete r[i],i+=a,o+=a;return r}},function(t,e,r){"use strict";var n=r(30),i=r(10),o=r(5),s=r(4),a=o("species");t.exports=function(t){var e=n(t),t=i.f;s&&e&&!e[a]&&t(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,r){var n=r(14);t.exports=function(t){t=n(t);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(t,e){var f=Math.abs,d=Math.pow,p=Math.floor,y=Math.log,g=Math.LN2;t.exports={pack:function(t,e,r){var n,i,o=new Array(r),s=8*r-e-1,a=(1<<s)-1,c=a>>1,h=23===e?d(2,-24)-d(2,-77):0,l=t<0||0===t&&1/t<0?1:0,u=0;for((t=f(t))!=t||t===1/0?(i=t!=t?1:0,n=a):(n=p(y(t)/g),t*(r=d(2,-n))<1&&(n--,r*=2),2<=(t+=1<=n+c?h/r:h*d(2,1-c))*r&&(n++,r/=2),a<=n+c?(i=0,n=a):1<=n+c?(i=(t*r-1)*d(2,e),n+=c):(i=t*d(2,c-1)*d(2,e),n=0));8<=e;o[u++]=255&i,i/=256,e-=8);for(n=n<<e|i,s+=e;0<s;o[u++]=255&n,n/=256,s-=8);return o[--u]|=128*l,o},unpack:function(t,e){var r,n=t.length,i=8*n-e-1,o=(1<<i)-1,s=o>>1,a=i-7,c=n-1,n=t[c--],h=127&n;for(n>>=7;0<a;h=256*h+t[c],c--,a-=8);for(r=h&(1<<-a)-1,h>>=-a,a+=e;0<a;r=256*r+t[c],c--,a-=8);if(0===h)h=1-s;else{if(h===o)return r?NaN:n?-1/0:1/0;r+=d(2,e),h-=s}return(n?-1:1)*r*d(2,h-e)}}},function(t,e,r){"use strict";function n(t){return[255&t]}function i(t){return[255&t,t>>8&255]}function o(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function s(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function a(t){return j(t,23,4)}function c(t){return j(t,52,8)}function h(t,e,r,n){var i=b(r),r=R(t);if(i+e>r.byteLength)throw U(N);return t=R(r.buffer).bytes,r=i+r.byteOffset,e=t.slice(r,r+e),n?e:e.reverse()}function l(t,e,r,n,i,o){if(r=b(r),t=R(t),r+e>t.byteLength)throw U(N);for(var s=R(t.buffer).bytes,a=r+t.byteOffset,c=n(+i),h=0;h<e;h++)s[a+h]=c[o?h:e-h-1]}var u=r(3),f=r(4),d=r(110),p=r(12),y=r(154),g=r(2),m=r(87),v=r(14),w=r(11),b=r(108),x=r(176),S=r(55),_=r(47),k=r(44).f,T=r(10).f,I=r(76),L=r(54),A=r(25),R=A.get,P=A.set,E="ArrayBuffer",C="DataView",O="prototype",N="Wrong index",M=u[E],B=M,D=u[C],r=D&&D[O],A=Object.prototype,U=u.RangeError,j=x.pack,F=x.unpack,x=function(t,e){T(t[O],e,{get:function(){return R(this)[e]}})};if(d){if(!g(function(){M(1)})||!g(function(){new M(-1)})||g(function(){return new M,new M(1.5),new M(NaN),M.name!=E})){for(var W,g=(B=function(t){return m(this,B),new M(b(t))})[O]=M[O],K=k(M),q=0;K.length>q;)(W=K[q++])in B||p(B,W,M[W]);g.constructor=B}_&&S(r)!==A&&_(r,A);var A=new D(new B(2)),z=r.setInt8;A.setInt8(0,2147483648),A.setInt8(1,2147483649),!A.getInt8(0)&&A.getInt8(1)||y(r,{setInt8:function(t,e){z.call(this,t,e<<24>>24)},setUint8:function(t,e){z.call(this,t,e<<24>>24)}},{unsafe:!0})}else B=function(t){m(this,B,E);t=b(t);P(this,{bytes:I.call(new Array(t),0),byteLength:t}),f||(this.byteLength=t)},D=function(t,e,r){m(this,D,C),m(t,B,C);var n=R(t).byteLength,e=v(e);if(e<0||n<e)throw U("Wrong offset");if(n<e+(r=void 0===r?n-e:w(r)))throw U("Wrong length");P(this,{buffer:t,byteLength:r,byteOffset:e}),f||(this.buffer=t,this.byteLength=r,this.byteOffset=e)},f&&(x(B,"byteLength"),x(D,"buffer"),x(D,"byteLength"),x(D,"byteOffset")),y(D[O],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){t=h(this,2,t,1<arguments.length?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(t){t=h(this,2,t,1<arguments.length?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(t){return s(h(this,4,t,1<arguments.length?arguments[1]:void 0))},getUint32:function(t){return s(h(this,4,t,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(t){return F(h(this,4,t,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(t){return F(h(this,8,t,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(t,e){l(this,1,t,n,e)},setUint8:function(t,e){l(this,1,t,n,e)},setInt16:function(t,e){l(this,2,t,i,e,2<arguments.length?arguments[2]:void 0)},setUint16:function(t,e){l(this,2,t,i,e,2<arguments.length?arguments[2]:void 0)},setInt32:function(t,e){l(this,4,t,o,e,2<arguments.length?arguments[2]:void 0)},setUint32:function(t,e){l(this,4,t,o,e,2<arguments.length?arguments[2]:void 0)},setFloat32:function(t,e){l(this,4,t,a,e,2<arguments.length?arguments[2]:void 0)},setFloat64:function(t,e){l(this,8,t,c,e,2<arguments.length?arguments[2]:void 0)}});L(B,E),L(D,C),t.exports={ArrayBuffer:B,DataView:D}},function(t,e,r){"use strict";function d(t,e){for(var r=0,n=e.length,i=new(z(t))(n);r<n;)i[r]=e[r++];return i}function p(t){var e;return t instanceof U||"ArrayBuffer"==(e=f(t))||"SharedArrayBuffer"==e}function n(t,e){return H(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)}var a=r(20),c=r(3),i=r(4),y=r(111),o=r(7),s=r(177),g=r(87),h=r(24),m=r(12),v=r(11),w=r(108),b=r(107),l=r(16),u=r(9),f=r(56),x=r(6),S=r(33),_=r(47),k=r(44).f,T=r(109),I=r(27).forEach,L=r(174),A=r(10),R=r(36),P=r(25),E=r(116),C=P.get,O=P.set,N=A.f,M=R.f,B=Math.round,D=c.RangeError,U=s.ArrayBuffer,j=s.DataView,F=o.NATIVE_ARRAY_BUFFER_VIEWS,W=o.TYPED_ARRAY_TAG,K=o.TypedArray,q=o.TypedArrayPrototype,z=o.aTypedArrayConstructor,H=o.isTypedArray,V="BYTES_PER_ELEMENT",Y="Wrong length",P=function(t,e){N(t,e,{get:function(){return C(this)[e]}})},s=function(t,e){return n(t,e=l(e,!0))?h(2,t[e]):M(t,e)},o=function(t,e,r){return!(n(t,e=l(e,!0))&&x(r)&&u(r,"value"))||u(r,"get")||u(r,"set")||r.configurable||u(r,"writable")&&!r.writable||u(r,"enumerable")&&!r.enumerable?N(t,e,r):(t[e]=r.value,t)};i?(F||(R.f=s,A.f=o,P(q,"buffer"),P(q,"byteOffset"),P(q,"byteLength"),P(q,"length")),a({target:"Object",stat:!0,forced:!F},{getOwnPropertyDescriptor:s,defineProperty:o}),t.exports=function(t,e,n){function h(t,e){N(t,e,{get:function(){return function(t,e){t=C(t);return t.view[r](e*l+t.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){t=C(t);n&&(r=(r=B(r))<0?0:255<r?255:255&r),t.view[i](e*l+t.byteOffset,r,!0)}(this,e,t)},enumerable:!0})}var l=t.match(/\d+$/)[0]/8,u=t+(n?"Clamped":"")+"Array",r="get"+t,i="set"+t,o=c[u],f=o,s=f&&f.prototype,t={};F?y&&(f=e(function(t,e,r,n){return g(t,f,u),E(x(e)?p(e)?void 0!==n?new o(e,b(r,l),n):void 0!==r?new o(e,b(r,l)):new o(e):H(e)?d(f,e):T.call(f,e):new o(w(e)),t,f)}),_&&_(f,K),I(k(o),function(t){t in f||m(f,t,o[t])}),f.prototype=s):(f=e(function(t,e,r,n){g(t,f,u);var i,o,s=0,a=0;if(x(e)){if(!p(e))return H(e)?d(f,e):T.call(f,e);var c=e,a=b(r,l),r=e.byteLength;if(void 0===n){if(r%l)throw D(Y);if((i=r-a)<0)throw D(Y)}else if(r<(i=v(n)*l)+a)throw D(Y);o=i/l}else o=w(e),c=new U(i=o*l);for(O(t,{buffer:c,byteOffset:a,byteLength:i,length:o,view:new j(c)});s<o;)h(t,s++)}),_&&_(f,K),s=f.prototype=S(q)),s.constructor!==f&&m(s,"constructor",f),W&&m(s,W,u),t[u]=f,a({global:!0,forced:f!=o,sham:!F},t),V in f||m(f,V,l),V in s||m(s,V,l),L(u)}):t.exports=function(){}},function(t,e,r){var i=r(5)("iterator"),o=!1;try{var n=0,s={next:function(){return{done:!!n++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var n={};n[i]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r}},function(t,e,r){"use strict";var n=r(111);(0,r(7).exportTypedArrayStaticMethod)("from",r(109),n)},function(t,e,r){"use strict";var n=r(27).forEach,r=r(89)("forEach");t.exports=r?[].forEach:function(t){return n(this,t,1<arguments.length?arguments[1]:void 0)}},function(t,e,r){var n,i=r(3),o=r(101),s=r(181),a=r(12);for(n in o){var c=i[n],c=c&&c.prototype;if(c&&c.forEach!==s)try{a(c,"forEach",s)}catch(t){c.forEach=s}}},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(t){return typeof t}:e.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e.exports.default=e.exports,e.exports.__esModule=!0,r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(112);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(112);t.exports=function(t){if(Array.isArray(t))return n(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(187),i=r(186),o=r(185),s=r(184);t.exports=function(t){return n(t)||i(t)||o(t)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,h=c>>1,l=-7,u=r?i-1:0,f=r?-1:1,r=t[e+u];for(u+=f,o=r&(1<<-l)-1,r>>=-l,l+=a;0<l;o=256*o+t[e+u],u+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;0<l;s=256*s+t[e+u],u+=f,l-=8);if(0===o)o=1-h;else{if(o===c)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,n),o-=h}return(r?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,c=8*o-i-1,h=(1<<c)-1,l=h>>1,u=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,o=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(e+=1<=s+l?u/n:u*Math.pow(2,1-l))*n&&(s++,n/=2),h<=s+l?(a=0,s=h):1<=s+l?(a=(e*n-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;t[r+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;0<c;t[r+f]=255&s,f+=d,s/=256,c-=8);t[r+f-d]|=128*o}},function(t,e,r){"use strict";e.byteLength=function(t){var e=l(t),t=e[0],e=e[1];return 3*(t+e)/4-e},e.toByteArray=function(t){var e,r,n=l(t),i=n[0],n=n[1],o=new h(function(t,e){return 3*(t+e)/4-e}(i,n)),s=0,a=0<n?i-4:i;for(r=0;r<a;r+=4)e=c[t.charCodeAt(r)]<<18|c[t.charCodeAt(r+1)]<<12|c[t.charCodeAt(r+2)]<<6|c[t.charCodeAt(r+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=255&e;2===n&&(e=c[t.charCodeAt(r)]<<2|c[t.charCodeAt(r+1)]>>4,o[s++]=255&e);1===n&&(e=c[t.charCodeAt(r)]<<10|c[t.charCodeAt(r+1)]<<4|c[t.charCodeAt(r+2)]>>2,o[s++]=e>>8&255,o[s++]=255&e);return o},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i=[],o=0,s=r-n;o<s;o+=16383)i.push(function(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(function(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}(n));return i.join("")}(t,o,s<o+16383?s:o+16383));1==n?(e=t[r-1],i.push(a[e>>2]+a[e<<4&63]+"==")):2==n&&(e=(t[r-2]<<8)+t[r-1],i.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return i.join("")};for(var a=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)a[i]=n[i],c[n.charCodeAt(i)]=i;function l(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("=");return[t=-1===t?e:t,t===e?0:4-t%4]}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,C,O){"use strict";!function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var a=O(191),o=O(190),s=O(189);function r(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(t=null===t?new u(e):t).length=e,t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"!=typeof t)return n(this,t,e,r);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}function n(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=l(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),r=(t=i(t,n)).write(e,r);r!==n&&(t=t.slice(0,r));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|f(e.length);return 0===(t=i(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?i(t,0):l(t,e);if("Buffer"===e.type&&s(e.data))return l(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=i(t,e<0?0:0|f(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function l(t,e){var r=e.length<0?0:0|f(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var r=(t="string"!=typeof t?""+t:t).length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return R(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return P(t).length;default:if(n)return R(t).length;e=(""+e).toLowerCase(),n=!0}}function e(t,e,r){var n,i,o,s=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,r){var n=t.length;(!e||e<0)&&(e=0);(!r||r<0||n<r)&&(r=n);for(var i="",o=e;o<r;++o)i+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return i}(this,e,r);case"utf8":case"utf-8":return w(this,e,r);case"ascii":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}(this,e,r);case"latin1":case"binary":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}(this,e,r);case"base64":return n=this,o=r,0===(i=e)&&o===n.length?a.fromByteArray(n):a.fromByteArray(n.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,e,r);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function p(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?i?0:t.length-1:r)<0?t.length+r:r)>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:g(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,r):g(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,r,n,i){var o=1,s=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s/=o=2,a/=2,r/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var h=-1,l=r;l<s;l++)if(c(t,l)===c(e,-1===h?0:l-h)){if(l-(h=-1===h?l:h)+1===a)return h*o}else-1!==h&&(l-=l-h),h=-1;else for(l=r=s<r+a?s-a:r;0<=l;l--){for(var u=!0,f=0;f<a;f++)if(c(t,l+f)!==c(e,f)){u=!1;break}if(u)return l}return-1}function m(t,e,r,n){return E(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function v(t,e,r,n){return E(function(t,e){for(var r,n,i=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,n=n%256,i.push(n),i.push(r);return i}(e,t.length-r),t,r,n)}function w(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,c,h=t[i],l=null,u=239<h?4:223<h?3:191<h?2:1;if(i+u<=r)switch(u){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[i+1]))&&127<(c=(31&h)<<6|63&o)&&(l=c);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(c=(15&h)<<12|(63&o)<<6|63&s)&&(c<55296||57343<c)&&(l=c);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)&&c<1114112&&(l=c)}null===l?(l=65533,u=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=u}return function(t){var e=t.length;if(e<=b)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=b));return r}(n)}C.Buffer=u,C.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},C.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),C.kMaxLength=r(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return n(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return n=null,e=e,r=r,c(t=t),!(t<=0)&&void 0!==e?"string"==typeof r?i(n,t).fill(e,r):i(n,t).fill(e):i(n,t);var n},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var r=u.allocUnsafe(e),n=0,i=0;i<t.length;++i){var o=t[i];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?w(this,0,t):e.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",e=C.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(e=void 0===e?0:e)<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=e)return 0;if(i<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(n,i),h=t.slice(e,r),l=0;l<a;++l)if(c[l]!==h[l]){o=c[l],s=h[l];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||i<r)&&(r=i),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,s,a,c=!1;;)switch(n){case"hex":return function(t,e,r,n){r=Number(r)||0;var i=t.length-r;if((!n||i<(n=Number(n)))&&(n=i),(i=e.length)%2!=0)throw new TypeError("Invalid hex string");i/2<n&&(n=i/2);for(var o=0;o<n;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[r+o]=s}return o}(this,t,e,r);case"utf8":case"utf-8":return s=e,a=r,E(R(t,(o=this).length-s),o,s,a);case"ascii":return m(this,t,e,r);case"latin1":case"binary":return m(this,t,e,r);case"base64":return o=this,s=e,a=r,E(P(t),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,e,r);default:if(c)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),c=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function x(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function S(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function _(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function k(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function T(t,e,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(t,e,r,n,i){return i||T(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function L(t,e,r,n,i){return i||T(t,0,r,8),o.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=u.prototype;else for(var n=e-t,i=new u(n,void 0),o=0;o<n;++o)i[o]=this[o+t];return i},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||x(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||x(t,e,this.length);for(var n=this[t+--e],i=1;0<e&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||x(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||x(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||x(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||x(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||x(t,e,this.length);for(var n=e,i=1,o=this[t+--n];0<n&&(i*=256);)o+=this[t+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||x(t,2,this.length);t=this[t]|this[t+1]<<8;return 32768&t?4294901760|t:t},u.prototype.readInt16BE=function(t,e){e||x(t,2,this.length);t=this[t+1]|this[t]<<8;return 32768&t?4294901760|t:t},u.prototype.readInt32LE=function(t,e){return e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||x(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||x(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||x(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||x(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||S(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||S(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||S(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||S(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||S(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||S(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||S(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){t=+t,e|=0,n||S(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){t=+t,e|=0,n||S(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,o=1,s=0;for(this[e+i]=255&t;0<=--i&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||S(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||S(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||S(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||S(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return I(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return I(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return L(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return L(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i,o=(n=t.length-e<n-r?t.length-e+r:n)-r;if(this===t&&r<e&&e<n)for(i=o-1;0<=i;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){var i;if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1!==t.length||(i=t.charCodeAt(0))<256&&(t=i),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(a=e;a<r;++a)this[a]=t;else for(var o=u.isBuffer(t)?t:R(new u(t,n).toString()),s=o.length,a=0;a<r-e;++a)this[a+e]=o[a%s];return this};var A=/[^+\/0-9A-Za-z-_]/g;function R(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!i){if(56319<r){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(e-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,r<128){if(--e<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function P(t){return a.toByteArray(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(A,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function E(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}.call(this,O(21))},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e,r){var n=r(18),r="["+r(193)+"]",i=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),r=function(e){return function(t){t=String(n(t));return 1&e&&(t=t.replace(i,"")),t=2&e?t.replace(o,""):t}};t.exports={start:r(1),end:r(2),trim:r(3)}},function(t,e,r){"use strict";function n(t){var e,r,n,i,o,s,a,c=u(t,!1);if("string"==typeof c&&2<c.length)if(43===(e=(c=m(c)).charCodeAt(0))||45===e){if(88===(t=c.charCodeAt(2))||120===t)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+c}for(o=(i=c.slice(2)).length,s=0;s<o;s++)if((a=i.charCodeAt(s))<48||n<a)return NaN;return parseInt(i,r)}return+c}var i=r(4),o=r(3),s=r(61),a=r(17),c=r(9),h=r(22),l=r(116),u=r(16),f=r(2),d=r(33),p=r(44).f,y=r(36).f,g=r(10).f,m=r(194).trim,v="Number",w=o[v],b=w.prototype,x=h(d(b))==v;if(s(v,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var S,_=function(t){var t=arguments.length<1?0:t,e=this;return e instanceof _&&(x?f(function(){b.valueOf.call(e)}):h(e)!=v)?l(new w(n(t)),e,_):n(t)},k=i?p(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;k.length>T;T++)c(w,S=k[T])&&!c(_,S)&&g(_,S,y(w,S));(_.prototype=b).constructor=_,a(o,v,_)}},function(t,e,r){"use strict";function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}Object.defineProperty(e,"__esModule",{value:!0}),e.s4=n,e.s8=function(){return n()+n()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=r(118),s=r(117),a=r(196),r=(h.prototype.get=function(t){return h.get(t,this.data)},h.prototype.set=function(t,e){h.set(t,e,this.data,this.observers)},h.prototype.updated=function(t){h.updated(t,this.data,this.observers)},h.prototype.subscribe=function(t,e){return h.subscribe(t,e,this.data,this.observers)},h.get=function(t,e){if(e=e||c.data,void 0===t)return e;for(var r=0,n=t.split(".");r<n.length;r++)if(void 0===(e=e[n[r]]))break;return e},h.set=function(t,e,r,n){r=r||c.data,n=n||c.observers;for(var i,o=t.split("."),s=r,a=0;a<o.length-1;++a)s[o[a]]||(s[o[a]]={}),s=s[o[a]];for(i in s[o[o.length-1]]=e,n)0===t.indexOf(n[i].key)&&n[i].fn(h.get(n[i].key,r))},h.updated=function(t,e,r){for(var n in r=r||c.observers)0===t.indexOf(r[n].key)&&r[n].fn(h.get(r[n].key,e))},h.subscribe=function(t,e,r,n){n=n||c.observers;var i=a.s8(),o=new s.Observer(i,t,e);n[i]=o;r=h.get(t,r);return void 0!==r&&e(r),o},h);function h(){this.data={},this.observers={}}e.Store=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(i.get=function(t){var t=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(t=document.cookie.match(t))?decodeURIComponent(t[2]):""},i.set=function(t,e,r){var n=window,e=n.escape(t)+"="+n.escape(e)+";";(r=r||{}).expires&&(e+="expires="+new Date((new Date).getTime()+1e3*r.expires*60*60*24).toUTCString()+";"),r.path&&(e+="path="+r.path+";"),r.domain&&(e+="domain="+r.domain+";"),document.cookie=e},i.delete=function(t,e){i.get(t)&&((e=e||{}).expires=-1,i.set(t,"",e))},i);function i(){}e.Cookie=n},function(t,e,r){var n=r(20),i=r(76),r=r(78);n({target:"Array",proto:!0},{fill:i}),r("fill")},function(t,e,r){var n,i=r(3),o=r(101),s=r(90),a=r(12),r=r(5),c=r("iterator"),h=r("toStringTag"),l=s.values;for(n in o){var u=i[n],f=u&&u.prototype;if(f){if(f[c]!==l)try{a(f,c,l)}catch(t){f[c]=l}if(f[h]||a(f,h,n),o[n])for(var d in s)if(f[d]!==s[d])try{a(f,d,s[d])}catch(t){f[d]=s[d]}}}},function(t,e,r){var n=r(6),i=r(22),o=r(5)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,r){"use strict";var n=r(82),l=r(201),m=r(8),u=r(18),v=r(57),w=r(81),b=r(11),x=r(80),f=r(50),i=r(95),r=r(2),S=i.UNSUPPORTED_Y,d=[].push,_=Math.min;n("split",function(i,p,y){var g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var r=String(u(this)),n=void 0===e?4294967295:e>>>0;if(0==n)return[];if(void 0===t)return[r];if(!l(t))return p.call(r,t,n);for(var i,o,s,a=[],e=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=new RegExp(t.source,e+"g");(i=f.call(h,r))&&!(c<(o=h.lastIndex)&&(a.push(r.slice(c,i.index)),1<i.length&&i.index<r.length&&d.apply(a,i.slice(1)),s=i[0].length,c=o,a.length>=n));)h.lastIndex===i.index&&h.lastIndex++;return c===r.length?!s&&h.test("")||a.push(""):a.push(r.slice(c)),a.length>n?a.slice(0,n):a}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:p.call(this,t,e)}:p;return[function(t,e){var r=u(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,r,e):g.call(String(r),t,e)},function(t,e){var r=y(g,this,t,e,g!==p);if(r.done)return r.value;var n=m(this),i=String(t),r=v(n,RegExp),o=n.unicode,t=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(S?"g":"y"),s=new r(S?"^(?:"+n.source+")":n,t),a=void 0===e?4294967295:e>>>0;if(0==a)return[];if(0===i.length)return null===x(s,i)?[i]:[];for(var c=0,h=0,l=[];h<i.length;){s.lastIndex=S?0:h;var u,f=x(s,S?i.slice(h):i);if(null===f||(u=_(b(s.lastIndex+(S?h:0)),i.length))===c)h=w(i,h,o);else{if(l.push(i.slice(c,h)),l.length===a)return l;for(var d=1;d<=f.length-1;d++)if(l.push(f[d]),l.length===a)return l;h=c=u}}return l.push(i.slice(c)),l}]},!!r(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};t="ab".split(t);return 2!==t.length||"a"!==t[0]||"b"!==t[1]}),S)},,,,,,,,,,,function(r,n,t){!function(t){var e;void 0===(e="function"==typeof(e=function(){"use strict";function i(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function l(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){a(n.response,e,r)},n.onerror=function(){console.error("could not download file")},n.send()}function o(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}var u="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof t&&t.global===t?t:void 0,f=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=u.saveAs||("object"!=typeof window||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(t,e,r){var n=u.URL||u.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener","string"==typeof t?(i.href=t,i.origin===location.origin?s(i):o(i.href)?l(t,e,r):s(i,i.target="_blank")):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){s(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(i(t,r),e);else if(o(t))l(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){s(n)})}}:function(t,e,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof t)return l(t,e,r);var i="application/octet-stream"===t.type,o=/constructor/i.test(u.HTMLElement)||u.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o||f)&&"undefined"!=typeof FileReader){var a=new FileReader;a.onloadend=function(){var t=a.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=t:location=t,n=null},a.readAsDataURL(t)}else{var c=u.URL||u.webkitURL,h=c.createObjectURL(t);n?n.location=h:location.href=h,n=null,setTimeout(function(){c.revokeObjectURL(h)},4e4)}});u.saveAs=a.saveAs=a,"undefined"!=typeof r&&(r.exports=a)})?e.apply(n,[]):e)||(r.exports=e)}.call(this,t(21))},function(t,e,r){var n=r(2),i=r(5),o=r(39),s=i("iterator");t.exports=!n(function(){var t=new URL("b?a=1&b=2&c=3","http://a"),r=t.searchParams,n="";return t.pathname="c%20d",r.forEach(function(t,e){r.delete("b"),n+=e+t}),o&&!t.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})},function(t,e,r){"use strict";var n=r(92).charAt,i=r(25),r=r(100),o="String Iterator",s=i.set,a=i.getterFor(o);r(String,"String",function(t){s(this,{type:o,string:String(t),index:0})},function(){var t=a(this),e=t.string,r=t.index;return r>=e.length?{value:void 0,done:!0}:(r=n(e,r),t.index+=r.length,{value:r,done:!1})})},,,,,,,,,,,function(t,e){t.exports=require("../packages/topology-tools-panel")},function(t,e){t.exports=require("../packages/canvas-context-menu")},function(t,e){t.exports=require("../packages/canvas-props")},,,,,,function(t,e,r){"use strict";r.r(e);r(23);var s=r(29),i=(r(195),r(62),r(83),r(65),r(215),r(200),r(255),r(202),r(247),r(155),r(153),r(152),r(151),r(150),r(149),r(148),r(147),r(146),r(145),r(144),r(143),r(142),r(141),r(140),r(139),r(138),r(137),r(136),r(135),r(134),r(133),r(132),r(131),r(246),r(1));function n(t,e){t.beginPath();var r=e.rect.width/7;t.moveTo(e.rect.x+r,e.rect.y),t.lineTo(e.rect.ex,e.rect.y),t.lineTo(e.rect.x+e.rect.width-r,e.rect.ey),t.lineTo(e.rect.x,e.rect.ey),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function o(t){t.anchors.push(new i.b(t.rect.x+t.rect.width/14,t.rect.y+t.rect.height/2,i.a.Left)),t.anchors.push(new i.b(t.rect.x+4*t.rect.width/7,t.rect.y,i.a.Up)),t.anchors.push(new i.b(t.rect.x+13*t.rect.width/14,t.rect.y+t.rect.height/2,i.a.Right)),t.anchors.push(new i.b(t.rect.x+3*t.rect.width/7,t.rect.ey,i.a.Bottom))}function a(t){t.iconRect=new i.c(0,0,0,0)}function c(t){t.textRect=new i.c(t.rect.x+t.rect.width/7,t.rect.y,5*t.rect.width/7,t.rect.height),t.fullTextRect=t.textRect}function h(t,e){t.beginPath();var r=e.rect.width/7;t.moveTo(e.rect.x,e.rect.y),t.lineTo(e.rect.ex,e.rect.y),t.lineTo(e.rect.ex,e.rect.ey),t.lineTo(e.rect.x,e.rect.ey),t.closePath(),t.moveTo(e.rect.x+r,e.rect.y),t.lineTo(e.rect.x+r,e.rect.ey),t.moveTo(e.rect.ex-r,e.rect.y),t.lineTo(e.rect.ex-r,e.rect.ey),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function l(t){t.iconRect=new i.c(0,0,0,0)}function u(t){t.textRect=new i.c(t.rect.x+t.rect.width/7,t.rect.y,5*t.rect.width/7,t.rect.height),t.fullTextRect=t.textRect}function f(t,e){t.beginPath();var r=e.rect.height/7;t.moveTo(e.rect.x,e.rect.y+r),t.bezierCurveTo(e.rect.x,e.rect.y-r/2|0,e.rect.ex,e.rect.y-r/2|0,e.rect.ex,e.rect.y+r),t.lineTo(e.rect.ex,e.rect.ey-r),t.bezierCurveTo(e.rect.ex,e.rect.ey+r/2|0,e.rect.x,e.rect.ey+r/2|0,e.rect.x,e.rect.ey-r),t.closePath(),t.moveTo(e.rect.x,e.rect.ey-r),t.bezierCurveTo(e.rect.x,e.rect.ey-2*r|0,e.rect.ex,e.rect.ey-2*r|0,e.rect.ex,e.rect.ey-r),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function d(t){t.iconRect=new i.c(0,0,0,0)}function p(t){t.textRect=new i.c(t.rect.x,t.rect.y+t.rect.height/8,t.rect.width,5*t.rect.height/8),t.fullTextRect=t.textRect}function y(t,e){t.beginPath();var r=e.rect.x+e.rect.width/2,n=e.rect.y+6*e.rect.height/7,i=e.rect.height/6;t.moveTo(e.rect.x,e.rect.y),t.lineTo(e.rect.ex,e.rect.y),t.lineTo(e.rect.ex,n),t.bezierCurveTo(e.rect.ex-20,n-i,r+e.rect.width/5,n-i,r,n),t.bezierCurveTo(r-e.rect.width/5,n+i,e.rect.x,n+i,e.rect.x,n),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function g(t){t.anchors.push(new i.b(t.rect.x,t.rect.y+t.rect.height/2,i.a.Left)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.y,i.a.Up)),t.anchors.push(new i.b(t.rect.x+t.rect.width,t.rect.y+t.rect.height/2,i.a.Right)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.y+6*t.rect.height/7,i.a.Bottom))}function m(t){t.iconRect=new i.c(0,0,0,0)}function v(t){t.textRect=new i.c(t.rect.x,t.rect.y,t.rect.width,5*t.rect.height/7),t.fullTextRect=t.textRect}function w(t,e){t.beginPath(),t.moveTo(e.rect.x,e.rect.y),t.lineTo(e.rect.ex,e.rect.y),t.lineTo(e.rect.ex,e.rect.ey),t.lineTo(e.rect.x,e.rect.ey),t.closePath();var r=e.rect.width/7;t.moveTo(e.rect.x,e.rect.y+r),t.lineTo(e.rect.ex,e.rect.y+r),t.moveTo(e.rect.x+r,e.rect.y),t.lineTo(e.rect.x+r,e.rect.ey),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function b(t){t.iconRect=new i.c(0,0,0,0)}function x(t){var e=t.rect.width/7;t.textRect=new i.c(t.rect.x+e,t.rect.y+e,t.rect.width-e,t.rect.height-e),t.fullTextRect=t.textRect}function S(t,e){t.beginPath();var r=e.rect.width/10;t.moveTo(e.rect.x+2*r,e.rect.y),t.bezierCurveTo(e.rect.x-2*r/3,e.rect.y,e.rect.x-2*r/3,e.rect.ey,e.rect.x+2*r,e.rect.ey),t.lineTo(e.rect.ex,e.rect.ey),t.bezierCurveTo(e.rect.ex-r,e.rect.ey,e.rect.ex-r,e.rect.y,e.rect.ex,e.rect.y),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function _(t){t.anchors.push(new i.b(t.rect.x,t.rect.y+t.rect.height/2,i.a.Left)),t.anchors.push(new i.b(t.rect.x+8*t.rect.width/15,t.rect.y,i.a.Up)),t.anchors.push(new i.b(t.rect.x+13*t.rect.width/14,t.rect.y+t.rect.height/2,i.a.Right)),t.anchors.push(new i.b(t.rect.x+8*t.rect.width/15,t.rect.ey,i.a.Bottom))}function k(t){t.iconRect=new i.c(0,0,0,0)}function T(t){t.textRect=new i.c(t.rect.x+t.rect.width/6,t.rect.y,3*t.rect.width/4,t.rect.height),t.fullTextRect=t.textRect}function I(t,e){t.beginPath(),t.ellipse(e.rect.x+e.rect.width/2,e.rect.y+e.rect.height/2,e.rect.width/2,e.rect.height/2,0,0,2*Math.PI),t.moveTo(e.rect.x+e.rect.width/2,e.rect.ey),t.lineTo(e.rect.ex,e.rect.ey),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function L(t){t.iconRect=new i.c(0,0,0,0)}function A(t){var e=5*t.rect.width/7,r=5*t.rect.height/7;t.textRect=new i.c(t.rect.x+(t.rect.width-e)/2,t.rect.y+(t.rect.height-r)/2,e,r),t.fullTextRect=t.textRect}function R(t,e){t.beginPath();var r=e.rect.height/4;t.moveTo(e.rect.x,e.rect.y+r),t.lineTo(e.rect.ex,e.rect.y),t.lineTo(e.rect.ex,e.rect.ey),t.lineTo(e.rect.x,e.rect.ey),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function P(t){t.anchors.push(new i.b(t.rect.x,t.rect.y+5*t.rect.height/8,i.a.Left)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.y+t.rect.height/8,i.a.Up)),t.anchors.push(new i.b(t.rect.ex,t.rect.y+t.rect.height/2,i.a.Right)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.ey,i.a.Bottom))}function E(t){t.iconRect=new i.c(0,0,0,0)}function C(t){t.textRect=new i.c(t.rect.x,t.rect.y+t.rect.height/4,t.rect.width,3*t.rect.height/4),t.fullTextRect=t.textRect}function O(t,e){t.beginPath();var r=e.rect.width/8;t.moveTo(e.rect.x+r,e.rect.y),t.lineTo(e.rect.ex-r,e.rect.y),t.bezierCurveTo(e.rect.ex+r/3,e.rect.y,e.rect.ex+r/3,e.rect.ey,e.rect.ex-r,e.rect.ey),t.lineTo(e.rect.x+r,e.rect.ey),t.lineTo(e.rect.x,e.rect.y+e.rect.height/2),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function N(t){t.anchors.push(new i.b(t.rect.x,t.rect.y+t.rect.height/2,i.a.Left)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.y,i.a.Up)),t.anchors.push(new i.b(t.rect.x+t.rect.width,t.rect.y+t.rect.height/2,i.a.Right)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.y+t.rect.height,i.a.Bottom))}function M(t){t.iconRect=new i.c(0,0,0,0)}function B(t){t.textRect=new i.c(t.rect.x+t.rect.width/8,t.rect.y,3*t.rect.width/4,t.rect.height),t.fullTextRect=t.textRect}function D(t,e){t.beginPath(),t.moveTo(e.rect.x,e.rect.y),t.lineTo(e.rect.ex,e.rect.y),t.moveTo(e.rect.x,e.rect.ey),t.lineTo(e.rect.ex,e.rect.ey),t.stroke()}function U(t){t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.y,i.a.Up)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.y+t.rect.height,i.a.Bottom))}function j(t,e){t.beginPath();var r=e.rect.width/4;t.moveTo(e.rect.x+r,e.rect.y),t.lineTo(e.rect.x,e.rect.y),t.lineTo(e.rect.x,e.rect.ey),t.lineTo(e.rect.x+r,e.rect.ey),t.stroke()}function F(t){t.anchors.push(new i.b(t.rect.x,t.rect.y+t.rect.height/2,i.a.Left))}function W(t,e){t.beginPath(),t.ellipse(e.rect.x+e.rect.width/2,e.rect.y+e.rect.height/2,e.rect.width/2,e.rect.height/2,0,0,2*Math.PI),t.stroke(),t.beginPath(),t.fillStyle=t.strokeStyle,t.ellipse(e.rect.x+e.rect.width/2,e.rect.y+e.rect.height/2,e.rect.width/4,e.rect.height/4,0,0,2*Math.PI),t.fill()}function K(t){t.iconRect=new i.c(0,0,0,0)}function q(t){var e=5*t.rect.width/7,r=5*t.rect.height/7;t.textRect=new i.c(t.rect.x+(t.rect.width-e)/2,t.rect.y+(t.rect.height-r)/2,e,r),t.fullTextRect=t.textRect}function z(t,e){var r=e.borderRadius,n=e.borderRadius;e.borderRadius<1&&(r=e.rect.width*e.borderRadius,n=e.rect.height*e.borderRadius);n=r<n?r:n;e.rect.width<2*n&&(n=e.rect.width/2),e.rect.height<2*n&&(n=e.rect.height/2),t.beginPath(),t.moveTo(e.rect.x+n,e.rect.y),t.arcTo(e.rect.x+e.rect.width,e.rect.y,e.rect.x+e.rect.width,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height,e.rect.x,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x,e.rect.y+e.rect.height,e.rect.x,e.rect.y,n),t.arcTo(e.rect.x,e.rect.y,e.rect.x+e.rect.width,e.rect.y,n),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function H(t){t.iconRect=new i.c(0,0,0,0)}function V(t){t.textRect=new i.c(t.rect.x,t.rect.y,t.rect.width,t.rect.height),t.fullTextRect=t.textRect}function Y(t){t.anchors.push(new i.b(t.rect.x,t.rect.y+t.rect.height/2,i.a.Left)),t.anchors.push(new i.b(t.rect.ex,t.rect.y+t.rect.height/2,i.a.Right));for(var e=5;t.rect.x+e<t.rect.ex;e+=5){var r=new i.b(t.rect.x+e,t.rect.y,i.a.Up),n=new i.b(t.rect.x+e,t.rect.ey,i.a.Bottom);r.hidden=!0,n.hidden=!0,t.anchors.push(r),t.anchors.push(n)}}function X(t){t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.y,i.a.Up)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.ey,i.a.Bottom));for(var e=5;t.rect.y+e<t.rect.ey;e+=5){var r=new i.b(t.rect.x,t.rect.y+e,i.a.Left),n=new i.b(t.rect.ex,t.rect.y+e,i.a.Right);r.hidden=!0,n.hidden=!0,t.anchors.push(r),t.anchors.push(n)}}function $(t,e){var r=e.borderRadius,n=e.borderRadius;e.borderRadius<1&&(r=e.rect.width*e.borderRadius,n=e.rect.height*e.borderRadius);n=r<n?r:n;e.rect.width<2*n&&(n=e.rect.width/2),e.rect.height<2*n&&(n=e.rect.height/2),t.beginPath(),t.moveTo(e.rect.x+n,e.rect.y),t.arcTo(e.rect.x+e.rect.width,e.rect.y,e.rect.x+e.rect.width,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height,e.rect.x,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x,e.rect.y+e.rect.height,e.rect.x,e.rect.y,n),t.arcTo(e.rect.x,e.rect.y,e.rect.x+e.rect.width,e.rect.y,n),t.closePath(),t.moveTo(e.rect.x+40,e.rect.y),t.lineTo(e.rect.x+40,e.rect.ey),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function G(t){t.iconRect=new i.c(0,0,0,0)}function J(t){t.textRect=new i.c(t.rect.x+10,t.rect.y,20,t.rect.height),t.fullTextRect=t.textRect}function Q(t,e){var r=e.borderRadius,n=e.borderRadius;e.borderRadius<1&&(r=e.rect.width*e.borderRadius,n=e.rect.height*e.borderRadius);n=r<n?r:n;e.rect.width<2*n&&(n=e.rect.width/2),e.rect.height<2*n&&(n=e.rect.height/2),t.beginPath(),t.moveTo(e.rect.x+n,e.rect.y),t.arcTo(e.rect.x+e.rect.width,e.rect.y,e.rect.x+e.rect.width,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x+e.rect.width,e.rect.y+e.rect.height,e.rect.x,e.rect.y+e.rect.height,n),t.arcTo(e.rect.x,e.rect.y+e.rect.height,e.rect.x,e.rect.y,n),t.arcTo(e.rect.x,e.rect.y,e.rect.x+e.rect.width,e.rect.y,n),t.closePath(),t.moveTo(e.rect.x,e.rect.y+40),t.lineTo(e.rect.ex,e.rect.y+40),(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function Z(t){t.iconRect=new i.c(0,0,0,0)}function tt(t){t.textRect=new i.c(t.rect.x,t.rect.y,t.rect.width,40),t.fullTextRect=t.textRect}function et(t,e){var r=e.borderRadius,n=e.borderRadius;e.borderRadius<1&&(r=e.rect.width*e.borderRadius,n=e.rect.height*e.borderRadius);n=r<n?r:n;50<2*(n=e.rect.width<2*n?e.rect.width/2:n)&&(n=25),t.beginPath(),t.moveTo(e.rect.x+n,e.rect.y),t.arcTo(e.rect.x+e.rect.width,e.rect.y,e.rect.x+e.rect.width,e.rect.y+50,n),t.arcTo(e.rect.x+e.rect.width,e.rect.y+50,e.rect.x,e.rect.y+50,n),t.arcTo(e.rect.x,e.rect.y+50,e.rect.x,e.rect.y,n),t.arcTo(e.rect.x,e.rect.y,e.rect.x+e.rect.width,e.rect.y,n),t.closePath(),(e.fillStyle||e.bkType)&&t.fill(),t.stroke(),t.save(),t.beginPath(),t.lineWidth=1,t.setLineDash([7,7]);n=e.rect.x+e.rect.width/2;t.moveTo(n,e.rect.y+50+1),t.lineTo(n,e.rect.ey),t.stroke(),t.restore()}function rt(t){t.iconRect=new i.c(0,0,0,0)}function nt(t){t.textRect=new i.c(t.rect.x,t.rect.y,t.rect.width,50),t.fullTextRect=t.textRect}function it(t){t.anchors.push(new i.b(t.rect.x,t.rect.y+25,i.a.Left)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.y,i.a.Up)),t.anchors.push(new i.b(t.rect.x+t.rect.width,t.rect.y+25,i.a.Right)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.y+50,i.a.Bottom)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.ey,i.a.Bottom))}function ot(t,e){t.beginPath(),t.rect(e.rect.x,e.rect.y,e.rect.width,e.rect.height),this.fillStyle?t.fillStyle=this.fillStyle:t.fillStyle="#fff",(e.fillStyle||e.bkType)&&t.fill(),t.stroke()}function st(t){t.iconRect=new i.c(0,0,0,0)}function at(t){t.textRect=new i.c(0,0,0,0),t.fullTextRect=t.textRect}function ct(t){t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.y,i.a.Up)),t.anchors.push(new i.b(t.rect.x+t.rect.width/2,t.rect.ey,i.a.Bottom));for(var e=5;t.rect.y+e<t.rect.ey;e+=5){var r=new i.b(t.rect.x,t.rect.y+e,i.a.Left),n=new i.b(t.rect.ex,t.rect.y+e,i.a.Right);r.hidden=!0,n.hidden=!0,t.anchors.push(r),t.anchors.push(n)}}var ht={};function lt(t,e){Object(i.g)(t,e);t=ht.echarts;!t&&window&&(t=window.echarts),e.data&&t&&("string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data.echarts&&(void 0!==e.elementId&&null!==e.elementId||(e.elementId=Object(i.i)()),e.elementLoaded||(ht[e.id]={div:Object(i.e)(e)},e.elementLoaded=!0,document.body.appendChild(ht[e.id].div),e.addToDiv(),ht[e.id].chart=t.init(ht[e.id].div,e.data.echarts.theme),e.elementRendered=!1,setTimeout(function(){ht[e.id].chart.resize()})),e.elementRendered||setTimeout(function(){ht[e.id].chart.setOption(e.data.echarts.option),ht[e.id].chart.resize(),e.elementRendered=!0,setTimeout(function(){var t=new Image;t.src=ht[e.id].chart.getDataURL({pixelRatio:2}),e.img=t},100)})))}var ut=r(157),ft=r(213);function dt(){var t;Object(i.h)("flowData",n,o,a,c),Object(i.h)("flowSubprocess",h,null,l,u),Object(i.h)("flowDb",f,null,d,p),Object(i.h)("flowDocument",y,g,m,v),Object(i.h)("flowInternalStorage",w,null,b,x),Object(i.h)("flowExternStorage",S,_,k,T),Object(i.h)("flowQueue",I,null,L,A),Object(i.h)("flowManually",R,P,E,C),Object(i.h)("flowDisplay",O,N,M,B),Object(i.h)("flowParallel",D,U,null,null),Object(i.h)("flowComment",j,F,null,null),Object(i.h)("activityFinal",W,null,K,q),Object(i.h)("swimlaneV",Q,null,Z,tt),Object(i.h)("swimlaneH",$,null,G,J),Object(i.h)("forkH",z,Y,H,V),Object(i.h)("forkV",z,X,H,V),Object(i.h)("lifeline",et,it,rt,nt),Object(i.h)("sequenceFocus",ot,ct,st,at),Object(ut.register)(),window.echarts||Object(i.f)("https://cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js",null,!0),ht.echarts=t,ht.echarts,Object(i.h)("echarts",lt,null,function(t){t.iconRect=new i.c(t.rect.x,t.rect.y,t.rect.width,t.rect.height),t.fullIconRect=t.rect},null)}var pt=[{group:"基本形状",show:!0,children:[{name:"rectangle",icon:"icon-rect",data:{text:"正方形",_realLabel:"正方形",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"rectangle"}},{name:"rectangle",icon:"icon-rectangle",data:{text:"圆角矩形",_realLabel:"圆角矩形",rect:{width:200,height:50},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,borderRadius:.1,name:"rectangle"}},{name:"circle",icon:"icon-circle",data:{text:"圆",_realLabel:"圆",rect:{width:100,height:100},name:"circle",textMaxLine:1}},{name:"triangle",icon:"icon-triangle",data:{text:"三角形",_realLabel:"三角形",rect:{width:100,height:100},name:"triangle"}},{name:"diamond",icon:"icon-diamond",data:{text:"菱形",_realLabel:"菱形",rect:{width:100,height:100},name:"diamond"}},{name:"pentagon",icon:"icon-pentagon",data:{text:"五边形",_realLabel:"五边形",rect:{width:100,height:100},name:"pentagon"}},{name:"hexagon",icon:"icon-hexagon",data:{text:"六边形",_realLabel:"六边形",rect:{width:100,height:100},paddingTop:10,paddingBottom:10,name:"hexagon"}},{name:"pentagram",icon:"icon-pentagram",data:{text:"五角星",_realLabel:"五角星",rect:{width:100,height:100},name:"pentagram"}},{name:"leftArrow",icon:"icon-arrow-left",data:{text:"左箭头",_realLabel:"左箭头",rect:{width:200,height:100},name:"leftArrow"}},{name:"rightArrow",icon:"icon-arrow-right",data:{text:"右箭头",_realLabel:"右箭头",rect:{width:200,height:100},name:"rightArrow"}},{name:"twowayArrow",icon:"icon-twoway-arrow",data:{text:"双向箭头",_realLabel:"双向箭头",rect:{width:200,height:100},name:"twowayArrow"}},{name:"line",icon:"icon-line",data:{text:"直线",_realLabel:"直线",rect:{width:100,height:100},name:"line"}},{name:"cloud",icon:"icon-cloud",data:{text:"云",_realLabel:"云",rect:{width:100,height:100},name:"cloud"}},{name:"message",icon:"icon-msg",data:{text:"消息框",_realLabel:"消息框",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"message"}},{name:"file",icon:"icon-file",data:{text:"文档",_realLabel:"文档",rect:{width:80,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"file"}},{name:"text",icon:"icon-text",data:{text:"文本",_realLabel:"文本",rect:{width:160,height:30},name:"text"}},{name:"image",icon:"icon-image",data:{text:"",_realLabel:"图片",rect:{width:100,height:100},name:"image",image:"/img/logo.png"}},{name:"cube",icon:"icon-cube",label:"数据集",data:{_realLabel:"数据集",rect:{width:50,height:70},is3D:!0,z:10,zRotate:15,fillStyle:"#ddd",name:"cube",icon:"",iconFamily:"topology",iconColor:"#777",iconSize:30}},{name:"people",icon:"icon-people",data:{_realLabel:"人",rect:{width:70,height:100},name:"people"}},{name:"视频/网页",icon:"icon-pc",data:{text:"视频/网页",_realLabel:"视频/网页",rect:{width:200,height:200},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"div"}}]},{group:"流程图",show:!0,children:[{name:"开始/结束",icon:"icon-flow-start",data:{text:"开始",_realLabel:"开始/结束",rect:{width:120,height:40},borderRadius:.5,name:"rectangle"}},{name:"流程",icon:"icon-rectangle",data:{text:"流程",_realLabel:"流程",rect:{width:120,height:40},name:"rectangle"}},{name:"判定",icon:"icon-diamond",data:{text:"判定",_realLabel:"判定",rect:{width:120,height:60},name:"diamond"}},{name:"数据",icon:"icon-flow-data",data:{text:"数据",_realLabel:"数据",rect:{width:120,height:50},name:"flowData"}},{name:"准备",icon:"icon-flow-ready",data:{text:"准备",_realLabel:"准备",rect:{width:120,height:50},name:"hexagon"}},{name:"子流程",icon:"icon-flow-subprocess",data:{text:"子流程",_realLabel:"子流程",rect:{width:120,height:50},name:"flowSubprocess"}},{name:"数据库",icon:"icon-db",data:{text:"数据库",_realLabel:"数据库",rect:{width:80,height:120},name:"flowDb"}},{name:"文档",icon:"icon-flow-document",data:{text:"文档",_realLabel:"文档",rect:{width:120,height:100},name:"flowDocument"}},{name:"内部存储",icon:"icon-internal-storage",data:{text:"内部存储",_realLabel:"内部存储",rect:{width:120,height:80},name:"flowInternalStorage"}},{name:"外部存储",icon:"icon-extern-storage",data:{text:"外部存储",_realLabel:"外部存储",rect:{width:120,height:80},name:"flowExternStorage"}},{name:"队列",icon:"icon-flow-queue",data:{text:"队列",_realLabel:"队列",rect:{width:100,height:100},name:"flowQueue"}},{name:"手动输入",icon:"icon-flow-manually",data:{text:"手动输入",_realLabel:"手动输入",rect:{width:120,height:80},name:"flowManually"}},{name:"展示",icon:"icon-flow-display",data:{text:"展示",_realLabel:"展示",rect:{width:120,height:80},name:"flowDisplay"}},{name:"并行模式",icon:"icon-flow-parallel",data:{text:"并行模式",_realLabel:"并行模式",rect:{width:120,height:50},name:"flowParallel"}},{name:"注释",icon:"icon-flow-comment",data:{text:"注释",_realLabel:"注释",rect:{width:100,height:100},name:"flowComment"}}]},{group:"活动图",show:!0,children:[{name:"开始",icon:"icon-inital",data:{text:"",_realLabel:"开始",rect:{width:30,height:30},name:"circle",fillStyle:"#555",strokeStyle:"transparent"}},{name:"结束",icon:"icon-final",data:{text:"",_realLabel:"结束",rect:{width:30,height:30},name:"activityFinal"}},{name:"活动",icon:"icon-action",data:{text:"活动",_realLabel:"活动",rect:{width:120,height:50},borderRadius:.25,name:"rectangle"}},{name:"决策/合并",icon:"icon-diamond",data:{text:"决策",_realLabel:"决策",rect:{width:120,height:50},name:"diamond"}},{name:"垂直泳道",icon:"icon-swimlane-v",data:{text:"垂直泳道",_realLabel:"垂直泳道",rect:{width:200,height:500},name:"swimlaneV"}},{name:"水平泳道",icon:"icon-swimlane-h",data:{text:"水平泳道",_realLabel:"水平泳道",rect:{width:500,height:200},name:"swimlaneH"}},{name:"垂直分岔/汇合",icon:"icon-fork-v",data:{text:"",_realLabel:"垂直分岔/汇合",rect:{width:10,height:150},name:"forkV",fillStyle:"#555",strokeStyle:"transparent"}},{name:"水平分岔/汇合",icon:"icon-fork",data:{text:"",_realLabel:"水平分岔/汇合",rect:{width:150,height:10},name:"forkH",fillStyle:"#555",strokeStyle:"transparent"}}]},{group:"时序图和类图",show:!0,children:[{name:"生命线",icon:"icon-lifeline",data:{text:"生命线",_realLabel:"生命线",rect:{width:150,height:400},name:"lifeline"}},{name:"激活",icon:"icon-focus",data:{text:"",rect:{width:12,height:200},name:"sequenceFocus"}},{name:"简单类",icon:"icon-simple-class",data:{text:"简单类",_realLabel:"简单类",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"simpleClass",children:[{text:"- name: string\n+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"100%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}}]}},{name:"类",icon:"icon-class",data:{text:"类",_realLabel:"类",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"interfaceClass",children:[{text:"- name: string",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}},{text:"+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:"50%",width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}}]}}]},{group:"图表控件",show:!0,children:[{name:"折线图",icon:"icon-line-chart",data:{text:"折线图",_realLabel:"折线图",rect:{width:300,height:200},name:"echarts",data:{echarts:{option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[820,932,901,934,1290,1330,1320],type:"line"}]}}}}},{name:"柱状图",icon:"icon-bar-chart",data:{text:"柱状图",_realLabel:"柱状图",rect:{width:300,height:200},name:"echarts",data:{echarts:{option:{color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"直接访问",type:"bar",barWidth:"60%",data:[10,52,200,334,390,330,220]}]}}}}},{name:"饼图",icon:"icon-pie-chart",data:{text:"饼图",_realLabel:"饼图",rect:{width:200,height:200},name:"echarts",data:{echarts:{option:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:["直接访问","邮件营销","联盟广告","视频广告","搜索引擎"]},series:[{name:"访问来源",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[{value:335,name:"直接访问"},{value:310,name:"邮件营销"},{value:234,name:"联盟广告"},{value:135,name:"视频广告"},{value:1548,name:"搜索引擎"}]}]}}}}},{name:"仪表盘",icon:"icon-dashboard-chart",data:{text:"仪表盘",_realLabel:"仪表盘",rect:{width:300,height:300},name:"echarts",data:{echarts:{option:{tooltip:{formatter:"{a} <br/>{b} : {c}%"},toolbox:{feature:{restore:{},saveAsImage:{}}},series:[{name:"业务指标",type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"完成率"}]}]}}}}}]}],yt=r(228),gt=r.n(yt),mt=r(227),yt=r.n(mt),mt=r(226),mt=r.n(mt),vt=r(97),mt={name:"TopologyBody",components:{CanvasProps:gt.a,CanvasContextMenu:yt.a,TopologyToolsPanel:mt.a},props:{uploadImage:{type:Function,default:null},events:{default:null},defaultOpenData:{type:Object,default:null},isView:{type:Boolean,default:!1}},inject:["config"],data:function(){return{containerKey:"topology-body-"+(new Date).getTime(),canvas:null,tools:pt,props:{node:null,line:null,nodes:null,multi:!1,expand:!1,locked:!1},contextmenu:{left:null,top:null,bottom:null},canvasOptions:null}},created:function(){var t=this;dt(),document.onclick=function(){t.contextmenu={left:null,top:null,bottom:null}}},mounted:function(){var t=JSON.parse(JSON.stringify(this.config));if(this.isView&&(t.rule=0,t.locked=1),t.on=this.onMessage,this.canvas=new i.d(this.containerKey,t),null!==this.defaultOpenData)try{this.canvas.open(this.defaultOpenData)}catch(t){console.error(t)}this.isView&&this.handleChangeCanvas({locked:1,rule:!1}),this.handleRefreshOptions()},watch:{events:function(t){t.name&&this["handleEvent"+t.name]&&this["handleEvent"+t.name](t.data)}},methods:{onMessage:function(t,e){var r=this;setTimeout(function(){switch(t){case"node":case"addNode":r.props={node:e,line:null,multi:!1,expand:r.props.expand,nodes:null,locked:e.locked};break;case"line":case"addLine":r.props={node:null,line:e,multi:!1,nodes:null,locked:e.locked};break;case"multi":r.props={node:null,line:null,multi:!0,nodes:1<e.length?e:null,locked:r.getLocked({nodes:e})};break;case"space":r.props={node:null,line:null,multi:!1,nodes:null,locked:!1};break;case"moveOut":break;case"moveNodes":case"resizeNodes":1<e.length?r.props={node:null,line:null,multi:!0,nodes:e,locked:r.getLocked({nodes:e})}:r.props={node:e[0],line:null,multi:!1,nodes:null,locked:!1}}},0)},getLocked:function(t){var e=!0;if(t.nodes&&t.nodes.length){var r,n=Object(s.a)(t.nodes);try{for(n.s();!(r=n.n()).done;)if(!r.value.locked){e=!1;break}}catch(t){n.e(t)}finally{n.f()}}if(e&&t.lines){var i,o=Object(s.a)(t.lines);try{for(o.s();!(i=o.n()).done;)if(!i.value.locked){e=!1;break}}catch(t){o.e(t)}finally{o.f()}}return e},onUpdateProps:function(t){this.canvas.updateProps(t)},onContextMenu:function(t){t.preventDefault(),t.stopPropagation(),t.clientY+360<document.body.clientHeight?this.contextmenu={left:t.clientX+"px",top:t.clientY+"px"}:this.contextmenu={left:t.clientX+"px",top:-(document.body.clientHeight-t.clientY)+"px"}},onDrag:function(t,e){t.dataTransfer.setData("Text",JSON.stringify(e.data))},handleChangeCanvas:function(t){if(this.canvas){for(var e in t)"bkImage"===e?(this.canvas.clearBkImg(),this.canvas.data[e]=t[e]):"scale"===e?this.canvas.scaleTo(Number(t[e])):(this.canvas.data[e]=t[e],this.canvas.options[e]=t[e]);this.canvas.render()}},handleRefreshOptions:function(){for(var t={},e=0,r=["cacheLen","refresh","fontColor","fontFamily","fontSize","lineHeight","textAlign","textBaseline","color","activeColor","hoverColor","anchorRadius","anchorFillStyle","dockStrokeStyle","dockFillStyle","dragColor","rotateCursor","hoverCursor","minScale","maxScale","anchorSize","keydown","viewPadding","gridSize","gridColor","ruleColor","bkColor","animateColor","extDpiRatio","playIcon","pauseIcon","fullScreenIcon","loopIcon","scale","lineName","fromArrow","toArrow","locked","width","height","fileName","lineWidth","resourcePath","grid","rule","rotateCursor"];e<r.length;e++){var n=r[e],i=this.canvas.data[n]||this.canvas.options[n];null!=i&&(t[n]=i)}t.fileName||(t.fileName=this.canvas.id),this.canvasOptions=t,this.$emit("updateData",this.canvasOptions)},handleGetJson:function(){return this.canvas?this.canvas.data:null},handleGetImages:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=[];if(this.canvas){var r=this.canvas.data.bkImage||this.canvas.options.bkImage;r&&(!1===t?e.push(this.resolveBaseResourcePath(r,!1)):e.push(r));var n,i=Object(s.a)(this.canvas.data.pens);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.image&&(!1===t?e.push(this.resolveBaseResourcePath(o.image,!1)):e.push(o.image))}}catch(t){i.e(t)}finally{i.f()}}return e},handleRefreshResourcesPath:function(){var t,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],r=this.canvas.data.bkImage||this.canvas.options.bkImage;for(t in r&&this.handleChangeCanvas(this.resolveBaseResourcePath(r,e)),this.canvas.data.pens){var n=this.canvas.data.pens[t];n&&n.image&&(this.canvas.data.pens[t].image=this.resolveBaseResourcePath(n.image,e))}this.canvas.render()},resolveBaseResourcePath:function(t){return t&&(!0===(1<arguments.length&&void 0!==arguments[1]&&arguments[1])?-1<t.indexOf("http")?t:this.config.resourcePath+t:-1===t.indexOf("http")?t:t.replace(this.config.resourcePath,""))},handleEventChangeState:function(t){this.handleChangeCanvas(t),this.handleRefreshOptions()},handleEventAutoWindowSize:function(){this.canvas.fitView(16),this.handleRefreshOptions()},handleEventSaveJson:function(t){Object(ft.saveAs)(new Blob([JSON.stringify(this.canvas.data)],{type:"text/plain;charset=utf-8"}),(t||this.canvasOptions.fileName)+".json")},handleEventSavePng:function(t){this.canvas.saveAsImage((t||this.canvasOptions.fileName)+".png")},handleEventSaveSvg:function(t){var e,r=new C2S(this.canvas.canvas.width+200,this.canvas.canvas.height+200),n=Object(s.a)(this.canvas.data.pens);try{for(n.s();!(e=n.n()).done;)e.value.render(r)}catch(t){n.e(t)}finally{n.f()}var i=(i=r.getSerializedSvg()).replace("<defs/>","<defs>\n  <style type=\"text/css\">\n    @font-face {\n      font-family: 'topology';\n      src: url('http://at.alicdn.com/t/font_1331132_h688rvffmbc.ttf?t=1569311680797') format('truetype');\n    }\n  </style>\n</defs>"),o=window.URL||window,i=new Blob([i]),o=o.createObjectURL(i),i=document.createElement("a");i.setAttribute("download",t||this.canvasOptions.fileName+".svg"),i.setAttribute("href",o);o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),i.dispatchEvent(o)},handleEventNew:function(){this.canvas.open(),this.handleRefreshOptions()},handleEventUndo:function(){this.canvas.undo()},handleEventRedo:function(){this.canvas.redo()},handleEventCopy:function(){this.canvas.copy()},handleEventCut:function(){this.canvas.cut()},handleEventParse:function(){this.canvas.parse()},handleEventOpen:function(t){try{"string"==typeof t&&(t=JSON.parse(t)),this.canvas.open(t),this.handleRefreshOptions()}catch(t){return!1}},handleEventOpenFile:function(){var n=this,t=document.createElement("input");t.type="file",t.onchange=function(t){var e=t.srcElement||t.target;e.files&&e.files[0]&&((t=new FileReader).onload=function(t){var e=t.target.result+"";try{var r=JSON.parse(e);n.canvas.open(r),n.handleRefreshOptions()}catch(t){return!1}},t.readAsText(e.files[0]))},t.click()},handleEventSaveCache:function(){this.canvas&&vt.a.set("topology:cache",this.canvas.data)},handleEventReadCache:function(){var t=vt.a.getJson("topology:cache");t&&(this.canvas.open(t),this.handleRefreshOptions())},handleSetPens:function(t){this.canvas.activeLayer.pens=[],this.canvas.activeLayer.add(t),this.canvas.render()},handleToImage:function(){var n=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"file";return new Promise(function(t,e){if(n.canvas){var r=n.canvas.toImage(10);if(!r||"data:,"===r)return void e({message:"无法保存空画布"});t("file"===i?n.handleBase64toFile(r,n.canvasOptions.fileName):r)}e({message:"画布未初始化完成"})})},handleBase64toFile:function(t,e){for(var r=t.split(","),t=r[0].match(/:(.*?);/)[1],n=atob(r[1]),i=n.length,o=new Uint8Array(i);i--;)o[i]=n.charCodeAt(i);return new File([o],e+".png",{type:t})}}},r=r(13),wt=Object(r.a)(mt,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"topology-body page"},[e.isView?e._e():t("div",{staticClass:"tools"},[t("topology-tools-panel",{attrs:{tools:e.tools},on:{toolDrag:e.onDrag}})],1),t("div",{staticClass:"full",attrs:{id:e.containerKey},on:{contextmenu:function(t){return e.onContextMenu(t)}}}),e.isView?e._e():t("div",{staticClass:"props",style:e.props.expand?"overflow: visible":""},[t("CanvasProps",{attrs:{props:e.props,options:e.canvasOptions,pens:e.canvas?e.canvas.data.pens:null,uploadImage:e.uploadImage},on:{"update:props":function(t){e.props=t},change:e.onUpdateProps,changeCanvas:e.handleChangeCanvas,setPens:e.handleSetPens}})],1),e.contextmenu.left&&!e.isView?t("div",{staticClass:"context-menu",style:this.contextmenu},[t("CanvasContextMenu",{attrs:{canvas:e.canvas,props:e.props},on:{"update:props":function(t){e.props=t}}})],1):e._e()])},[],!1,null,"e9aa295e",null).exports;wt.install=function(t){t.component(wt.name,wt)};e.default=wt},,,,,,,,,,,,function(t,e){t.exports=require("../options/global")},function(t,e,r){"use strict";var n=r(82),l=r(8),u=r(11),i=r(18),f=r(81),d=r(80);n("match",function(n,c,h){return[function(t){var e=i(this),r=null==t?void 0:t[n];return void 0!==r?r.call(t,e):new RegExp(t)[n](String(e))},function(t){var e=h(c,this,t);if(e.done)return e.value;var r=l(this),n=String(t);if(!r.global)return d(r,n);for(var i=r.unicode,o=[],s=r.lastIndex=0;null!==(a=d(r,n));){var a=String(a[0]);""===(o[s]=a)&&(r.lastIndex=f(n,u(r.lastIndex),i)),s++}return 0===s?null:o}]})},function(t,e,r){var n=r(8),i=r(98);t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return n(e.call(t))}},function(t,e,r){"use strict";r(90);function i(e){try{return decodeURIComponent(e)}catch(t){return e}}function o(t){var e,r=t.replace(M," "),n=4;try{return decodeURIComponent(r)}catch(t){for(;n;)r=r.replace((e=n--,B[e-1]||(B[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))),i);return r}}function n(t){return U[t]}function s(t){return encodeURIComponent(t).replace(D,n)}function l(t,e){if(e)for(var r,n=e.split("&"),i=0;i<n.length;)(r=n[i++]).length&&(r=r.split("="),t.push({key:o(r.shift()),value:o(r.join("="))}))}function u(t){this.entries.length=0,l(this.entries,t)}function h(t,e){if(t<e)throw TypeError("Not enough arguments")}var a=r(20),c=r(30),f=r(214),d=r(17),p=r(154),y=r(54),g=r(99),m=r(25),v=r(87),w=r(9),b=r(88),x=r(56),S=r(8),_=r(6),k=r(33),T=r(24),I=r(248),L=r(98),r=r(5),A=c("fetch"),R=c("Headers"),r=r("iterator"),P="URLSearchParams",E=P+"Iterator",C=m.set,O=m.getterFor(P),N=m.getterFor(E),M=/\+/g,B=Array(4),D=/[!'()~]|%20/g,U={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},j=g(function(t,e){C(this,{type:E,iterator:I(O(t).entries),kind:e})},"Iterator",function(){var t=N(this),e=t.kind,r=t.iterator.next(),t=r.value;return r.done||(r.value="keys"===e?t.key:"values"===e?t.value:[t.key,t.value]),r}),F=function(){v(this,F,P);var t,e,r,n,i,o,s,a,c=0<arguments.length?arguments[0]:void 0,h=[];if(C(this,{type:P,entries:h,updateURL:function(){},updateSearchParams:u}),void 0!==c)if(_(c))if("function"==typeof(t=L(c)))for(r=(e=t.call(c)).next;!(o=r.call(e)).done;){if((o=(i=(n=I(S(o.value))).next).call(n)).done||(s=i.call(n)).done||!i.call(n).done)throw TypeError("Expected sequence with length 2");h.push({key:o.value+"",value:s.value+""})}else for(a in c)w(c,a)&&h.push({key:a,value:c[a]+""});else l(h,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},g=F.prototype;p(g,{append:function(t,e){h(arguments.length,2);var r=O(this);r.entries.push({key:t+"",value:e+""}),r.updateURL()},delete:function(t){h(arguments.length,1);for(var e=O(this),r=e.entries,n=t+"",i=0;i<r.length;)r[i].key===n?r.splice(i,1):i++;e.updateURL()},get:function(t){h(arguments.length,1);for(var e=O(this).entries,r=t+"",n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){h(arguments.length,1);for(var e=O(this).entries,r=t+"",n=[],i=0;i<e.length;i++)e[i].key===r&&n.push(e[i].value);return n},has:function(t){h(arguments.length,1);for(var e=O(this).entries,r=t+"",n=0;n<e.length;)if(e[n++].key===r)return!0;return!1},set:function(t,e){h(arguments.length,1);for(var r,n=O(this),i=n.entries,o=!1,s=t+"",a=e+"",c=0;c<i.length;c++)(r=i[c]).key===s&&(o?i.splice(c--,1):(o=!0,r.value=a));o||i.push({key:s,value:a}),n.updateURL()},sort:function(){for(var t,e,r=O(this),n=r.entries,i=n.slice(),o=n.length=0;o<i.length;o++){for(t=i[o],e=0;e<o;e++)if(n[e].key>t.key){n.splice(e,0,t);break}e===o&&n.push(t)}r.updateURL()},forEach:function(t){for(var e,r=O(this).entries,n=b(t,1<arguments.length?arguments[1]:void 0,3),i=0;i<r.length;)n((e=r[i++]).value,e.key,this)},keys:function(){return new j(this,"keys")},values:function(){return new j(this,"values")},entries:function(){return new j(this,"entries")}},{enumerable:!0}),d(g,r,g.entries),d(g,"toString",function(){for(var t,e=O(this).entries,r=[],n=0;n<e.length;)t=e[n++],r.push(s(t.key)+"="+s(t.value));return r.join("&")},{enumerable:!0}),y(F,P),a({global:!0,forced:!f},{URLSearchParams:F}),f||"function"!=typeof A||"function"!=typeof R||a({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,r,n=[t];return 1<arguments.length&&(_(e=arguments[1])&&(r=e.body,x(r)===P&&((t=e.headers?new R(e.headers):new R).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=k(e,{body:T(0,String(r)),headers:T(0,t)}))),n.push(e)),A.apply(this,n)}}),t.exports={URLSearchParams:F,getState:O}},function(t,e,r){"use strict";function m(t){return t+22+75*(t<26)}function o(t){var e,r=[],n=(t=function(t){for(var e=[],r=0,n=t.length;r<n;){var i,o=t.charCodeAt(r++);55296<=o&&o<=56319&&r<n?56320==(64512&(i=t.charCodeAt(r++)))?e.push(((1023&o)<<10)+(1023&i)+65536):(e.push(o),r--):e.push(o)}return e}(t)).length,i=128,o=0,s=72;for(l=0;l<t.length;l++)(e=t[l])<128&&r.push(x(e));var a=r.length,c=a;for(a&&r.push("-");c<n;){for(var h=v,l=0;l<t.length;l++)i<=(e=t[l])&&e<h&&(h=e);var u=c+1;if(h-i>b((v-o)/u))throw RangeError(w);for(o+=(h-i)*u,i=h,l=0;l<t.length;l++){if((e=t[l])<i&&++o>v)throw RangeError(w);if(e==i){for(var f=o,d=36;;d+=36){var p=d<=s?1:s+26<=d?26:d-s;if(f<p)break;var y=f-p,g=36-p;r.push(x(m(p+y%g))),f=b(y/g)}r.push(x(m(f))),s=function(t,e,r){var n=0;for(t=r?b(t/700):t>>1,t+=b(t/e);455<t;n+=36)t=b(t/35);return b(n+36*t/(t+38))}(o,u,c==a),o=0,++c}}++o,++i}return r.join("")}var v=2147483647,s=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,w="Overflow: input needs wider integers to process",b=Math.floor,x=String.fromCharCode;t.exports=function(t){for(var e,r=[],n=t.toLowerCase().replace(a,".").split("."),i=0;i<n.length;i++)e=n[i],r.push(s.test(e)?"xn--"+o(e):e);return r.join(".")}},function(t,e,r){var n=r(8);t.exports=function(t){var e=t.return;if(void 0!==e)return n(e.call(t)).value}},function(t,e,r){var i=r(8),o=r(251);t.exports=function(e,t,r,n){try{return n?t(i(r)[0],r[1]):t(r)}catch(t){throw o(e),t}}},function(t,e,r){"use strict";var d=r(88),p=r(15),y=r(252),g=r(156),m=r(11),v=r(102),w=r(98);t.exports=function(t){var e,r,n,i,o,s,a=p(t),c="function"==typeof this?this:Array,h=arguments.length,l=1<h?arguments[1]:void 0,u=void 0!==l,t=w(a),f=0;if(u&&(l=d(l,2<h?arguments[2]:void 0,2)),null==t||c==Array&&g(t))for(r=new c(e=m(a.length));f<e;f++)s=u?l(a[f],f):a[f],v(r,f,s);else for(o=(i=t.call(a)).next,r=new c;!(n=o.call(i)).done;f++)s=u?y(i,l,[n.value,f],!0):n.value,v(r,f,s);return r.length=f,r}},function(t,e,r){"use strict";var f=r(4),n=r(2),d=r(66),p=r(67),y=r(68),g=r(15),m=r(42),i=Object.assign,o=Object.defineProperty;t.exports=!i||n(function(){if(f&&1!==i({b:1},i(o({},"a",{enumerable:!0,get:function(){o(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=i({},t)[r]||d(i({},e)).join("")!=n})?function(t,e){for(var r=g(t),n=arguments.length,i=1,o=p.f,s=y.f;i<n;)for(var a,c=m(arguments[i++]),h=o?d(c).concat(o(c)):d(c),l=h.length,u=0;u<l;)a=h[u++],f&&!s.call(c,a)||(r[a]=c[a]);return r}:i},function(t,e,r){"use strict";r(215);function m(t,e){var r,n,i;if("["==e.charAt(0))return"]"==e.charAt(e.length-1)&&(r=G(e.slice(1,-1)))?void(t.host=r):B;if(nt(t))return e=T(e),H.test(e)||null===(r=$(e))?B:void(t.host=r);if(V.test(e))return B;for(r="",n=k(e),i=0;i<n.length;i++)r+=et(n[i],J);t.host=r}function l(t){var e,r,n,i;if("number"==typeof t){for(e=[],r=0;r<4;r++)e.unshift(t%256),t=O(t/256);return e.join(".")}if("object"!=typeof t)return t;for(e="",n=function(t){for(var e=null,r=1,n=null,i=0,o=0;o<8;o++)0!==t[o]?(r<i&&(e=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return r<i&&(e=n,r=i),e}(t),r=0;r<8;r++)i&&0===t[r]||(i=i&&!1,n===r?(e+=r?":":"::",i=!0):(e+=t[r].toString(16),r<7&&(e+=":")));return"["+e+"]"}function v(t){return""!=t.username||""!=t.password}function i(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme}function w(t,e){return 2==t.length&&U.test(t.charAt(0))&&(":"==(t=t.charAt(1))||!e&&"|"==t)}function b(t){var e;return 1<t.length&&w(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)}function x(t){var e=t.path,r=e.length;!r||"file"==t.scheme&&1==r&&w(e[0],!0)||e.pop()}function a(t,e,r,n){var i,o,s,a=r||it,c=0,h="",l=!1,u=!1,f=!1;for(r||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(Y,"")),e=e.replace(X,""),i=k(e);c<=i.length;){switch(o=i[c],a){case it:if(!o||!U.test(o)){if(r)return M;a=st;continue}h+=o.toLowerCase(),a=ot;break;case ot:if(o&&(j.test(o)||"+"==o||"-"==o||"."==o))h+=o.toLowerCase();else{if(":"!=o){if(r)return M;h="",a=st,c=0;continue}if(r&&(nt(t)!=_(rt,h)||"file"==h&&(v(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=h,r)return void(nt(t)&&rt[t.scheme]==t.port&&(t.port=null));h="","file"==t.scheme?a=mt:nt(t)&&n&&n.scheme==t.scheme?a=at:nt(t)?a=ut:"/"==i[c+1]?(a=ct,c++):(t.cannotBeABaseURL=!0,t.path.push(""),a=St)}break;case st:if(!n||n.cannotBeABaseURL&&"#"!=o)return M;if(n.cannotBeABaseURL&&"#"==o){t.scheme=n.scheme,t.path=n.path.slice(),t.query=n.query,t.fragment="",t.cannotBeABaseURL=!0,a=kt;break}a="file"==n.scheme?mt:ht;continue;case at:if("/"!=o||"/"!=i[c+1]){a=ht;continue}a=ft,c++;break;case ct:if("/"==o){a=dt;break}a=xt;continue;case ht:if(t.scheme=n.scheme,o==S)t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query=n.query;else if("/"==o||"\\"==o&&nt(t))a=lt;else if("?"==o)t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query="",a=_t;else{if("#"!=o){t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.path.pop(),a=xt;continue}t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query=n.query,t.fragment="",a=kt}break;case lt:if(!nt(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,a=xt;continue}a=dt}else a=ft;break;case ut:if(a=ft,"/"!=o||"/"!=h.charAt(c+1))continue;c++;break;case ft:if("/"==o||"\\"==o)break;a=dt;continue;case dt:if("@"==o){l&&(h="%40"+h);for(var l=!0,d=k(h),p=0;p<d.length;p++){var y=d[p];":"!=y||f?(y=et(y,tt),f?t.password+=y:t.username+=y):f=!0}h=""}else if(o==S||"/"==o||"?"==o||"#"==o||"\\"==o&&nt(t)){if(l&&""==h)return"Invalid authority";c-=k(h).length+1,h="",a=pt}else h+=o;break;case pt:case yt:if(r&&"file"==t.scheme){a=wt;continue}if(":"!=o||u){if(o==S||"/"==o||"?"==o||"#"==o||"\\"==o&&nt(t)){if(nt(t)&&""==h)return B;if(r&&""==h&&(v(t)||null!==t.port))return;if(s=m(t,h))return s;if(h="",a=bt,r)return;continue}"["==o?u=!0:"]"==o&&(u=!1),h+=o}else{if(""==h)return B;if(s=m(t,h))return s;if(h="",a=gt,r==yt)return}break;case gt:if(!F.test(o)){if(o==S||"/"==o||"?"==o||"#"==o||"\\"==o&&nt(t)||r){if(""!=h){var g=parseInt(h,10);if(65535<g)return D;t.port=nt(t)&&g===rt[t.scheme]?null:g,h=""}if(r)return;a=bt;continue}return D}h+=o;break;case mt:if(t.scheme="file","/"==o||"\\"==o)a=vt;else{if(!n||"file"!=n.scheme){a=xt;continue}if(o==S)t.host=n.host,t.path=n.path.slice(),t.query=n.query;else if("?"==o)t.host=n.host,t.path=n.path.slice(),t.query="",a=_t;else{if("#"!=o){b(i.slice(c).join(""))||(t.host=n.host,t.path=n.path.slice(),x(t)),a=xt;continue}t.host=n.host,t.path=n.path.slice(),t.query=n.query,t.fragment="",a=kt}}break;case vt:if("/"==o||"\\"==o){a=wt;break}n&&"file"==n.scheme&&!b(i.slice(c).join(""))&&(w(n.path[0],!0)?t.path.push(n.path[0]):t.host=n.host),a=xt;continue;case wt:if(o==S||"/"==o||"\\"==o||"?"==o||"#"==o){if(!r&&w(h))a=xt;else if(""==h){if(t.host="",r)return;a=bt}else{if(s=m(t,h))return s;if("localhost"==t.host&&(t.host=""),r)return;h="",a=bt}continue}h+=o;break;case bt:if(nt(t)){if(a=xt,"/"!=o&&"\\"!=o)continue}else if(r||"?"!=o)if(r||"#"!=o){if(o!=S&&(a=xt,"/"!=o))continue}else t.fragment="",a=kt;else t.query="",a=_t;break;case xt:if(o==S||"/"==o||"\\"==o&&nt(t)||!r&&("?"==o||"#"==o)){if(".."===(g=(g=h).toLowerCase())||"%2e."===g||".%2e"===g||"%2e%2e"===g?(x(t),"/"==o||"\\"==o&&nt(t)||t.path.push("")):"."===(g=h)||"%2e"===g.toLowerCase()?"/"==o||"\\"==o&&nt(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&w(h)&&(t.host&&(t.host=""),h=h.charAt(0)+":"),t.path.push(h)),h="","file"==t.scheme&&(o==S||"?"==o||"#"==o))for(;1<t.path.length&&""===t.path[0];)t.path.shift();"?"==o?(t.query="",a=_t):"#"==o&&(t.fragment="",a=kt)}else h+=et(o,Z);break;case St:"?"==o?(t.query="",a=_t):"#"==o?(t.fragment="",a=kt):o!=S&&(t.path[0]+=et(o,J));break;case _t:r||"#"!=o?o!=S&&("'"==o&&nt(t)?t.query+="%27":t.query+="#"==o?"%23":et(o,J)):(t.fragment="",a=kt);break;case kt:o!=S&&(t.fragment+=et(o,Q))}c++}}var S,n,o,s=r(20),c=r(4),h=r(214),u=r(3),f=r(84),d=r(17),p=r(87),_=r(9),y=r(254),k=r(253),g=r(92).codeAt,T=r(250),I=r(54),L=r(249),r=r(25),A=u.URL,R=L.URLSearchParams,P=L.getState,E=r.set,C=r.getterFor("URL"),O=Math.floor,N=Math.pow,M="Invalid scheme",B="Invalid host",D="Invalid port",U=/[A-Za-z]/,j=/[\d+-.A-Za-z]/,F=/\d/,W=/^0x/i,K=/^[0-7]+$/,q=/^\d+$/,z=/^[\dA-Fa-f]+$/,H=/[\0\t\n\r #%/:<>?@[\\\]^|]/,V=/[\0\t\n\r #/:<>?@[\\\]^|]/,Y=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,X=/[\t\n\r]/g,$=function(t){var e,r,n,i,o,s,a,c=t.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),4<(e=c.length))return t;for(r=[],n=0;n<e;n++){if(""==(i=c[n]))return t;if(o=10,1<i.length&&"0"==i.charAt(0)&&(o=W.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)s=0;else{if(!(10==o?q:8==o?K:z).test(i))return t;s=parseInt(i,o)}r.push(s)}for(n=0;n<e;n++)if(s=r[n],n==e-1){if(s>=N(256,5-e))return null}else if(255<s)return null;for(a=r.pop(),n=0;n<r.length;n++)a+=r[n]*N(256,3-n);return a},G=function(t){function e(){return t.charAt(f)}var r,n,i,o,s,a,c,h=[0,0,0,0,0,0,0,0],l=0,u=null,f=0;if(":"==e()){if(":"!=t.charAt(1))return;f+=2,u=++l}for(;e();){if(8==l)return;if(":"!=e()){for(r=n=0;n<4&&z.test(e());)r=16*r+parseInt(e(),16),f++,n++;if("."==e()){if(0==n)return;if(f-=n,6<l)return;for(i=0;e();){if(o=null,0<i){if(!("."==e()&&i<4))return;f++}if(!F.test(e()))return;for(;F.test(e());){if(s=parseInt(e(),10),null===o)o=s;else{if(0==o)return;o=10*o+s}if(255<o)return;f++}h[l]=256*h[l]+o,2!=++i&&4!=i||l++}if(4!=i)return;break}if(":"==e()){if(f++,!e())return}else if(e())return;h[l++]=r}else{if(null!==u)return;f++,u=++l}}if(null!==u)for(a=l-u,l=7;0!=l&&0<a;)c=h[l],h[l--]=h[u+a-1],h[u+--a]=c;else if(8!=l)return;return h},J={},Q=y({},J,{" ":1,'"':1,"<":1,">":1,"`":1}),Z=y({},Q,{"#":1,"?":1,"{":1,"}":1}),tt=y({},Z,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),et=function(t,e){var r=g(t,0);return 32<r&&r<127&&!_(e,t)?t:encodeURIComponent(t)},rt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},nt=function(t){return _(rt,t.scheme)},it={},ot={},st={},at={},ct={},ht={},lt={},ut={},ft={},dt={},pt={},yt={},gt={},mt={},vt={},wt={},bt={},xt={},St={},_t={},kt={},Tt=function(t){var e,r=p(this,Tt,"URL"),n=1<arguments.length?arguments[1]:void 0,t=String(t),i=E(r,{type:"URL"});if(void 0!==n)if(n instanceof Tt)e=C(n);else if(s=a(e={},String(n)))throw TypeError(s);if(s=a(i,t,null,e))throw TypeError(s);var o=i.searchParams=new R,s=P(o);s.updateSearchParams(i.query),s.updateURL=function(){i.query=String(o)||null},c||(r.href=It.call(r),r.origin=Lt.call(r),r.protocol=At.call(r),r.username=Rt.call(r),r.password=Pt.call(r),r.host=Et.call(r),r.hostname=Ct.call(r),r.port=Ot.call(r),r.pathname=Nt.call(r),r.search=Mt.call(r),r.searchParams=Bt.call(r),r.hash=Dt.call(r))},r=Tt.prototype,It=function(){var t=C(this),e=t.scheme,r=t.username,n=t.password,i=t.host,o=t.port,s=t.path,a=t.query,c=t.fragment,h=e+":";return null!==i?(h+="//",v(t)&&(h+=r+(n?":"+n:"")+"@"),h+=l(i),null!==o&&(h+=":"+o)):"file"==e&&(h+="//"),h+=t.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(h+="?"+a),null!==c&&(h+="#"+c),h},Lt=function(){var t=C(this),e=t.scheme,r=t.port;if("blob"==e)try{return new Tt(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&nt(t)?e+"://"+l(t.host)+(null!==r?":"+r:""):"null"},At=function(){return C(this).scheme+":"},Rt=function(){return C(this).username},Pt=function(){return C(this).password},Et=function(){var t=C(this),e=t.host,t=t.port;return null===e?"":null===t?l(e):l(e)+":"+t},Ct=function(){var t=C(this).host;return null===t?"":l(t)},Ot=function(){var t=C(this).port;return null===t?"":String(t)},Nt=function(){var t=C(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Mt=function(){var t=C(this).query;return t?"?"+t:""},Bt=function(){return C(this).searchParams},Dt=function(){var t=C(this).fragment;return t?"#"+t:""},y=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};c&&f(r,{href:y(It,function(t){var e=C(this),t=String(t),t=a(e,t);if(t)throw TypeError(t);P(e.searchParams).updateSearchParams(e.query)}),origin:y(Lt),protocol:y(At,function(t){var e=C(this);a(e,String(t)+":",it)}),username:y(Rt,function(t){var e=C(this),r=k(String(t));if(!i(e)){e.username="";for(var n=0;n<r.length;n++)e.username+=et(r[n],tt)}}),password:y(Pt,function(t){var e=C(this),r=k(String(t));if(!i(e)){e.password="";for(var n=0;n<r.length;n++)e.password+=et(r[n],tt)}}),host:y(Et,function(t){var e=C(this);e.cannotBeABaseURL||a(e,String(t),pt)}),hostname:y(Ct,function(t){var e=C(this);e.cannotBeABaseURL||a(e,String(t),yt)}),port:y(Ot,function(t){var e=C(this);i(e)||(""==(t=String(t))?e.port=null:a(e,t,gt))}),pathname:y(Nt,function(t){var e=C(this);e.cannotBeABaseURL||(e.path=[],a(e,t+"",bt))}),search:y(Mt,function(t){var e=C(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",a(e,t,_t)),P(e.searchParams).updateSearchParams(e.query)}),searchParams:y(Bt),hash:y(Dt,function(t){var e=C(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",a(e,t,kt)):e.fragment=null})}),d(r,"toJSON",function(){return It.call(this)},{enumerable:!0}),d(r,"toString",function(){return It.call(this)},{enumerable:!0}),A&&(n=A.createObjectURL,o=A.revokeObjectURL,n&&d(Tt,"createObjectURL",function(t){return n.apply(A,arguments)}),o&&d(Tt,"revokeObjectURL",function(t){return o.apply(A,arguments)})),I(Tt,"URL"),s({global:!0,forced:!h,sham:!c},{URL:Tt})}]);
/* eslint-enable  */